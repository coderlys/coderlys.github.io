(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{576:function(s,t,a){"use strict";a.r(t);var n=a(13),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"commonjs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs"}},[s._v("#")]),s._v(" CommonJS")]),s._v(" "),a("h3",{attrs:{id:"commonjs-和-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs-和-node"}},[s._v("#")]),s._v(" CommonJS 和 Node")]),s._v(" "),a("ul",[a("li",[s._v("我们需要知道CommonJS是"),a("font",{attrs:{color:"cornflowerblue"}},[s._v("一个规范")]),s._v("，最初提出来是在浏览器以外的地方使用，并且当时被命名为"),a("font",{attrs:{color:"cornflowerblue"}},[s._v("ServerJS")]),s._v("，后来为了体现它的广泛性，修改为"),a("font",{attrs:{color:"cornflowerblue"}},[s._v("CommonJS")]),s._v("，平时我们也会"),a("font",{attrs:{color:"cornflowerblue"}},[s._v("简称为CJS")]),s._v(" "),a("ul",[a("li",[s._v("Node是CommonJS在服务器端一个具有代表性的实现；")]),s._v(" "),a("li",[s._v("Browserify是CommonJS在浏览器中的一种实现；")]),s._v(" "),a("li",[s._v("webpack打包工具具备对CommonJS的支持和转换；")])])],1),s._v(" "),a("li",[s._v("所以，Node中对"),a("font",{attrs:{color:"cornflowerblue"}},[s._v("CommonJS进行了支持和实现")]),s._v("，让我们在开发"),a("font",{attrs:{color:"cornflowerblue"}},[s._v("node的过程中可以方便的进行模块化开发")]),s._v("：\n"),a("ul",[a("li",[s._v("在Node中"),a("font",{attrs:{color:"cornflowerblue"}},[s._v("每一个js文件都是一个单独的模块")]),s._v("；")],1),s._v(" "),a("li",[s._v("这个模块中包括CommonJS规范的核心变量："),a("font",{attrs:{color:"orange"}},[s._v("exports、module.exports、require")]),s._v("；")],1),s._v(" "),a("li",[s._v("我们可以使用这些变量来方便的"),a("font",{attrs:{color:"cornflowerblue"}},[s._v("进行模块化开发")]),s._v("；")],1)])],1),s._v(" "),a("li",[s._v("前面我们提到过模块化的核心是导出和导入，Node中对其进行了实现\n"),a("ul",[a("li",[a("font",{attrs:{color:"orange"}},[s._v("exports 和 module.exports")]),s._v(" 可以负责"),a("font",{attrs:{color:"orange"}},[s._v("对模块中的内容进行导出")]),s._v("；")],1),s._v(" "),a("li",[a("font",{attrs:{color:"orange"}},[s._v("require 函数")]),s._v(" 可以帮助我们导入"),a("font",{attrs:{color:"orange"}},[s._v("其他模块（自定义模块、系统模块、第三方库模块）中的内容")]),s._v("；")],1)])])]),s._v(" "),a("h3",{attrs:{id:"exports导出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exports导出"}},[s._v("#")]),s._v(" exports导出")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("注意："),a("font",{attrs:{color:"orange"}},[s._v("exports是一个对象，我们可以在这个对象中添加很多个属性，添加的属性会导出")]),s._v("；")],1),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// bar.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"coderlys"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" age "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" name\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" age\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sayHello "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sayHello\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// main.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" bar "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./bar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// coderlys")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 18")]),s._v("\nbar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Hello coderlys")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("上面这行完成了什么操作呢？理解下面这句话，Node中的模块化一目了然\n"),a("ul",[a("li",[a("font",{attrs:{color:"orange"}},[s._v("意味着main中的bar变量等于exports对象；")])],1),s._v(" "),a("li",[s._v("也就是require通过各种查找方式，最终找到了exports这个对象")]),s._v(" "),a("li",[s._v("并且将这个"),a("font",{attrs:{color:"orange"}},[s._v("exports对象赋值给了bar变量")]),s._v("；")],1),s._v(" "),a("li",[a("font",{attrs:{color:"orange"}},[s._v("bar变量就是exports对象了")])],1)])])])])]),s._v(" "),a("h3",{attrs:{id:"module-exports-导出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-exports-导出"}},[s._v("#")]),s._v(" module.exports 导出")]),s._v(" "),a("ul",[a("li",[s._v("但在Node中我们"),a("font",{attrs:{color:"orange"}},[s._v("经常导出")]),s._v("东西的时候，是"),a("font",{attrs:{color:"orange"}},[s._v("通过module.exports导出")]),s._v("的\n"),a("ul",[a("li",[a("strong",[s._v("module.exports   和  exports 有什么关系或者区别?")])])])],1),s._v(" "),a("li",[s._v("通过维基百科中对CommonJS规范的解析：\n"),a("ul",[a("li",[s._v("CommonJS中是"),a("font",{attrs:{color:"orange"}},[s._v("没有module.exports")]),s._v("的概念的；")],1),s._v(" "),a("li",[s._v("但是为了实现模块的导出，Node中使用的是"),a("font",{attrs:{color:"orange"}},[s._v("Module的类，每一个模块都是Module的一个实例，也就是module")])],1),s._v(" "),a("li",[s._v("所以在Node中真正用于导出的其实"),a("font",{attrs:{color:"orange"}},[s._v("根本不是exports，而是module.exports")]),s._v("；")],1),s._v(" "),a("li",[s._v("因为"),a("font",{attrs:{color:"orange"}},[s._v("module才是导出的真正实现者")]),s._v("；")],1)])]),s._v(" "),a("li",[s._v("但是，为什么exports 也可以导出呢?\n"),a("ul",[a("li",[s._v("这是因为"),a("font",{attrs:{color:"orange"}},[s._v(" module 对象的exports属性是exports对象的一个引用")]),s._v("；")],1),s._v(" "),a("li",[s._v("也就是说 "),a("font",{attrs:{color:"orange"}},[s._v("module.exports = exports = main中的bar")]),s._v("；")],1)])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// bar.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"coderlys"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" age "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    sayHello\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// main.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" bar "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./bar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// coderlys")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 18")]),s._v("\n\nbar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Hello coderlys")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"require"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#require"}},[s._v("#")]),s._v(" require")]),s._v(" "),a("ul",[a("li",[a("p",[a("font",{attrs:{color:"orange"}},[s._v("require是一个函数")]),s._v("，可以帮助我们引入一个文件（模块）中导出的对象。")],1)]),s._v(" "),a("li",[a("div",{staticClass:"language-xml-dtd line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("require(X)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("font",{attrs:{color:"cornflowerblue"}},[s._v("第一步：将X当做一个文件在对应的目录下查找；")]),s._v(" "),a("ul",[a("li",[s._v("1.如果有后缀名，按照后缀名的格式查找对应的文件")]),s._v(" "),a("li",[s._v("2.如果没有后缀名，会按照如下顺序：\n"),a("ul",[a("li",[s._v("1> 直接查找文件X")]),s._v(" "),a("li",[s._v("2> 查找X.js文件")]),s._v(" "),a("li",[s._v("3> 查找X.json文件")]),s._v(" "),a("li",[s._v("4> 查找X.node文件")])])])])],1),s._v(" "),a("li",[a("font",{attrs:{color:"cornflowerblue"}},[s._v("第二步：没有找到对应的文件，将X作为一个目录")]),s._v(" "),a("ul",[a("li",[s._v("查找目录下面的index文件\n"),a("ul",[a("li",[s._v("1> 查找X/index.js文件")]),s._v(" "),a("li",[s._v("2> 查找X/index.json文件")]),s._v(" "),a("li",[s._v("3> 查找X/index.node文件")])])])])],1),s._v(" "),a("li",[a("font",{attrs:{color:"cornflowerblue"}},[s._v("如果没有找到，那么报错：not found")])],1)])])]),s._v(" "),a("h3",{attrs:{id:"模块的加载过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块的加载过程"}},[s._v("#")]),s._v(" "),a("strong",[s._v("模块的加载过程")])]),s._v(" "),a("ul",[a("li",[s._v("结论一："),a("strong",[s._v("模块在被第一次引入时，模块中的js代码会被运行一次")])]),s._v(" "),a("li",[s._v("结论二："),a("strong",[s._v("模块被多次引入时，会缓存，最终只加载（运行）一次")]),s._v(" "),a("ul",[a("li",[s._v("为什么只会加载运行一次呢？")]),s._v(" "),a("li",[s._v("这是因为每个模块对象module都有一个属性：loaded。")]),s._v(" "),a("li",[s._v("为false表示还没有加载，为true表示已经加载；")])])])]),s._v(" "),a("h3",{attrs:{id:"commonjs规范缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs规范缺点"}},[s._v("#")]),s._v(" CommonJS规范缺点")]),s._v(" "),a("ul",[a("li",[a("font",{attrs:{color:"orange"}},[s._v(" CommonJS加载模块是同步的")]),s._v("：\n"),a("ul",[a("li",[s._v("同步的意味着只有"),a("font",{attrs:{color:"cornflowerblue"}},[s._v("等到对应的模块加载完毕，当前模块中的内容才能被运行")]),s._v("；")],1),s._v(" "),a("li",[s._v("这个在服务器不会有什么问题，因为服务器"),a("font",{attrs:{color:"cornflowerblue"}},[s._v("加载的js文件都是本地文件")]),s._v("，加载速度非常快；")],1)])],1),s._v(" "),a("li",[a("font",{attrs:{color:"orange"}},[s._v("如果将它应用于浏览器呢？")]),s._v(" "),a("ul",[a("li",[s._v("浏览器"),a("font",{attrs:{color:"orange"}},[s._v("加载js文件需要先从服务器将文件下载下来，之后再加载运行")]),s._v("；")],1),s._v(" "),a("li",[s._v("那么采用"),a("font",{attrs:{color:"orange"}},[s._v("同步的就意味着后续的js代码都无法正常运行")]),s._v("，即使是"),a("font",{attrs:{color:"orange"}},[s._v("一些简单的DOM操作")])],1)])],1)]),s._v(" "),a("h2",{attrs:{id:"es-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es-module"}},[s._v("#")]),s._v(" ES Module")]),s._v(" "),a("ul",[a("li",[s._v("ES Module 和 和CommonJS的模块化有一些不同之处：\n"),a("ul",[a("li",[s._v("一方面它使用了"),a("font",{attrs:{color:"orange"}},[s._v("import")]),s._v(" 和 "),a("font",{attrs:{color:"orange"}},[s._v("export")]),s._v(" 关键字；")],1),s._v(" "),a("li",[s._v("另一方面它采用"),a("font",{attrs:{color:"orange"}},[s._v("编译期的静态分析")]),s._v("，并且也"),a("font",{attrs:{color:"orange"}},[s._v("加入了动态引用的方式")]),s._v("；")],1)])]),s._v(" "),a("li",[s._v("ES Module 模块采用 export 和 import 关键字来实现模块化\n"),a("ul",[a("li",[a("font",{attrs:{color:"orange"}},[s._v("export ")]),s._v("负责将模块内容"),a("font",{attrs:{color:"orange"}},[s._v("导出")])],1),s._v(" "),a("li",[a("font",{attrs:{color:"orange"}},[s._v("import ")]),s._v("负责从其他模块"),a("font",{attrs:{color:"orange"}},[s._v("导入")]),s._v("内容")],1)])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// foo.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lys"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" age "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sayHello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sayHello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// main.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sayHello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./foo.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// lys")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 18")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// sayHello")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("注意: "),a("font",{attrs:{color:"cornflowerblue"}},[s._v(" 本地测试 如果你通过本地加载Html 文件 (比如一个 file:// 路径的文件")]),s._v("), 你将会遇到 CORS 错误，因为Javascript 模块安全性需要；你需要"),a("font",{attrs:{color:"cornflowerblue"}},[s._v("通过一个服务器来测试")])],1)]),s._v(" "),a("h3",{attrs:{id:"export-关键字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#export-关键字"}},[s._v("#")]),s._v(" export 关键字")]),s._v(" "),a("ul",[a("li",[a("p",[a("font",{attrs:{color:"orange"}},[s._v("export 关键字将一个模块中的变量、函数、类等导出")])],1)]),s._v(" "),a("li",[a("p",[s._v("我们希望将其他中内容全部导出，它可以有如下的方式：")])]),s._v(" "),a("li",[a("p",[s._v("方式一：在语句"),a("font",{attrs:{color:"orange"}},[s._v("声明的前面直接加上export关键字")])],1),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lys"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" age "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("方式二：将所有需要导出的标识符"),a("font",{attrs:{color:"orange"}},[s._v("，放到export后面的 {}中")])],1)])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("```js\nexport {\n    name,\n    age\n}\n```\n\n- 注意：这里的 {}里面不是ES6的对象字面量的增强写法，<font color='cornflowerblue'>{}也不是表示一个对象</font>的；\n-  所以：<font color='cornflowerblue'> export {name: name}，是错误的写法</font>\n")])])]),a("ul",[a("li",[a("p",[s._v("方式三：导出时给标识符起一个别名")]),s._v(" "),a("ul",[a("li",[s._v("通过"),a("font",{attrs:{color:"orange"}},[s._v("as关键字起别名")])],1)]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" lysName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("lysName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./foo.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"import-关键字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#import-关键字"}},[s._v("#")]),s._v(" import 关键字")]),s._v(" "),a("ul",[a("li",[a("p",[a("font",{attrs:{color:"orange"}},[s._v("import关键字负责从另外一个模块中导入内容")])],1)]),s._v(" "),a("li",[a("p",[s._v("导入内容的方式也有多种：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("方式一："),a("font",{attrs:{color:"cornflowerblue"}},[s._v("import {标识符列表} from '模块'；")])],1),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("lysName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./foo.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("注意：这里的{}也不是一个对象，里面只是存放导入的标识符列表内容；")])])]),s._v(" "),a("li",[a("p",[s._v("方式二："),a("font",{attrs:{color:"cornflowerblue"}},[s._v("导入时给标识符起别名")])],1)]),s._v(" "),a("li",[a("p",[s._v("通过"),a("font",{attrs:{color:"orange"}},[s._v("as关键字起别名")])],1),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" lysName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./foo.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("方式三："),a("font",{attrs:{color:"orange"}},[s._v("通过 * 将模块功能放到一个模块功能对象")]),s._v("（a module object）上")],1)])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" obj "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./foo.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"export和import结合使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#export和import结合使用"}},[s._v("#")]),s._v(" export和import结合使用")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" formatCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" formatDate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./format.js'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" parseLyric "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./parse.js'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  formatCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  formatDate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  parseLyric\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 优化一:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// export { formatCount, formatDate } from './format.js'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// export { parseLyric } from './parse.js'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ul",[a("li",[s._v("为什么要这样做呢？\n"),a("ul",[a("li",[s._v("在开发和封装一个功能库时，通常我们希望将暴露的所有接口放到一个文件中；")]),s._v(" "),a("li",[s._v("这样方便指定统一的接口规范，也方便阅读；")]),s._v(" "),a("li",[s._v("这个时候，我们就可以使用export和import结合使用")])])])]),s._v(" "),a("h3",{attrs:{id:"export-default-用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#export-default-用法"}},[s._v("#")]),s._v(" export default 用法")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("还有一种导出叫做"),a("font",{attrs:{color:"orange"}},[s._v("默认导出")]),s._v("（default export）")],1),s._v(" "),a("ul",[a("li",[s._v("默认导出export时可以"),a("font",{attrs:{color:"orange"}},[s._v("不需要指定名字；")])],1),s._v(" "),a("li",[s._v("在"),a("font",{attrs:{color:"orange"}},[s._v("导入时不需要使用 {}，并且可以自己来指定名字")]),s._v("；")],1)]),s._v(" "),a("p",[s._v("注意："),a("font",{attrs:{color:"cornflowerblue"}},[s._v("在一个模块中，"),a("strong",[s._v("只能有一个默认导出")])]),s._v("（default export）；")],1)])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// foo.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sayHello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// main.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" foo  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./foo.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// sayHello")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"import-函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#import-函数"}},[s._v("#")]),s._v(" import 函数")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("通过import加载一个模块，是不可以在其放到逻辑代码中")]),s._v("的，比如：")])]),s._v(" "),a("li",[a("p",[s._v("为什么会出现这个情况呢？")]),s._v(" "),a("ul",[a("li",[s._v("这是因为"),a("font",{attrs:{color:"orange"}},[s._v("ES Module在被JS引擎解析")]),s._v("时，就"),a("font",{attrs:{color:"orange"}},[s._v("必须知道它的依赖关系")])],1),s._v(" "),a("li",[s._v("由于"),a("font",{attrs:{color:"orange"}},[s._v("这个时候js代码没有任何的运行")]),s._v("，所以"),a("font",{attrs:{color:"orange"}},[s._v("无法在进行类似于if判断中根据代码的执行情况")]),s._v("；")],1),s._v(" "),a("li",[s._v("甚至"),a("font",{attrs:{color:"orange"}},[s._v("拼接路径的写法也是错误")]),s._v("的：因为我们必须到运行时能确定path的值；")],1)])]),s._v(" "),a("li",[a("p",[s._v("但是某些情况下，我们"),a("strong",[s._v("确确实实希望动态的来加载某一个模块")]),s._v("：")]),s._v(" "),a("ul",[a("li",[s._v("这个时候我们需要"),a("font",{attrs:{color:"orange"}},[s._v("使用 import() 函数来动态加载")]),s._v("；\n"),a("ul",[a("li",[a("font",{attrs:{color:"orange"}},[s._v("import函数返回一个Promise，可以通过then获取")]),s._v("结果")],1)])],1)])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" flag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("flag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./foo.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("res")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"------"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);