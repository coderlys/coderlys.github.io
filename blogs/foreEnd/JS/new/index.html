<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS学习笔记 | 前端学习笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="./images/favicon.ico">
    <meta name="description" content="前端学习笔记">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="./assets/css/0.styles.7b00b7c5.css" as="style"><link rel="preload" href="./assets/js/app.46d64a8d.js" as="script"><link rel="preload" href="./assets/js/3.4298b55b.js" as="script"><link rel="preload" href="./assets/js/1.610d1c6f.js" as="script"><link rel="preload" href="./assets/js/22.1584174a.js" as="script"><link rel="prefetch" href="./assets/js/10.f00be53f.js"><link rel="prefetch" href="./assets/js/11.aa7936a1.js"><link rel="prefetch" href="./assets/js/12.70df5333.js"><link rel="prefetch" href="./assets/js/13.6e2906c6.js"><link rel="prefetch" href="./assets/js/14.9fa397d1.js"><link rel="prefetch" href="./assets/js/15.e2b011d7.js"><link rel="prefetch" href="./assets/js/16.d19c8ed3.js"><link rel="prefetch" href="./assets/js/17.9b7afedb.js"><link rel="prefetch" href="./assets/js/18.43098341.js"><link rel="prefetch" href="./assets/js/19.3b79b3ec.js"><link rel="prefetch" href="./assets/js/20.5a65f603.js"><link rel="prefetch" href="./assets/js/21.d530a75c.js"><link rel="prefetch" href="./assets/js/23.9a732c63.js"><link rel="prefetch" href="./assets/js/24.d4297161.js"><link rel="prefetch" href="./assets/js/25.7a4710aa.js"><link rel="prefetch" href="./assets/js/26.7d8c5c0f.js"><link rel="prefetch" href="./assets/js/27.f485ff3d.js"><link rel="prefetch" href="./assets/js/28.1f3b7437.js"><link rel="prefetch" href="./assets/js/29.6c298091.js"><link rel="prefetch" href="./assets/js/30.cc5bc852.js"><link rel="prefetch" href="./assets/js/4.708dbd98.js"><link rel="prefetch" href="./assets/js/5.3300b2bd.js"><link rel="prefetch" href="./assets/js/6.5ddc16d2.js"><link rel="prefetch" href="./assets/js/7.70ac515b.js"><link rel="prefetch" href="./assets/js/8.37e304ac.js"><link rel="prefetch" href="./assets/js/9.6e3cb48e.js">
    <link rel="stylesheet" href="./assets/css/0.styles.7b00b7c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>前端学习笔记</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>前端学习笔记</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><img src="./images/avatar.jpg" alt="前端学习笔记" class="logo"> <span class="site-name">前端学习笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/./" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/HTML_CSS/" class="nav-link"><i class="iconfont reco-tag"></i>
  HTML_CSS
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./tag/JS/" class="nav-link"><i class="iconfont reco-tag"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/JQ/" class="nav-link"><i class="iconfont reco-tag"></i>
  JQ
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/VUE/2/" class="nav-link"><i class="iconfont reco-tag"></i>
  VUE2
</a></li><li class="dropdown-subitem"><a href="/./tag/vue3/" class="nav-link"><i class="iconfont reco-tag"></i>
  VUE3
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/Git/" class="nav-link"><i class="iconfont reco-tag"></i>
  Git
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/ElementUI/" class="nav-link"><i class="iconfont reco-tag"></i>
  ElementUI
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Vant/" class="nav-link"><i class="iconfont reco-tag"></i>
  Vant
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Bootstrap/" class="nav-link"><i class="iconfont reco-tag"></i>
  Bootstrap
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      后端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/" class="nav-link"><i class="iconfont reco-tag"></i>
  Node
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/koa/" class="nav-link"><i class="iconfont reco-tag"></i>
  Koa
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/express/" class="nav-link"><i class="iconfont reco-tag"></i>
  EXpress
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/database/mysql/" class="nav-link"><i class="iconfont reco-tag"></i>
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/./timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>17</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>10</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/./" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/HTML_CSS/" class="nav-link"><i class="iconfont reco-tag"></i>
  HTML_CSS
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./tag/JS/" class="nav-link"><i class="iconfont reco-tag"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/JQ/" class="nav-link"><i class="iconfont reco-tag"></i>
  JQ
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/VUE/2/" class="nav-link"><i class="iconfont reco-tag"></i>
  VUE2
</a></li><li class="dropdown-subitem"><a href="/./tag/vue3/" class="nav-link"><i class="iconfont reco-tag"></i>
  VUE3
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/Git/" class="nav-link"><i class="iconfont reco-tag"></i>
  Git
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/ElementUI/" class="nav-link"><i class="iconfont reco-tag"></i>
  ElementUI
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Vant/" class="nav-link"><i class="iconfont reco-tag"></i>
  Vant
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Bootstrap/" class="nav-link"><i class="iconfont reco-tag"></i>
  Bootstrap
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      后端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/" class="nav-link"><i class="iconfont reco-tag"></i>
  Node
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/koa/" class="nav-link"><i class="iconfont reco-tag"></i>
  Koa
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/express/" class="nav-link"><i class="iconfont reco-tag"></i>
  EXpress
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/database/mysql/" class="nav-link"><i class="iconfont reco-tag"></i>
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/./timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>JS学习笔记</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">JS学习笔记</h1> <div data-v-f875f3fc><!----> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>12/12/2022</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>JS</span></i></div></div> <div class="theme-reco-content content__default"><p>邂逅 JavaScript</p> <h2 id="认识-javascript"><a href="#认识-javascript" class="header-anchor">#</a> 认识 JavaScript</h2> <ul><li>JS 是一种<font color="orange">高级的、解释型的</font>编程语言</li> <li>JS 是<font color="orange">一门基于原型、头等函数</font>的语言，是<font color="orange">一门多范式的语言</font>，它支持<font color="orange">面向对象程序设计，指令式编程，以及函数式编程</font>；</li></ul> <h3 id="javascript-由谁来运行"><a href="#javascript-由谁来运行" class="header-anchor">#</a> JavaScript 由谁来运行</h3> <ul><li><p><strong>不同的浏览器有不同的内核组成</strong></p> <ul><li><font color="orange">Gecko </font> 早期被 Netscape 和 Mozilla Firefox 浏览器浏览器使用；</li> <li><font color="orange">Trident</font> 微软开发，被 IE4~IE11 浏览器使用，但是 Edge 浏览器已经转向 Blink；</li> <li><font color="orange">Webkit</font> 苹果基于 KHTML 开发、开源的，用于 Safari，Google Chrome 之前也在使用；</li> <li><font color="orange">Blink</font> 是 Webkit 的一个分支，Google 开发，目前应用于 Google Chrome、Edge、Opera 等；</li></ul></li> <li><p>浏览器内核指的是浏览器的排版引擎</p> <ul><li><strong>排版引擎</strong> 也称为 <strong>浏览器引擎</strong> 、<strong>页面渲染引擎</strong> 或 <strong>样版引擎</strong></li></ul></li> <li><p><strong>那么，JS 代码由谁来执行？</strong></p> <ul><li>javaScript 引擎</li> <li>为什么需要 JavaScript 引擎呢？
<ul><li>前面说过，<font color="orange">高级的编程语言</font>都是需要转成<font color="orange">最终的机器指令来执行</font>的</li> <li>事实上我们编写的 JavaScript 无论你交给<font color="orange">浏览器或者 Node 执行</font>，最后都是需要被<font color="orange">CPU 执行</font>的；</li> <li>但是 CPU 只认识自己的指令集，实际上是机器语言，才能被 CPU 所执行</li> <li>所以我们需要<font color="orange">JavaScript 引擎</font>帮助我们将<font color="orange">JavaScript 代码</font>翻译成<font color="orange">CPU 指令</font>来执行；</li></ul></li> <li><strong>比较常见的 JavaScript 引擎有哪些呢？</strong> <ul><li><strong>SpiderMonkey</strong>：第一款 JavaScript 引擎，由 Brendan Eich 开发（也就是 JavaScript 作者）；</li> <li><strong>Chakra</strong>：微软开发，用于 IT 浏览器；</li> <li><strong>JavaScriptCore</strong>：WebKit 中的 JavaScript 引擎，Apple 公司开发</li> <li><strong>V8</strong>：Google 开发的强大 JavaScript 引擎，也帮助 Chrome 从众多浏览器中脱颖而出；</li></ul></li></ul></li></ul> <h3 id="浏览器内核-和-js-引擎的关系"><a href="#浏览器内核-和-js-引擎的关系" class="header-anchor">#</a> 浏览器内核 和 JS 引擎的关系</h3> <ul><li><strong>这里先以 webkit 为例， webkit 事实上由两部分组成的</strong> <ul><li><font color="orange">WebCore </font>： 负责 HTML 解析、布局、渲染等等相关工作</li> <li><font color="orange">JavaScript </font>: 解析、执行 JavaScript 代码</li></ul></li></ul> <h2 id="js-基础语法"><a href="#js-基础语法" class="header-anchor">#</a> JS 基础语法</h2> <h3 id="noscript-元素"><a href="#noscript-元素" class="header-anchor">#</a> noscript 元素</h3> <ul><li>如果运行的浏览器不支持 JavaScript，那么我们如何给用户更好提示呢？
<ul><li>针对早期浏览器不支持 JavaScript 的问题 ， 需要一个页面 优雅降级的处理方案</li> <li>最终 <font color="orange">noscript   元素</font>出现，被用于给不支持 JavaScript 的浏览器提供 替代内容</li></ul></li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>noscript</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>您的浏览器不支持或者关闭运行 JavaScript<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>noscript</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><img src="./images/JS/noscript.jpg"> <h3 id="javascript-编写的注意事项"><a href="#javascript-编写的注意事项" class="header-anchor">#</a> JavaScript 编写的注意事项</h3> <ul><li><p>注意一 ： <font color="orange">script 元素不能写成 单标签</font></p> <ul><li><p>在外联式引用 js 文件时，script 标签中不可以写 JavaScript 代码，并且 script 标签不能写成单标签；</p></li> <li><p>不能写成</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index.js<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li> <li><p>注意二: <strong>省略 type 属性</strong></p> <ul><li>在以前的代码中，<font color="orange">script 标签中会使用 type=“text/javascript”；</font></li> <li>现在可不写这个代码了，因为<font color="orange">JavaScript 是所有现代浏览器以及 HTML5 中的默认脚本语言</font>；</li></ul></li> <li><p>注意三: <strong>加载顺序</strong></p> <ul><li>作为 HTML 文档内容的一部分，JavaScript 默认遵循<font color="orange">HTML 文档的加载顺序，即自上而下的加载顺序</font>；</li> <li>推荐将 JavaScript 代码和<font color="orange">编写位置放在 body 子元素的最后一行</font>；</li></ul></li> <li><p>注意四 ： <strong>javascript 代码严格区分大小写</strong></p> <ul><li>HTML 元素和 CSS 属性不区分大小写 ， 但是在<font color="orange">JavaScript 中严格区分大小写</font></li></ul></li></ul> <h3 id="javascript-的-交互方式"><a href="#javascript-的-交互方式" class="header-anchor">#</a> javaScript 的 交互方式</h3> <table><thead><tr><th style="text-align:center;">交互方法</th> <th style="text-align:center;">方法说明</th> <th style="text-align:center;">效果查看</th></tr></thead> <tbody><tr><td style="text-align:center;">alert</td> <td style="text-align:center;">接受一个参数</td> <td style="text-align:center;">弹窗查看</td></tr> <tr><td style="text-align:center;">console.log</td> <td style="text-align:center;">接受多个参数</td> <td style="text-align:center;">在浏览器控制台查看</td></tr> <tr><td style="text-align:center;">document.write</td> <td style="text-align:center;">接受多个字符串</td> <td style="text-align:center;">在浏览器页面查看</td></tr> <tr><td style="text-align:center;">prompt</td> <td style="text-align:center;">接受一个参数</td> <td style="text-align:center;">在浏览器接受用户输入</td></tr></tbody></table> <h3 id="javascript-的-注释"><a href="#javascript-的-注释" class="header-anchor">#</a> JavaScript 的 注释</h3> <ul><li>单行注释</li> <li>多行注释</li> <li>文档注释 （VSCode 中需要在单独的 JavaScript 文件中编写才有效）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  单行注释</span>
<span class="token comment">/*  多行注释  */</span>

<span class="token comment">/**
 * 向某人打招呼
 * @param {string} name  姓名
 * @param {number} age  年龄
 */</span>

<span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="vscode-配置"><a href="#vscode-配置" class="header-anchor">#</a> vsCode 配置</h3> <p><font color="cornflowerblue">在 vsCode 中更好的查看 括号 的结束的位置</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">&quot;editor.bracketPairColorization.enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;editor.guides.bracketPairs&quot;</span><span class="token operator">:</span><span class="token string">&quot;active&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="js-变量和数据类型"><a href="#js-变量和数据类型" class="header-anchor">#</a> JS 变量和数据类型</h2> <h3 id="变量的使用注意"><a href="#变量的使用注意" class="header-anchor">#</a> 变量的使用注意</h3> <ul><li><p>注意一 ： 如果一个变量未声明 就直接使用 ， 那么会报错</p> <ul><li><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// message 没有定义，直接报错</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li> <li><p>注意二：如果一个变量有声明，但是没有赋值，那么默认值 undefined</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> info<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li> <li><p>注意三：如果没有使用 var 声明变量也可以，但是不推荐 （事实上会被添加到 window 对象上）</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code>admin <span class="token operator">=</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">;</span> <span class="token comment">// window下里值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>admin<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lys</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li></ul> <h3 id="javascript-的数据类型"><a href="#javascript-的数据类型" class="header-anchor">#</a> JavaScript 的数据类型</h3> <ul><li>JavaScript 中有 8 种基本数据类型 （7 种原始类型 和 1 种复杂类型）
<ul><li>Number</li> <li>String</li> <li>Boolean</li> <li>Undefined</li> <li>Null</li> <li>Object</li> <li>BigInt</li> <li>Symbol</li></ul></li></ul> <h3 id="typeof-操作符"><a href="#typeof-操作符" class="header-anchor">#</a> typeof 操作符</h3> <ul><li>typeof 操作符 就是为此而生</li></ul> <p><strong>对一个值使用 typeof 操作符会返回下列字符串之一</strong></p> <ul><li><p>undefined 表示值未定义</p></li> <li><p>boolean 表示值为布尔值</p></li> <li><p>string 表示值为字符串</p></li> <li><p>number 表示值为数值</p></li> <li><p>object 表示值为对象 （而不是函数） 或 null</p></li> <li><p>function 表示值为函数</p></li> <li><p>symbol 表示值为符号</p></li> <li><p><strong>typeof() 的用法</strong></p> <ul><li>你可能还会遇到另一种语法 ：<font color="orange">typeof(x) </font>, 它与<font color="orange"> typeof x 相同</font></li> <li>typeof 是一个<font color="orange">操作符，并非是一个函数</font>，<font color="orange">()只是将后续的内容当做一个整体而已</font></li></ul></li></ul> <h3 id="number-类型"><a href="#number-类型" class="header-anchor">#</a> Number 类型</h3> <p>number 类型代表整数和浮点数</p> <ul><li><font color="orange">Infinity </font>：代表数学概念种的 <font color="orange">无穷大</font> ，也可以表示 -Infinity</li> <li><font color="orange">NaN </font>: NaN 代表一个<font color="orange">计算错误</font> ，它是一个<font color="orange">错误的操作</font>所得到的结果；
<ul><li>比如 字符串和数字相乘</li></ul></li></ul> <p><strong>数字表示的范围</strong></p> <ul><li>最<font color="orange">小正数值： Number.MIN_VALUE</font>，这个值为： 5e-324，小于这个的数字会被转化为 0</li> <li>最<font color="orange">大正数值：Number.MAX_VALUE</font>，这个值为： 1.7976931348623157e+308</li></ul> <h3 id="字符串中的转义字符"><a href="#字符串中的转义字符" class="header-anchor">#</a> 字符串中的转义字符</h3> <img src="./images/JS/字符串种转义字符.jpg"> <h3 id="undefined-类型"><a href="#undefined-类型" class="header-anchor">#</a> Undefined 类型</h3> <ul><li>Undefined 类型只有一个值，就是特殊值 <strong>undefined</strong> <ul><li>如果我们<font color="orange">声明一个变量</font>，但是<font color="orange">没有对其进行初始化时</font>，它<font color="orange">默认就是 undefined</font></li></ul></li></ul> <h3 id="null-类型"><a href="#null-类型" class="header-anchor">#</a> Null 类型</h3> <ul><li><p>Null 类型同样只有一个值，特殊值 null</p> <ul><li><p>null 类型通常用来表示<font color="orange">一个对象为空</font>，所以通常我们在<font color="orange">给一个对象进行初始化</font>时，会<font color="orange">赋值为 null</font>；</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//object</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li></ul> <p><strong>null 和 undefined 的关系</strong></p> <ul><li>undefined 通常只有在一个变量声明但是<font color="orange">未初始化</font>时，它的默认值是 undefined 才会用到</li> <li>并且我们<font color="orange">不推荐直接给一个变量赋值为 undefined</font>，所以很少主动来使用；</li> <li><font color="orange">null 值非常常用</font>，当一个变量准备保存一个对象，但是<font color="orange">这个对象不确定时，我们可以先赋值为 null</font></li></ul> <h3 id="字符串的-string-的转换"><a href="#字符串的-string-的转换" class="header-anchor">#</a> 字符串的 String 的转换</h3> <ul><li><strong>转换方式一：隐式转换</strong> <ul><li><font color="orange">一个字符串和另一个字符串进行+操作；</font></li></ul></li> <li><strong>转换方式二：显式转换</strong></li> <li><font color="orange">调用 String() 函数</font></li> <li><font color="orange">调用 toString() 方法</font></li></ul> <h3 id="数字类型-number-的转换"><a href="#数字类型-number-的转换" class="header-anchor">#</a> 数字类型 Number 的转换</h3> <ul><li><strong>转换方式一：隐式转换</strong> <ul><li>在算数运算中，通常会将其他类型转换成数字类型来进行运算；</li> <li>比如 &quot;6&quot; / &quot;2&quot;；</li></ul></li> <li><strong>转换方式二：显式转换</strong> <ul><li>我们也可以<font color="orange">使用 Number()函数</font>来进行显式的转换</li></ul></li> <li><strong>其他类型转换数字的规则</strong>：</li></ul> <img src="./images/JS/其他类型转换数字的规则.jpg"> <h3 id="布尔类型-boolean-的转换"><a href="#布尔类型-boolean-的转换" class="header-anchor">#</a> 布尔类型 Boolean 的转换</h3> <ul><li>可以通过调用 <font color="orange">Boolean(value) 显式地进行转换</font>。</li> <li><strong>转换规则如下</strong>：
<ul><li>直观上为“空”的值（如 <font color="orange">0、空字符串、null、undefined 和 NaN</font>）将变为 <strong><font color="orange">false</font></strong>。</li> <li><font color="orange">其他值变成 true</font>。</li></ul></li></ul> <h2 id="js-基础运算符"><a href="#js-基础运算符" class="header-anchor">#</a> JS 基础运算符</h2> <h3 id="算术运算符"><a href="#算术运算符" class="header-anchor">#</a> 算术运算符</h3> <ul><li>算术运算符用在数学表达式中, 它的使用方式和数学中也是一直的</li> <li>算术运算符是对数据进行计算的符号</li></ul> <img src="./images/JS/算术运算符.jpg"> <h3 id="和-区别"><a href="#和-区别" class="header-anchor">#</a> === 和 == 区别</h3> <ul><li>普通的想等性检查 == 存在一个问题，它不能区分出 0 和 false ， 或者空字符和 false 这类运算
<ul><li>这是因为在<font color="orange">比较不同类型的值时，处于判断符号 == 两侧的值会先被转化为数字</font></li> <li><font color="orange">空字符串和 false 也是如此，转化后它们都为数字 0</font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">false</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p><strong>如果我们需要区分 0 和 false，该怎么办？</strong></p> <ul><li><font color="orange"> 严格相等运算符 ===</font> 在进行比较时不会做任何的类型转换；</li> <li>换句话说，如果<font color="orange"> a 和 b 属于不同的数据类型</font>，那么 a === b <font color="orange">不会做任何的类型转换而立刻返回 false</font></li></ul></li> <li><p><strong>同样的，“不相等”符号 != 类似，“严格不相等”表示为 !==</strong></p></li></ul> <h2 id="js-分支语句"><a href="#js-分支语句" class="header-anchor">#</a> JS 分支语句</h2> <h3 id="代码块的理解"><a href="#代码块的理解" class="header-anchor">#</a> 代码块的理解</h3> <ul><li><font color="orange">代码块  </font>是多行执行代码的集合，通过一个<font color="orange">花括号{}</font>放到了一起
<ul><li><strong>在开发中，一行代码很难完成某一个特定的功能，我们就会将这些代码放到一个<font color="orange">代码块</font>中</strong></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="if-语句的细节补充"><a href="#if-语句的细节补充" class="header-anchor">#</a> if 语句的细节补充</h3> <ul><li><strong>补充一</strong> ： <font color="orange">如果代码块种只有一行代码，那么{}可以省略</font></li> <li><strong>补充二</strong>：<font color="orange">if (…) 语句会计算圆括号内的表达式，并将计算结果转换为布尔型（Boolean）</font> <ul><li>转换规则和 Boolean 函数的规则一致；</li> <li><font color="orange">数字 0、空字符串 “”、null、undefined 和 NaN</font> 都会被转换成<font color="orange"> false</font>，被称为“假值</li> <li><font color="orange">其他值</font>被转换为 <font color="orange">true</font>，所以它们被称为 <font color="orange">真值</font></li></ul></li></ul> <h3 id="三元运算符"><a href="#三元运算符" class="header-anchor">#</a> 三元运算符</h3> <ul><li><p>条件运算符：’?’</p> <ul><li>这个运算符通过<font color="orange">问号 ? </font>表示</li> <li>有时它被称为<font color="orange">三元运算符</font>，被称为“三元”是因为该运算符中有<font color="orange">三个操作数（运算元）</font>；</li> <li>实际上它是 JavaScript 中唯一一个有这么多操作数的运算符；</li></ul></li> <li><p>使用格式如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> condition <span class="token operator">?</span> value1 <span class="token operator">:</span> value2<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>计算条件结果，如果<font color="cornflowerblue">结果为真，则返回 value1，否则返回 value2</font>。</p></li></ul> <h3 id="逻辑运算符"><a href="#逻辑运算符" class="header-anchor">#</a> <strong>逻辑运算符</strong></h3> <ul><li>逻辑运算符，主要是由三个：</li> <li><font color="orange"> ||（或），&amp;&amp;（与），!（非）</font></li></ul> <img src="./images/JS/逻辑运算符.jpg"> <p><font color="red"><strong>逻辑或的本质</strong></font></p> <ul><li><strong>||（或）两个竖线符号表示“或”运算符（也称为短路或）</strong></li> <li><font color="orange">从左到右</font>依次计算操作数。 处理<font color="orange">每一个操作数时</font>，都将其<font color="orange">转化为布尔值</font>（Boolean）；</li> <li>如果结果是 <font color="orange">true，就停止计算</font>，<font color="orange">返回这个操作数的初始值</font></li> <li>如果<font color="orange">所有的操作数都被计算过</font>（也就是，转换结果都是 false），则<font color="orange">返回最后一个操作数</font></li></ul> <p>换句话说，<strong>一个或运算 || 的链，将返回第一个真值，如果不存在真值，就返回该链的最后一个值</strong></p> <p><font color="red"><strong>逻辑与的本质</strong></font></p> <ul><li><strong>&amp;&amp;（或）两个竖线符号表示“与”运算符（也称为短路与）</strong> <ul><li><font color="orange">从左到右</font>依次计算操作数</li> <li>在处理<font color="orange">每一个操作数时</font>，都将其转化为<font color="orange">布尔值</font>（Boolean）；</li> <li>如果结果是 <font color="orange">false</font>，就<font color="orange">停止</font>计算，并<font color="orange">返回这个操作数的初始值（一般不需要获取到初始值）</font>；</li> <li>如果<font color="orange">所有的操作数都被计算过</font>（例如都是真值），则<font color="orange">返回最后一个操作数</font>。</li></ul></li></ul> <p>换句话说，<strong>与运算 返回第一个假值，如果没有假值就返回最后一个值</strong></p> <h3 id="非"><a href="#非" class="header-anchor">#</a> <strong>! (非)</strong></h3> <ul><li>逻辑非运算符接受一个参数，并按如下运算：
<ul><li>步骤一：将<font color="orange">操作数转化为布尔类型</font>：true/false；</li> <li>步骤二：<font color="orange">返回相反的值</font></li></ul></li> <li><strong>两个非运算 !! 有时候用来将某个值转化为布尔类型</strong>：
<ul><li>也就是，第一个<font color="orange">非运算将该值转化为布尔类型并取反，第二个非运算再次取反</font></li> <li>最后我们就得到了<font color="orange">一个任意值到布尔值的转化</font>。</li></ul></li></ul> <h3 id="switch-语句"><a href="#switch-语句" class="header-anchor">#</a> switch 语句</h3> <ul><li><p><strong>switch 是分支结构的一种语句</strong>：</p> <ul><li>它是通过判断<font color="orange">表达式的结果（或者变量）</font>是否等于<font color="orange">case 语句的常量</font>，来执行相应的分支体的；</li></ul></li> <li><p>与 if 语句不同的是，switch 语句<font color="orange">只能做值的相等判断</font>（<font color="orange">使用全等运算符 ===</font>），而<font color="orange">if 语句可以做值的范围判断</font>；</p></li> <li><p>switch 的语句</p> <ul><li><p>switch 语句有至少一个 case 代码块 和 一个可选的 default 代码块。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>变量<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">case</span> 常量<span class="token number">1</span>：
        <span class="token keyword">break</span>
     <span class="token keyword">case</span> 常量<span class="token number">2</span>：
       	<span class="token keyword">break</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>注意事项：这里的<font color="orange">相等是严格相等</font>。</p> <ul><li>被比较的<font color="orange">值必须是相同的类型才能进行匹配</font>。</li></ul></li></ul></li></ul> <h3 id="while-循环"><a href="#while-循环" class="header-anchor">#</a> while 循环</h3> <ul><li>while 循环的语法如下
<ul><li>当<font color="orange">条件成立</font>时，<font color="orange">执行代码块</font>；</li> <li>当<font color="orange">条件不成立</font>时，<font color="orange">跳出代码块</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  i<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="do-while-循环"><a href="#do-while-循环" class="header-anchor">#</a> do .. while 循环</h3> <ul><li>do .. while 循环 和 while 循环非常像， 二者经常可以相互替代
<ul><li>但是 do .. while 的特点是<font color="orange">不管条件成不成立，do 循环体都会执行一次</font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">do</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;do&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 也会打印一次 do</span>
<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="for-循环"><a href="#for-循环" class="header-anchor">#</a> for 循环</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>begin<span class="token punctuation">;</span> condition<span class="token punctuation">;</span> step<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 循环代码块</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong><font color="cornflowerblue">执行过程</font></strong></p> <img src="./images/JS/for循环的流程.jpg"> <p><strong>循环的跳转控制</strong></p> <ul><li><font color="orange">break </font>： <strong>直接跳出循环 ，循环结束</strong> <ul><li>break 某一条件满足时，退出循环，<font color="cornflowerblue">不再执行后续重复的代码</font></li></ul></li> <li><font color="orange">continue</font> ：<strong>跳出本次循环次，执行下一次循环体</strong> <ul><li>continue 指令是 break 的 轻量版</li> <li>continue 某一条件满足时，<strong>不执行后续重复代码</strong>，<font color="cornflowerblue">执行下一轮的循环体</font></li></ul></li></ul> <h2 id="js-函数"><a href="#js-函数" class="header-anchor">#</a> JS 函数</h2> <h3 id="函数的-声明-和-调用"><a href="#函数的-声明-和-调用" class="header-anchor">#</a> 函数的 声明 和 调用</h3> <ul><li>声明函数使用 function 关键字：这种写法称之为函数的定义</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">函数名</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  函数封装的代码<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="函数的参数"><a href="#函数的参数" class="header-anchor">#</a> 函数的参数</h3> <ul><li><strong>函数</strong> <ul><li><font color="orange">函数</font> ， 把<font color="orange">具有独立功能的代码块</font>组织为一个小模块，在需要的时候 <strong>调用</strong></li></ul></li> <li><strong>形参和实参</strong> <ul><li><strong>形参</strong>（参数 parameter）：<strong>定义 函数时</strong>，<font color="orange">小括号中的参数</font>，是用<font color="orange">来接收参数用的，在函数内部 作为变量使用</font></li> <li><strong>实参</strong>（参数 argument）：<strong>调用 函数时</strong>，小括号中的参数，是<font color="orange">用来把数据传递到 函数内部 用的</font></li></ul></li></ul> <h3 id="函数的返回值"><a href="#函数的返回值" class="header-anchor">#</a> 函数的返回值</h3> <ul><li><font color="cornflowerblue">函数不仅仅可以有参数, 也可以有返回值</font> <ul><li>使用 <font color="orange">return 关键字</font>来返回结果</li> <li>一旦在函数中<font color="orange">执行 return 操作</font>，那么<font color="orange">当前函数会终止</font>；</li> <li>如果函数中<font color="orange">没有使用 return 语句，或者使用了后面没有 return 值</font> ，那么函数<font color="orange">默认的返回值：<strong>undefined</strong></font>；</li></ul></li></ul> <h3 id="arguments-参数"><a href="#arguments-参数" class="header-anchor">#</a> arguments 参数</h3> <ul><li><strong>事实上在函数有一个特别的对象：arguments 对象</strong> <ul><li>默认情况下，<font color="orange">arguments 对象</font>是所有（非箭头）函数中都可用的<font color="orange">局部变量</font></li> <li>该对象中存放着所有的<font color="orange">调用者传入的参数，从 0 位置开始，依次存放</font>；</li> <li>arguments 变量的类型是<font color="orange">一个 object 类型（ array-like ），不是一个数组</font>，但是和数组的用法看起来很相似</li> <li>如果<font color="orange">调用者传入的参数多余函数接收的参数</font>，可以<font color="orange">通过 arguments 去获取所有的参数</font>；</li></ul></li></ul> <h3 id="函数的递归"><a href="#函数的递归" class="header-anchor">#</a> 函数的递归</h3> <ul><li><strong>事实上，函数调用自己还有一个专业的名词，叫做递归</strong></li> <li>在语言学方面，我们也可以描述为递归：
<ul><li>从前有座山，山里有座庙，庙里有个老和尚，正在给小和尚讲故事呢！故事是什么呢？</li></ul></li> <li><strong>递归是一种重要的编程思想：</strong> <ul><li><font color="orange">将一个复杂的任务，转化成可以重复执行的相同任务</font></li></ul></li></ul> <p>例如 如下代码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fucntion <span class="token function">pow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 自己调用自己函数，满足一定条件 返回一个值</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">===</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x
    <span class="token keyword">return</span> x <span class="token operator">*</span> <span class="token function">pow</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="局部变量-和-外部变量"><a href="#局部变量-和-外部变量" class="header-anchor">#</a> 局部变量 和 外部变量</h3> <ul><li>在 JavaScript（ES5 之前）中没有块级作用域的概念，但是函数可以定义自己的作用域。</li> <li><font color="orange">作用域（Scope）</font>表示<font color="orange">一些标识符的作用有效范围</font>（所以也有被翻译为有效范围的）；</li> <li><font color="orange">函数的作用域</font>表示<font color="orange">在函数内部定义的变量，只有在函数内部可以被访问到</font>；</li> <li><strong>外部变量和局部变量的概念</strong>：
<ul><li>定义在函数内部的变量，被称之为<font color="orange">局部变量</font></li> <li>定义在函数外部的变量，被称之为<font color="orange">外部变量</font></li></ul></li> <li><strong>什么是全局变量？</strong> <ul><li>在函数之外声明的变量（在 script 中声明的），称之为<font color="orange">全局变量</font></li> <li>全局变量<font color="orange">在任何函数中都是可见</font>的。</li> <li>通过<font color="orange">var 声明的全局变量会在 window 对象</font>上添加一个属性（了解）；</li></ul></li> <li>在函数中，访问变量的顺序是什么呢？
<ul><li><font color="orange">优先访问自己函数中的变量，没有找到时，在外部中访问</font></li></ul></li></ul> <h3 id="函数表达式"><a href="#函数表达式" class="header-anchor">#</a> 函数表达式</h3> <p><font color="orange">前面定义函数的方式，我们称之为函数的声明</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;foo函数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="回调函数"><a href="#回调函数" class="header-anchor">#</a> 回调函数</h3> <p><font color="orange">函数可以作为一个值互相赋值，那么也可以传递给另外一个函数</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是bar函数被调用&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="立即执行函数"><a href="#立即执行函数" class="header-anchor">#</a> 立即执行函数</h3> <p>表达的含义是<font color="orange"> 一个函数定义完后被立即执行</font></p> <ul><li>第一部分是定义了一个匿名函数，这个函数有自己独立的作用域。</li> <li>第二部分是后面的（），表示这个函数被执行了</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;立即执行函数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>这个东西有什么用？
<ul><li>会创建一个独立的执行上下文环境，可以避免外界访问或修改内部的变量，也避免了对内部变量的修改</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> btns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    btns<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>m<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">个按钮被点击</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="js-代码风格"><a href="#js-代码风格" class="header-anchor">#</a> JS 代码风格</h2> <img src="./images/JS/代码风格.jpg"> <h2 id="js-面向对象"><a href="#js-面向对象" class="header-anchor">#</a> JS 面向对象</h2> <h3 id="对象的常见操作"><a href="#对象的常见操作" class="header-anchor">#</a> 对象的常见操作</h3> <ul><li><p><strong><font color="orange">访问对象的属性</font></strong></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li> <li><p><strong><font color="orange">修改对象的属性</font></strong></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code>info<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p><strong><font color="orange">添加对象的属性</font></strong></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code>info<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">1.98</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p><strong><font color="orange">删除对象的属性 ： delete 操作符</font></strong></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">delete</span> info<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h3 id="方括号-和-引用的使用"><a href="#方括号-和-引用的使用" class="header-anchor">#</a> 方括号 和 引用的使用</h3> <ul><li>为什么需要使用方括号呢？
<ul><li>因为<font color="orange">点符号要求 key 是有效的变量标识符</font></li> <li><font color="orange">方括号运行我们在定义或者操作属性时更加的灵活</font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="对象的遍历"><a href="#对象的遍历" class="header-anchor">#</a> 对象的遍历</h3> <ul><li><p><strong>对象的遍历（迭代）：表示获取对象中所有的属性和方法</strong></p> <ul><li><font color="orange"><strong>Object.keys()</strong></font>方法会返回一个由一个给定对象的自身可枚举属性组成的数组；</li></ul></li> <li><p><strong>遍历方式一 ： 普通 for 循环</strong></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> objKey <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> objKey<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">key的值 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>objKey<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> value的值  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>obj<span class="token punctuation">[</span>objKey<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li> <li><p><strong>遍历方式二：for in 遍历方法</strong></p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">key的值 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> value的值  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h3 id="栈内存-和-堆内存"><a href="#栈内存-和-堆内存" class="header-anchor">#</a> 栈内存 和 堆内存</h3> <ul><li><strong>我们知道程序是需要加载到内存中来执行的，我们可以将内存划分为两个区域</strong>：<font color="orange">栈内存和堆内存</font> <ul><li><font color="orange">原始类型</font>占据的空间是在<font color="orange">栈内存</font>中分配的；</li> <li><font color="orange">对象类型</font>占据的空间是在<font color="orange">堆内存</font>中分配的</li></ul></li></ul> <img src="./images/JS/栈内存和堆内存.jpg"> <img src="./images/JS/值类型和引用类型.png"> <img src="./images/JS/对象的引用赋值内存图.png"> <img src="./images/JS/函数传递-引用传递-创建新对象.png"> <img src="./images/JS/两个对象比较的内存图.png"> <h3 id="this-指向-什么"><a href="#this-指向-什么" class="header-anchor">#</a> this 指向 什么</h3> <ul><li><p><font color="orange"><strong>全局环境</strong></font> , this 指向 <font color="orange">window</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li> <li><p>通过<font color="orange"><strong>对象调用</strong></font>，this 指向<font color="orange">调用的对象</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;obj&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">foo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj 对象</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></li></ul> <h3 id="类和对象的思维方式"><a href="#类和对象的思维方式" class="header-anchor">#</a> 类和对象的思维方式</h3> <ul><li><p>例子</p> <ul><li>游戏中创建<font color="cornflowerblue">一系列的英雄</font>（英雄具备的特性是相似的，比如都有名字、技能、价格，但是具体的值又不相同）</li> <li>学生系统中创建<font color="cornflowerblue">一系列的学生</font>（学生都有学号、姓名、年龄等，但是具体的值又不相同）</li></ul></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p3 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;王五&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>这种方式有一个很大的弊端：<font color="orange">创建同样的对象时，需要编写重复的代码</font>；</li></ul></li></ul> <p><strong>创建对象的方案 - 工厂函数</strong></p> <ul><li>我们可以<font color="orange">封装一个函数</font>，这个函数用于帮助我们<font color="orange">创建一个对象</font>，我们只需要重复调用这个函数即可；</li> <li><font color="orange">工厂模式其实是一种常见的设计模式</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  p<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  p<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  p<span class="token punctuation">.</span><span class="token function-variable function">running</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;在跑步&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p3 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;王五&quot;</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>工厂方法创建对象有一个比较大的问题：<strong><font color="green">我们在打印对象时，对象的类型都是 Object 类型</font></strong></p> <h3 id="构造函数的认识和使用"><a href="#构造函数的认识和使用" class="header-anchor">#</a> 构造函数的认识和使用</h3> <ul><li><font color="orange">构造函数</font>也称之为<font color="orange">构造器（constructor）</font>，通常是我们在<font color="orange">创建对象时会调用的函数</font></li></ul> <p>在 JavaScript 中，<strong>构造函数其实就是类的扮演者</strong></p> <ul><li>比如<font color="orange">系统默认</font>给我们<font color="orange">提供的 Date 就是一个构造函数</font>，也可以看成是一个<font color="orange">类</font>；</li> <li>在 ES5 之前，我们都是通过 <font color="orange">function 来声明一个构造函数（类）</font>的，之后通过<font color="orange">new 关键字来对其进行调用</font>；</li> <li>在 ES6 之后，JavaScript 可以像别的语言一样，<font color="orange">通过 class 来声明一个类</font>；</li></ul> <p><strong>ES5 中构造函数</strong></p> <ul><li>构造函数也是一个<font color="orange">普通的函数</font>，从表现形式来说，和<font color="orange">千千万万个普通的函数</font>没有任何区别；</li> <li>那么如果这么一个<font color="orange">普通的函数被使用 new 操作符</font>来调用了，那么<font color="orange">这个函数就称之为是一个构造函数</font>；</li></ul> <p><strong>如果一个函数被使用 new 操作符调用了，那么它会执行如下操作</strong></p> <ol><li><font color="orange">在内存中创建一个新的空对象</font></li> <li><font color="orange">这个对象内部的[ [ prototype ] ] 属性 会被赋值 为构造函数 的 prototype 属性</font></li> <li><font color="orange">构造函数内部的 this，会指向创建出来的新对象</font></li> <li><font color="orange">执行的函数内部代码 （函数体代码）</font></li> <li><font color="orange">如果构造函数没有返回非空对象，则返回创建出来的新对象</font></li></ol> <p><strong>创建对象的方案 - 构造函数 （类）</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">CreatePerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">running</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;在跑步&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreatePerson</span><span class="token punctuation">(</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>和之前的工厂函数实现的，这个<font color="orange">构造函数可以确保我们的对象是有 Person 的类型的</font></p> <h2 id="js-内置类"><a href="#js-内置类" class="header-anchor">#</a> JS 内置类</h2> <h3 id="原始类型的包装类"><a href="#原始类型的包装类" class="header-anchor">#</a> 原始类型的包装类</h3> <ul><li><p>JavaScript 的原始类型<font color="orange">并非对象类型</font>，所以从理论上来说，它们是<font color="orange">没有办法获取属性或者调用方法</font>的。</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;Hello Word&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  ['Hello', 'Word']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>那么，为什么会出现这样奇怪的现象呢？</li> <li>原始类型是<font color="orange">简单值</font>, 默认<font color="orange">并不能调用属性和方法</font></li> <li>这是因为 JavaScript 为了可以<font color="orange">使其可以获取属性和调用方法，对其封装了对应的包装类型</font>；</li></ul></li> <li><p>常见的包装类型有 : <font color="orange">String    Number     Boolean    Symbol    BigInt</font></p></li></ul> <p><strong>包装类型的使用过程</strong></p> <ul><li><p>默认情况，当我们<font color="orange">调用一个原始类型的属性或者方法</font>时</p> <ul><li>根据<font color="orange">原始值 , 创建一个原始类型对应的包装类型对象</font></li> <li><font color="orange">调用对应的属性或者方法, 返回一个新的值</font></li> <li><font color="orange">创建的包装类对象被销毁</font></li> <li>通常 JavaScript<font color="orange">引擎会进行很多的优化，它可以跳过创建包装类的过程在内部直接完成属性的获取或者方法的调用。</font></li></ul> <p>注意事项：<font color="cornflowerblue">null、undefined 没有任何的方法，也没有对应的“对象包装类</font>”；</p></li></ul> <h3 id="number-类的补充"><a href="#number-类的补充" class="header-anchor">#</a> Number 类的补充</h3> <ul><li>前面我们已经学习了 Number 类型，它有一个对应的数字<font color="orange">包装类型 Number</font>，我们来对它的方法做一些补充。</li> <li><strong>Number 属性补充</strong> <ul><li>Number.MAX_SAFE_INTEGER ：JavaScript 中最大的安全整数 (2^53 - 1)；</li> <li>Number.MIN_SAFE_INTEGER : JavaScript 中最小的安全整数 -(2^53 - 1)</li></ul></li> <li><strong>Number 实例方法补充</strong> <ul><li>方法一 : <font color="orange"> toString(base) </font> 将数字<strong>转成字符串</strong>,并且按照 base 进行转化</li> <li>方法二 : <font color="orange">toFixed(digits)</font> <strong>格式化一个数字</strong>, 保留 digits 位小数 , <strong>进行四舍五入</strong></li></ul></li> <li><strong>Number 类方法的补充</strong> <ul><li>方法一 : <font color="orange">Number.parseInt(string)</font> 将<strong>字符串解析成整数</strong>，也有对应的全局方法 parseInt；</li> <li>方法二 : <font color="orange">Number.parseFloat(string)</font> 将<strong>字符串解析成浮点数</strong>, 也有对应的全局方法 parseFloat</li></ul></li></ul> <h3 id="math-对象"><a href="#math-对象" class="header-anchor">#</a> Math 对象</h3> <ul><li><strong>在除了 Number 类可以对数字进行处理之外，JavaScript 还提供了一个 <font color="orange">Math 对象</font></strong>。
<ul><li>Math 是一个<font color="orange">内置对象</font> (不是一个构造函数)，它<font color="orange">拥有一些数学常数属性和数学函数方法</font></li></ul></li> <li><strong>Math 常见的属性</strong> <ul><li>Math.PI 圆周率 约等于 3.14159</li></ul></li> <li><strong>Math 常见的方法</strong> <ul><li><font color="orange">Math.floor </font> 向下舍入取整</li> <li><font color="orange">Math.ceil</font> 向上舍入取整 , 会<strong>使用四舍五入</strong></li> <li><font color="orange">Math.round</font> 四舍五入取整</li> <li><font color="orange">Math.random</font> 生成 0 ~ 1 的随机数, ( 包含 0 , 不包含 1 )</li> <li><font color="orange">Math.pow ( x, y )</font> 返回 x 的 y 次幂</li></ul></li></ul> <h3 id="string-类-的补充"><a href="#string-类-的补充" class="header-anchor">#</a> String 类 的补充</h3> <p>在开发中，我们经常需要对字符串进行各种各样的操作，String 类提供给了我们对应的属性和方法。</p> <ul><li><p><strong>String 常见的属性</strong></p> <ul><li><font color="orange">length </font> : 获取字符串的长度</li></ul></li> <li><p><strong>访问字符串的字符</strong></p> <ul><li><font color="orange">通过字符串的索引 str[0] </font> , 没有找到 , 就会放回 undefined</li> <li><font color="orange">通过 str.charAt(0)</font> , 没有找到 , 就会返回 空字符串</li></ul> <p>注意 : 可以通过 for .. of 进行遍历</p></li> <li><p><strong>字符串的不可变性</strong></p> <ul><li><p>字符串在定义后是<font color="orange">不可以修改</font>的，所以下面的操作是没有任何意义的；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;2.556&quot;</span><span class="token punctuation">;</span>
str<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2.556</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li> <li><p><strong>字符串的字母的大小的方法改变</strong></p> <ul><li><font color="orange">toLowerCase()</font> : 将所有的字符转为小写</li> <li><font color="orange">toUpperCase() </font> : 将所有的字符转换小写</li></ul></li> <li><p><strong>查找字符串位置</strong> <strong>和 是否包含</strong></p> <ul><li><font color="orange">indexof()</font> <ul><li>如果没有找到，那么返回-1； 查到了, 返回对应位置的索引</li></ul></li> <li><font color="orange">includes()</font> <ul><li>查找内容 是否包含字符串 (ES6 新增的方法) , 根据情况返回 true 和 false</li></ul></li></ul></li> <li><p><strong>判断字符串的开头和结尾 内容是否相同</strong></p> <ul><li><p><font color="orange">startsWith</font></p> <ul><li><p>判断字符串开头 是否相同</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;123aBc&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li> <li><p><font color="orange">endsWith </font></p> <ul><li><p>判断字符串结尾 是否相同</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;123aBc&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li> <li><p><font color="orange">replace</font></p> <ul><li><p>替换字符串</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;123aBc&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;888&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 888aBc</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123aBc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul></li></ul> <h4 id="获取子字符串"><a href="#获取子字符串" class="header-anchor">#</a> 获取子字符串</h4> <table><thead><tr><th>slice(start,end)</th> <th>从 start 到 end （不含 end）</th> <th>允许</th></tr></thead> <tbody><tr><td><strong>substring(start,end)</strong></td> <td><strong>从 start 到 end (不含 end)</strong></td> <td><strong>负值代表为 0</strong></td></tr> <tr><td><strong>substr(start,length)</strong></td> <td><strong>从 start 开始获取长为 length 的字符串</strong></td> <td><strong>允许 start 为负数</strong></td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>开发中推荐使用 slice 方法</strong></p> <h4 id="string-类的补充的其他方法"><a href="#string-类的补充的其他方法" class="header-anchor">#</a> String 类的补充的其他方法</h4> <p><font color="red"><strong>拼接字符串</strong></font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token string">&quot;456&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><font color="red"><strong>删除首尾的空格</strong></font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;   lys    &quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lys</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><font color="red"><strong>字符串的分割</strong></font></p> <ul><li>第一个值 ： 以什么字符串进行分割，也可以是一个正则表达式；</li> <li>第二个值： 限制返回片段的数量</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;1*2*3*999*1&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['1', '2', '3', '999', '1']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['1', '2', '3']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="数组认识和使用"><a href="#数组认识和使用" class="header-anchor">#</a> 数组认识和使用</h3> <p><strong>什么是数组？</strong></p> <p>对象允许存储键值集合，但是在某些情况下使用键值对来访问并不方便， 这个有序的集合，我们可以通过索引来获取到它；<font color="orange">数组和对象都是一种保存多个数据的数据结构</font>；</p> <p><strong>数组的创建方式</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cba&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>访问数组中的元素</strong></p> <ul><li><p>通过中括号[]访问 ，<font color="orange"> 从 0 开始编号（索引 index）</font></p></li> <li><p>arr.at(i)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// c</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// c</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <p>区别： ✓ 如果 i &gt;= 0，则与 arr[i] 完全相同 。 对于 i <font color="orange">为负数的情况，arr.at（ -i ） 则 从数组的尾部向前数</font>。</p> <h4 id="数组的方法"><a href="#数组的方法" class="header-anchor">#</a> 数组的方法</h4> <p><strong>在数据的<font color="orange">尾端</font> <font color="orange">添加 </font>或 <font color="orange">删除元素</font>font&gt;</strong></p> <ul><li><p><font color="orange">push</font> ( 添加 ) 在 <strong>数组尾部添加元素</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'b', 'c', 'd']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><font color="orange">pop</font>（删除） <strong>数组尾部删除元素</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// c</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;a&quot;,&quot;b&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <p><strong>在数组的<font color="orange">首端添加或删除元素  </font></strong></p> <ul><li><p><font color="orange">shift </font> <strong>删除数组首端 一个元素</strong> ， 整个数组元素向前 前移动</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;b&quot;,&quot;c&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><font color="orange">unshift</font> <strong>在数组的首端添加元素</strong>，整个其他数组元素向后 移动</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['0', 'a', 'b', 'c']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <p>注意 ：<font color="orange"> push / pop 方法在运行的比较快，而 shift / unshift 比较慢</font></p> <p><font color="red"><strong>splice 方法</strong></font></p> <ul><li><strong>array.splice 方法</strong> 可以说是处理数组的利器，它可以做所有事情：<font color="orange">添加，删除和替换元素</font> <ul><li>语法 ： array.splice( start , [ deleteCount ] ,[ item1... ] )</li></ul></li> <li>第一个值 ：开始的位置，处理数组中元素</li> <li>第二个值 ：要删除元素的个数，如果为 0 或者负数表示不删除</li> <li>第三个值 ： 在添加 或 替换的 元素</li></ul> <p>删除数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;b&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'c']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>添加数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// []</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  ['a', 'b', 'c', 'd', 'e']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>替换数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;c&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'b', '1', '2']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong><font color="orange">注意 ： 这个方法会修改原数组</font></strong></p> <p><strong>length 属性</strong></p> <ul><li><p>用于获取数组的长度，当我们<font color="orange">修改数组</font>的时候，<font color="orange">length 属性会自动更新</font></p></li> <li><p>length 属性的另一个有意思的点是它是可写的。</p> <ul><li>如果我们<font color="orange">手动增加一个大于默认 length 的数值，那么会增加数组的长度</font>。</li> <li>但是如果我们<font color="orange">减少它，数组就会被截断</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr3<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'b', 'c', empty × 7]</span>

arr3<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [a]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>所以，<font color="cornflowerblue">清空数组最简单的方法就是：arr.length = 0 </font></p></li></ul> <p><strong>数组的遍历</strong></p> <ul><li><p>普通 for 循环遍历</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>for .. in</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> index <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>for .. of 遍历 , 获取到每一个元素</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <p><font color="red"><strong>slice          cancat             join</strong></font></p> <p><strong>slice 方法</strong></p> <ul><li><p>用于对数组进行截取, ( 类似于字符串的 slice 方法 ) <font color="orange">包含开始元素，但是不包含结束元素</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;b&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'b', 'c']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <p><strong>concat 方法</strong></p> <ul><li><p>创建一个新数组，其中包含来自于其他数组和其他项的值, <font color="orange">进行多个数组合并</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'b', 'c', '1', '2']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'b', 'c']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li></ul> <p><strong>join 方法</strong></p> <ul><li><p><font color="orange">将一个数组的所有元素连接成一个字符串并返回这个字符串。</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a*b*c</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'b', 'c']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <h4 id="查找元素"><a href="#查找元素" class="header-anchor">#</a> 查找元素</h4> <p><strong>arr.indexOf 方法</strong></p> <ul><li><p><font color="cornflowerblue">查找 某个 元素的索引</font></p></li> <li><p>从 fromIndex 开始查找，如果找到返回对应的索引，没有找到返回-1；</p></li> <li><p>也有对应的从最后位置开始查找的 lastIndexOf 方法</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <p><strong>arr.includes 方法</strong></p> <ul><li><p><font color="cornflowerblue">判断数组是否包含某个元素</font></p></li> <li><p>从索引 开始搜索 item，如果<font color="cornflowerblue">找到则返回 true</font>（<font color="cornflowerblue">如果没找到，则返回 false</font>）。</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <p><strong>find 和 findIndex 方法</strong></p> <ul><li><p><font color="cornflowerblue">直接查找元素或者元素的索引</font></p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// find  找到元素 进行返回该元素</span>
  <span class="token keyword">return</span> item <span class="token operator">==</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// b</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// findIndex 找到元素 , 返回该元素的索引</span>
  <span class="token keyword">return</span> item <span class="token operator">==</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h4 id="数组的排序"><a href="#数组的排序" class="header-anchor">#</a> 数组的排序</h4> <p><strong>数组的排序 sort / reverse</strong></p> <ul><li><p><font color="orange">sort () 方法 </font> <font color="cornflowerblue">也是一个高阶函数，用于对数组进行排序，并且生成一个排序后的新数组</font></p> <ul><li><p>如果 compareFunction(a, b) 小于 0 ，那么 a 会被排列到 b 前面</p></li> <li><p>如果 compareFunction(a, b) 等于 0 ， a 和 b 的相对位置不变；</p></li> <li><p>如果 compareFunction(a, b) 大于 0 ， b 会被排列到 a 前面</p></li> <li><p>也就是说，谁小谁排在前面；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item1<span class="token punctuation">,</span> item2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item1 <span class="token operator">-</span> item2<span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 4, 8]</span>
  <span class="token keyword">return</span> item2 <span class="token operator">-</span> item1<span class="token punctuation">;</span> <span class="token comment">// [8, 4, 4, 3, 2, 1]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 4, 8]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li> <li><p><font color="orange">reverse () 方法 </font> <font color="cornflowerblue">将数组中元素的位置颠倒，并返回该数组。</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 4, 1, 8, 2, 4]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 4, 1, 8, 2, 4]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <h2 id="js-dom"><a href="#js-dom" class="header-anchor">#</a> JS DOM</h2> <ul><li><p>DOM : <strong>文档对象模型</strong></p> <ul><li>简称 <font color="orange">DOM</font>，将<font color="orange">页面所有的内容表示为可以修改的对象</font>；</li></ul></li> <li><p>整个文档被抽象到 document 对象中</p> <ul><li><p>比如 <font color="cornflowerblue">document.documentElement</font> 对应的是<font color="cornflowerblue"> html 元素</font></p></li> <li><p>比如 <font color="cornflowerblue">document.body</font> 对应的是 <font color="cornflowerblue">body 元素</font></p></li> <li><p>比如 <font color="cornflowerblue">document.head</font> 对应的是 <font color="cornflowerblue">head 元素</font></p></li> <li><div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>&lt;!DOCTYPE html&gt; = document.doctype    // 文档声明
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h3 id="dom-tree-的理解"><a href="#dom-tree-的理解" class="header-anchor">#</a> DOM Tree 的理解</h3> <ul><li>一个页面不只是有 html、head、body 元素，也包括很多的子元素：
<ul><li>在 html 结构中，最终会形成一个<font color="orange">树结构</font></li> <li>在抽象成 DOM 对象的时候，它们也会形成一个<font color="orange">树结构</font>，我们称之为<font color="orange">DOM Tree</font></li></ul></li></ul> <img src="./images/JS/DOM Tree 的结构.jpg"> <h3 id="节点之间的导航"><a href="#节点之间的导航" class="header-anchor">#</a> 节点之间的导航</h3> <ul><li>如果我们获取到<font color="orange">一个节点（Node）后</font>，可以根据<font color="orange">这个节点去获取其他的节点</font>，我们称之为<font color="orange">节点之间的导航</font>。</li> <li>节点之间存在如下的关系
<ul><li>父节点 <font color="orange">parentNode</font></li> <li>前兄弟节点 <font color="orange">previousSibling</font></li> <li>后兄弟节点 <font color="orange">nextSibling</font></li> <li>子节点 <font color="orange">childNodes</font></li> <li>第一个子节点 <font color="orange">firstChild</font></li> <li>第二个子节点 <font color="orange">lastChild</font></li></ul></li></ul> <img src="./images/JS/节点的导航.jpg"> <h3 id="元素之间的导航"><a href="#元素之间的导航" class="header-anchor">#</a> 元素之间的导航</h3> <ul><li>如果我们获取到一个<font color="orange">元素（Element）</font>后，可以根据<font color="orange">这个元素去获取其他的元素</font>，我们称之为<font color="orange">元素之间的导航</font></li> <li>节点之间存在如下的关系：
<ul><li>父元素 <font color="orange">parentElemnt </font></li> <li>前兄弟节点 <font color="orange">previousElementSibling</font></li> <li>后兄弟节点 <font color="orange">nextElementSibling</font></li> <li>子节点 <font color="orange">children</font></li> <li>第一个子节点 <font color="orange">firstElementChild</font></li> <li>第二个子节点 <font color="orange">lastElementChild</font></li></ul></li></ul> <img src="./images/JS/元素之间的导航.jpg"> <h3 id="表格之间的导航"><a href="#表格之间的导航" class="header-anchor">#</a> 表格之间的导航</h3> <ul><li><strong>table 元素</strong></li> <li><font color="orange">table.rows</font> — <strong>tr</strong> 元素的集合；</li> <li><font color="orange">table.caption / tHead / tFoot</font> — 引用元素 <strong>caption</strong>，<strong>thead</strong>，<strong>tfoot</strong>；</li> <li><font color="orange">table.tBodies</font> — <strong>tbody</strong> 元素的集合；</li> <li><strong>thead , tfoot , tbody 元素提供了 rows 属性</strong> <ul><li><font color="orange">tbody.rows</font> — 表格内部 <strong>tr</strong> 元素的集合；</li></ul></li> <li><strong>tr</strong> <ul><li><font color="orange">tr.cells </font> 在给定 <strong>tr 中 td 和 th 单元格的集合</strong></li> <li><font color="orange">tr.sectionRowIndex </font> — 给定的 <strong>tr 在封闭的 thead tbody tfoot 中的位置</strong>（<strong><font color="orange">索引</font></strong>）；</li> <li><font color="orange">tr.rowIndex </font>— 在整个表格中 tr 的编号（包括表格的所有行）；</li></ul></li> <li><strong>td 和 th</strong> <ul><li><font color="orange"> td.cellIndex</font> — 在封闭的 tr 中单元格的编号。</li></ul></li></ul> <h3 id="获取元素的方法"><a href="#获取元素的方法" class="header-anchor">#</a> 获取元素的方法</h3> <ul><li><p>当元素彼此靠近或者相邻时，DOM 导航属性（navigation property）非常有用。</p></li> <li><p>DOM 为我们提供了获取元素的方法：</p> <ul><li><img src="./images/JS/获取元素.jpg"></li> <li><p>目前最常用的是<font color="orange">querySelector 和 querySelectAll</font>；</p></li> <li><p><font color="orange">getElementById</font> 偶尔也会使用或者在适配一些低版本浏览器时；</p></li></ul></li></ul> <h3 id="节点的属性"><a href="#节点的属性" class="header-anchor">#</a> 节点的属性</h3> <ul><li>目前，我们已经可以获取到节点了，接下来我们来看一下节点中有哪些常见的属性：
<ul><li>不同的节点类型有可能有不同的属性；主要讨论节点共有的属性</li></ul></li></ul> <p><strong>节点属性 --- nodeType 属性</strong></p> <ul><li><p>nodeType 属性提供了一种获取<font color="orange">节点类型</font>的方法</p></li> <li><p>它是一个<font color="orange">数值型值</font></p></li> <li><p>常见的节点类型如下!</p></li> <li><img src="./images/JS/节点类型.jpg"></li></ul> <p><strong>节点属性 ---- nodeName</strong></p> <ul><li><font color="orange">nodeName </font> : 获取 node 节点的名字</li> <li><font color="orange">tagName </font>: 获取元素的标签名词</li></ul> <p><font color="cornflowerblue">tagName 和 nodeName 之间有什么不同呢? </font></p> <ul><li><font color="orange">tagName </font>属性 适用于 Element 节点</li> <li><font color="orange">nodeName </font>是为任意 Node 定义
<ul><li><font color="cornflowerblue">对于元素，它的意义与 tagName 相同</font>，所以使用哪一个都是可以的</li> <li>对于其他节点类型（text，comment 等），<font color="cornflowerblue">tagName 获取就是 undefined</font> , <font color="cornflowerblue">nodeName 就可以获取所有的节点类型</font> ；</li></ul></li></ul> <p>**节点属性 ---- innerHTML textContent **</p> <ul><li><font color="orange">innerHTML 属性</font> <ul><li>将元素中的 HTML 获取为字符串形式； 设置元素中的内容；</li></ul></li> <li><font color="orange">outerHTML 属性</font> <ul><li>包含了元素的完整 HTML; <font color="cornflowerblue">outerHTML 会 加上元素本身一起进行操作</font>；</li></ul></li> <li><font color="orange">textContent 属性</font> <ul><li>仅仅获取元素中的<font color="cornflowerblue">文本内容</font>；</li></ul></li></ul> <p><strong>节点属性 ---- nodeValue</strong></p> <ul><li><p>用于获取非元素节点的文本内容</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;header&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 导航注释 <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;nav&quot;</span><span class="token operator">&gt;</span>导航<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">let</span> headerEL <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.header&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>headerEL<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  导航注释</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul> <p><strong>节点的其他属性</strong></p> <p><font color="orange">hidden 属性</font>：也是一个<font color="cornflowerblue">全局属性，可以用于设置元素隐藏</font>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> headerEL <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.header&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
headerEL<span class="token punctuation">.</span>hidden <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 最终显示隐藏, 还是因为设置了  display : none</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="元素的属性和特性"><a href="#元素的属性和特性" class="header-anchor">#</a> 元素的属性和特性</h3> <ul><li><p>一个元素除了有<font color="orange">开始标签</font>、<font color="orange">结束标签</font>、<font color="orange">内容</font>之外，还有很多的<font color="orange">属性（attribute）</font></p> <img src="./images/JS/元素的属性.jpg"></li> <li><p><strong>浏览器在解析 HTML 元素时，会将<font color="orange">对应的 attribute</font>也创建出来放到<font color="orange">对应的元素对象</font>上</strong></p> <ul><li>比如<font color="orange">id、class 就是全局的 attribute</font>，会有对应的<font color="orange">id、class 属性</font>；</li> <li>比如<font color="orange">href 属性</font>是针对<font color="orange">a 元素</font>的，t<font color="orange">ype、value 属性</font>是针对<font color="orange">input 元素</font>的；</li></ul></li></ul> <p><strong>attribute 的分类</strong></p> <ul><li><p>属性 attribute 的分类</p> <ul><li><font color="orange">标准的 attribute </font> ： 某些 attribute 属性是标准的，比如 id、class、href、type、value 等；</li> <li><font color="orange"> 非标准的 attribute </font> ： 某些 attribute 属性是自定义的，比如 abc、age、height 等；</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;box&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;main&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;lys&quot;</span> abc<span class="token operator">=</span><span class="token string">&quot;abc&quot;</span> age<span class="token operator">=</span><span class="token string">&quot;18&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token number">1.88</span><span class="token operator">&gt;</span>
    哈哈
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <p><strong>attribute 的 操作</strong></p> <ul><li>对于所有的 attribute 访问都支持如下的方法
<ul><li><font color="orange"><strong>elem.hasAttribute(name)</strong></font> ------ <font color="cornflowerblue">检查特性是否存在</font></li> <li><strong><font color="orange">elem.getAttribute(name)</font></strong> ------ <font color="cornflowerblue"> 获取这个特性值</font></li> <li><strong><font color="orange">elem.setAttribute ( name , value )</font></strong> ------- <font color="cornflowerblue">设置这个特性值</font></li> <li><font color="orange"><strong>elem.removeAttribute( name )</strong></font> ------- <font color="cornflowerblue">移除了特性</font></li> <li><strong><font color="orange">attributes</font></strong> ------- <font color="cornflowerblue">attr 对象的集合，具有 name，value 属性</font></li></ul></li> <li>attribute 具备以下特征：
<ul><li>它们的<font color="orange">名字是大小写不敏感 </font>（ id 与 ID 不同 ）</li> <li>它们的<font color="orange">值总是字符串类型</font>的</li></ul></li></ul> <p><strong>HTML 5 的 data - * 自定义属性</strong></p> <ul><li>前面我们有学习<font color="cornflowerblue">HTML 5 的 data-*自定义属性</font>，那么它们也是可以在<font color="orange">dataset 属性中获取到</font>的：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;box&quot;</span> data<span class="token operator">-</span>name<span class="token operator">=</span><span class="token string">&quot;lys&quot;</span> data<span class="token operator">-</span>age<span class="token operator">=</span><span class="token string">&quot;18&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> boxEL <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>boxEL<span class="token punctuation">.</span>dataset<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: 'lys', age: '18'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="js-动态修改样式"><a href="#js-动态修改样式" class="header-anchor">#</a> JS 动态修改样式</h3> <ul><li>有时候我们会通过 JavaScript 来动态修改样式，这个时候我们有两个选择
<ul><li>选择一：在 CSS 中编写好对应的样式，<font color="orange">动态的添加 class</font>； （<strong>推荐</strong>）</li> <li>选择二：<font color="orange">动态的修改 style 属性</font>；</li></ul></li></ul> <p><strong>元素的 className 和 classList</strong></p> <ul><li><p>元素的 class attribute，对应的 property 并非叫 class，而是<strong>className</strong>：</p> <ul><li><p>可以对 className 进行赋值，它会替换整个类中的字符串</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;box&quot;</span> data<span class="token operator">-</span>name<span class="token operator">=</span><span class="token string">&quot;lys&quot;</span> data<span class="token operator">-</span>age<span class="token operator">=</span><span class="token string">&quot;18&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> boxEL <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
boxEL<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;abx&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li> <li><p>如果我们需要添加或者移除单个的 class，那么可以使用<strong>classList 属性</strong>。</p></li> <li><p><font color="cornflowerblue">elem.classList 是一个特殊的对象</font></p> <ul><li><font color="orange"><strong>elem.classList.add(class)</strong></font> <strong>添加一个类</strong></li> <li><font color="orange"><strong>elem.classList.remove(class)</strong></font> <strong>添加 / 移除类</strong></li> <li><font color="orange"><strong>elem.classList.toggle(class)</strong></font> <strong>如果类不存在就添加类 ， 存在就移除它</strong></li> <li><font color="orange"><strong>elem.classList.contains（class）</strong></font> <strong>检查 给定雷，返回 true / false</strong></li></ul></li> <li><p>classList 是<font color="cornflowerblue">可迭代对象</font>，可以通过<font color="cornflowerblue">for of</font>进行遍历。</p></li></ul> <p><strong>元素的 style 属性</strong></p> <ul><li><p><strong>如果需要单独修改某一个 CSS 属性，那么可以通过 style 来操作</strong></p> <ul><li><p>对于<font color="orange">多词（multi-word）属性</font>，使用<font color="orange">驼峰式 camelCase</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>boxEL<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&quot;100px&quot;</span><span class="token punctuation">;</span>
boxEL<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li> <li><p>多个样式的写法，我们需要使用<font color="orange">cssText 属性</font></p> <ul><li><font color="cornflowerblue">不推荐这种写法，因为它会替换整个字符串</font></li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code>boxEL.style.cssText = `
      <span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
      <span class="token property">background-color</span><span class="token punctuation">:</span>red
`<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <p><strong>元素 style 的读取 - getComputedStyle</strong></p> <ul><li><p>如果我们需要读取样式</p> <ul><li><p>对于<font color="orange">内联样式</font>，是可以<font color="orange">通过 style.*的方式</font>读取到的</p></li> <li><p>对于<font color="orange">style、css 文件中的样式，是读取不到</font>的；</p> <ul><li>这个时候，我们可以通过<font color="orange"><strong>getComputedStyle</strong></font>的全局函数来实现：</li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code>console.<span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>boxEL<span class="token punctuation">)</span>.width<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h3 id="元素的操作"><a href="#元素的操作" class="header-anchor">#</a> 元素的操作</h3> <h4 id="创建元素"><a href="#创建元素" class="header-anchor">#</a> <strong>创建元素</strong></h4> <p><strong>document.createElement(）</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="插入元素"><a href="#插入元素" class="header-anchor">#</a> <strong>插入元素</strong></h4> <ul><li><font color="orange"><strong>node . append ()</strong></font> ---- <font color="cornflowerblue">在 node 末尾 插入节点或字符串</font></li> <li><font color="orange"><strong>node . prepend ()</strong></font> ----- <font color="cornflowerblue">在 node 开头 插入节点或字符串</font></li> <li><strong><font color="orange">node . before ()</font></strong> ----- <font color="cornflowerblue">在 node 前面插入节点或字符串</font></li> <li><strong><font color="orange">node . after ()</font></strong> ------ <font color="cornflowerblue"> 在 node 后面插入节点 或 字符串</font></li> <li><font color="orange">**node . replaceWith **</font> ------ <font color="cornflowerblue">将 node 替换为给定的节点或字符串</font></li></ul> <img src="./images/JS/插入元素.jpg"> <h4 id="移除和克隆元素"><a href="#移除和克隆元素" class="header-anchor">#</a> <strong>移除和克隆元素</strong></h4> <ul><li><p><font color="orange">移除元素可以调用元素 本身 <strong>remove</strong> 方法</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>element.remove()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><font color="orange">如果我们想要复制一个现有的元素，可以通过 <strong>cloneNode</strong> 方法</font></p> <ul><li>可以传入一个<font color="cornflowerblue">Boolean 类型的值</font>，来决定<font color="cornflowerblue">是否是深度克隆</font>；</li> <li><font color="cornflowerblue">深度克隆会克隆对应元素的子元素，否则不会</font>；</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> boxEL <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>boxEL<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果设置了 true  则也会深度拷贝里面的 子元素</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <h3 id="元素的大小-、滚动"><a href="#元素的大小-、滚动" class="header-anchor">#</a> 元素的大小 、滚动</h3> <ul><li><p><font color="orange">clientWidth</font>：<font color="cornflowerblue">contentWith+padding（不包含滚动条）</font></p></li> <li><p><font color="orange">clientHeight</font>：<font color="cornflowerblue">contentHeight+padding</font></p></li> <li><p><font color="orange">clientTop</font>：<font color="cornflowerblue">border-top 的宽度</font></p></li> <li><p><font color="orange">clientLeft</font>：<font color="cornflowerblue">border-left 的宽度</font></p></li> <li><p><font color="orange">offsetWidth</font>：<font color="cornflowerblue">元素完整的宽度</font></p></li> <li><p><font color="orange">offsetHeight</font>：<font color="cornflowerblue">元素完整的高度</font></p></li> <li><p><font color="orange">offsetLeft</font>：<font color="cornflowerblue">距离父元素的 x</font></p></li> <li><p><font color="orange">offsetHeight</font>：<font color="cornflowerblue">距离父元素的 y</font></p></li> <li><p><font color="orange">scrollHeight</font>：<font color="cornflowerblue">整个可滚动的区域高度</font></p></li> <li><p><font color="orange">scrollTop</font>：<font color="cornflowerblue">滚动部分的高度</font></p></li></ul> <img src="./images/JS/元素的大小、滚动.jpg"> <h3 id="window-的大小-、-滚动"><a href="#window-的大小-、-滚动" class="header-anchor">#</a> window 的大小 、 滚动</h3> <ul><li><p><strong>window 的 width 和 height</strong></p> <ul><li><font color="orange">window.innerWidth </font>、<font color="orange">window.innerHeight</font> <font color="cornflowerblue"> 获取 window 窗口的宽度和高度（包含滚动条）</font></li> <li><font color="orange">window.outerWidth</font> 、<font color="orange">window.outerHeight</font> <font color="cornflowerblue"> 获取 window 窗口的整个宽度和高度（包括调试工具、工具栏）</font></li> <li><font color="orange">document.documentElement.clientWidth</font> 、 <font color="orange">document.documentElement.clientHeight</font> <font color="cornflowerblue"> 获取 html 的宽度和高度（不包含滚动条）</font></li></ul></li> <li><p><strong>window 的滚动位置</strong></p> <ul><li><font color="orange">scrollX </font>： <font color="cornflowerblue">X 轴 滚动的位置</font></li> <li><font color="orange">scrollY </font> : <font color="cornflowerblue">Y 轴 滚动的位置</font></li></ul></li> <li><p><strong>也有提供对应的滚动方法</strong>：</p> <ul><li>方法 <font color="orange">scrollBy(x,y)</font> ：将页面滚动至 相对于当前位置的 (x, y) 位置；</li> <li>方法 <font color="orange">scrollTo(pageX,pageY)</font> 将页面滚动至 绝对坐标；</li></ul></li></ul> <h3 id="window-定时器"><a href="#window-定时器" class="header-anchor">#</a> <strong>window 定时器</strong></h3> <ul><li><font color="orange">setTimeout</font> 允许我们将函数<font color="orange">推迟到一段时间间隔之后</font>再执行</li> <li><font color="orange">setInterval</font> 允许我们<font color="orange">重复执行一个函数</font>，从一段<font color="orange">时间间隔之后开始运行</font>，之后以该时间间隔<font color="orange">连续重复运行该函数</font>。</li></ul> <p>​ <strong>并且通常情况下有提供对应的取消方法</strong></p> <ul><li><font color="orange">clearTimeout</font> : 取消 setTimeout 的定时器</li> <li><font color="orange">clearInterval</font> : 取消 setInterval 的定时器</li></ul> <h4 id="settimeout-的-使用"><a href="#settimeout-的-使用" class="header-anchor">#</a> setTimeout 的 使用</h4> <ul><li><p>setTimeout 的语法如下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> timerId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span><span class="token punctuation">[</span>delay<span class="token punctuation">]</span><span class="token punctuation">,</span>arg1<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><font color="orange">func </font> <font color="cornflowerblue">想要执行的函数或代码字符串</font></li> <li><font color="orange">delay</font> <font color="cornflowerblue"> 执行前的延时，以毫秒为单位（1000 毫秒 = 1 秒），默认值是 0；</font></li> <li><font color="orange">arg1 </font> <font color="cornflowerblue">要传入被执行函数（或代码字符串）的参数列表；</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lys</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">3000</span><span class="token punctuation">,</span>
  <span class="token string">&quot;lys&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h4 id="setinterval-的-使用"><a href="#setinterval-的-使用" class="header-anchor">#</a> <strong>setInterval 的 使用</strong></h4> <ul><li><font color="cornflowerblue">setInterval 方法 和 setTimeout 的 语法相同</font></li> <li>不过<font color="orange">与 setTimeout 只执行一次不同，setInterval 是每间隔给定的时间周期性执行</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setInterval</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lys</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">3000</span><span class="token punctuation">,</span>
  <span class="token string">&quot;lys&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="js-事件处理"><a href="#js-事件处理" class="header-anchor">#</a> JS 事件处理</h2> <h3 id="常见事件列表"><a href="#常见事件列表" class="header-anchor">#</a> 常见事件列表</h3> <ul><li><p><font color="orange">click</font> 当鼠标点击一个元素时</p></li> <li><p><font color="orange">mouseover  </font>/ <font color="orange">mouseout</font> 当鼠标指针移入 / 离开一个元素时 ( <strong>支持冒泡</strong> )</p></li> <li><p><font color="orange">mouseenter</font> / <font color="orange">mouseleave</font> 当鼠标指针 移入 / 离开一个元素时 (<strong>不支持冒泡</strong>)</p></li> <li><p><font color="orange">mousedown </font> / <font color="orange"> mouseup </font> 当在元素上按下 / 释放鼠标按钮时</p></li> <li><p><font color="orange">mousemove</font> 当鼠标移动时</p></li> <li><p>键盘事件</p> <ul><li><font color="orange">keydown </font>/ <font color="orange">keyup  </font> 当按下和 松开 一个按键时</li></ul></li> <li><p>表单的元素事件</p> <ul><li><font color="orange">submit </font> 当访问这提交一个 form 时</li> <li><font color="orange">focus</font> 当访问者 聚焦 一个元素时</li></ul></li> <li><p>Document 事件</p> <ul><li><font color="orange">DOMContentLoaded   </font> 当 HTML 的加载和处理均完成</li></ul></li> <li><p>css 事件</p> <ul><li><font color="orange">transitionend  </font> 当一个 css 动画完成时</li></ul></li></ul> <h3 id="事件冒泡-和-事件捕获"><a href="#事件冒泡-和-事件捕获" class="header-anchor">#</a> 事件冒泡 和 事件捕获</h3> <ul><li><p><font color="orange"><strong>默认情况的是 事件冒泡</strong> 是从<strong>内层向外部依次传递</strong>的顺序，这个顺序我们称之为 <strong>事件冒泡</strong></font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code>divEL<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;div被点击&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  这个可以阻止继续向上冒泡</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li> <li><p>另外一种监听事件流的方式就是 从<font color="orange"><strong>外层到内层</strong></font>，这种称之为**<font color="orange">事件捕获</font>**</p></li></ul> <p><strong>为什么会产生两种不同的处理流呢？</strong></p> <ul><li>这是因为早期浏览器开发时，不管是 IE 还是 Netscape 公司都发现了这个问题;</li> <li>但是他们采用了完全相反的事件流来对事件进行了传递；</li> <li>IE 采用了事件冒泡的方式，Netscape 采用了事件捕获的方式；</li></ul> <p><strong>时间捕获是如何实现的</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>bodyEL<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;body被点击&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

divEL<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;div被点击&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

spanEL<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;span被点击&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>事件捕获和冒泡的过程</strong></p> <ul><li>捕获阶段（Capturing phase） : 事件（从 Window）向下走近元素。</li> <li>目标阶段（Target phase） : 事件到达目标元素。</li> <li>冒泡阶段（Bubbling phase） : 事件从元素上开始冒泡。</li></ul> <img src="./images/JS/捕获和冒泡的过程.jpg"> <h3 id="事件对象"><a href="#事件对象" class="header-anchor">#</a> 事件对象</h3> <ul><li><p>如果获取这个 event 对象呢</p> <ul><li><p><font color="orange">event 对象</font>会在<font color="orange">传入的事件处理（event handler）函数回调</font>时，被系统传入；</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code>divEL<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;事件对象&quot;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <p><strong>event 常见的属性和方法</strong></p> <p>常见的属性:</p> <ul><li><font color="orange">type </font>事件的类型</li> <li><font color="orange">target </font>当前事件发生的元素</li> <li><font color="orange">currentTarget </font>当前处理事件的元素</li> <li>eventPhase 事件所处的阶段</li> <li>offsetX、offsetY 事件发生在元素内的位置</li> <li>clientX、clientY 事件发生在客户端内的位置</li> <li>pageX、pageY：事件发生在客户端相对于 document 的位置；</li> <li>screenX、screenY：事件发生相对于屏幕的位置；</li></ul> <p>常见的方法:</p> <ul><li><font color="orange">preventDefault </font>取消事件默认行为</li> <li><font color="orange">stopPropagation </font>阻止事件的进一步传递 ( 冒泡或者捕获都可以阻止 )</li></ul> <h3 id="事件处理中的-this"><a href="#事件处理中的-this" class="header-anchor">#</a> 事件处理中的 this</h3> <p>在函数中, 可以<font color="orange">通过 this 来获取当前的发生元素</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>divEL<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="eventtarget-类"><a href="#eventtarget-类" class="header-anchor">#</a> EventTarget 类</h3> <ul><li>我们会发现，所有的节点、元素都继承自 EventTarget
<ul><li>事实上 Window 也继承自 EventTarget</li></ul></li> <li>那么这个 EventTarget 是什么呢？
<ul><li>EventTarget 是一个<font color="orange">DOM 接口</font>，主要用于<font color="orange">添加、删除、派发 Event 事件</font>；</li></ul></li> <li>EventTarget 常见的方法：
<ul><li><font color="orange">addEventListener </font> 注册某个事件类型以及事件处理函数</li> <li><font color="orange">removeEventListener</font> 移除某个事件类型以及事件处理函数</li> <li><font color="orange">dispatchEvent</font> 派发某个事件类型到 EventTarget 上</li></ul></li></ul> <h3 id="事件委托"><a href="#事件委托" class="header-anchor">#</a> 事件委托</h3> <ul><li>事件冒泡在某种情况下可以帮助我们实现强大的事件处理模式 – <font color="orange">事件委托模式</font></li> <li>那么这个模式是怎么样的呢?
<ul><li>因为<font color="orange">当子元素被点击</font>时，父元素可以<font color="orange">通过冒泡可以监听到子元素的点击</font></li> <li>并且<font color="orange">可以通过 event.target 获取到当前监听的元素</font>；</li></ul></li></ul> <p>案例 : 一个 ul 中存放多个 li ， 点击 某一个 li 会变成红色</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> ulEL <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;ul&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> activeLI <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;ul .active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ulEL<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nodeName <span class="token operator">!=</span> <span class="token string">&quot;LI&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  activeLI<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  activeLI <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="常见的鼠标事件"><a href="#常见的鼠标事件" class="header-anchor">#</a> 常见的鼠标事件</h3> <table><thead><tr><th><strong>click</strong></th> <th><strong>当用户点击某个对象时调用的事件句柄。</strong></th></tr></thead> <tbody><tr><td><strong>contextmenu</strong></td> <td><strong>在用户点击鼠标右键打开上下文菜单时触发</strong></td></tr> <tr><td><strong>dblclick</strong></td> <td><strong>当用户双击某个对象时调用的事件句柄。</strong></td></tr> <tr><td><strong>mousedown</strong></td> <td><strong>鼠标按钮被按下</strong></td></tr> <tr><td><strong>mouseup</strong></td> <td><strong>鼠标按键被松开</strong></td></tr> <tr><td><strong>mouseover</strong></td> <td><strong>鼠标移到某元素之上。（支持冒泡）</strong></td></tr> <tr><td><strong>mouseout</strong></td> <td><strong>鼠标从某元素移开。（支持冒泡）</strong></td></tr> <tr><td><strong>mouseleave</strong></td> <td><strong>当鼠标指针移出元素时触发。（不支持冒泡）</strong></td></tr> <tr><td><strong>mouseenter</strong></td> <td><strong>当鼠标指针移动到元素上时触发。（不支持冒泡）</strong></td></tr> <tr><td><strong>mousemove</strong></td> <td><strong>鼠标被移动。</strong></td></tr></tbody></table> <p><strong>mouseover 和 mouseenter 区别</strong></p> <ul><li><strong>mouseenter 和 mouseleave</strong> <ul><li><font color="orange">不支持冒泡</font></li> <li>进入子元素依然属于在该元素内, 没有任何反应</li></ul></li> <li><strong>mouseover 和 mouseout</strong> <ul><li><font color="orange">支持冒泡</font></li> <li>进入元素的子元素时
<ul><li>先调用父元素 mouseout</li> <li>再调用子元素 mouseover</li> <li>因为支持冒泡 ，所以会将 mouseover 传递到父元素中</li></ul></li></ul></li></ul> <h3 id="常见的键盘事件"><a href="#常见的键盘事件" class="header-anchor">#</a> 常见的键盘事件</h3> <table><thead><tr><th>onkeydown</th> <th>键盘按钮被按下</th></tr></thead> <tbody><tr><td><strong>onkeypress</strong></td> <td><strong>键盘按钮被按下</strong></td></tr> <tr><td><strong>onkeyup</strong></td> <td><strong>键盘按键被松开</strong></td></tr></tbody></table> <ul><li><strong>事件的执行顺序是 onkeydown、onkeypress、onkeyup</strong> <ul><li><font color="orange">down</font>事件先发生；</li> <li><font color="orange">press</font>发生在文本被输入；</li> <li><font color="orange">up</font>发生在文本输入完成；</li></ul></li> <li><strong>我们可以通过 key 和 code 来区分按下的键：</strong> <ul><li><font color="orange">code</font>：“按键代码”（&quot;KeyA&quot;，&quot;ArrowLeft&quot; 等），特定于键盘上按键的物理位置。</li> <li><font color="orange">key</font>：字符（&quot;A&quot;，&quot;a&quot; 等），对于非字符（non-character）的按键，通常具有与 code 相同的值。）</li></ul></li></ul> <h3 id="常见的表单事件"><a href="#常见的表单事件" class="header-anchor">#</a> 常见的表单事件</h3> <table><thead><tr><th>onchange</th> <th>该事件在表单元素的内容改变是触发</th></tr></thead> <tbody><tr><td><strong>oninput</strong></td> <td><strong>元素获取用户输入是触发</strong></td></tr> <tr><td><strong>onfocus</strong></td> <td><strong>元素获取焦点时触发</strong></td></tr> <tr><td><strong>onblur</strong></td> <td><strong>元素失去焦点时触发</strong></td></tr> <tr><td><strong>onreset</strong></td> <td><strong>表单重置时触发</strong></td></tr> <tr><td><strong>onsubmit</strong></td> <td><strong>表单提交触发</strong></td></tr></tbody></table> <h3 id="文档加载事件"><a href="#文档加载事件" class="header-anchor">#</a> 文档加载事件</h3> <ul><li><font color="orange">DOMContentLoaded </font>: 浏览器已完全加载 HTML , 并构建 DOM 数, 但是像 img 和样式表之类的外部资源可能尚未加载完成</li> <li><font color="orange">load </font> : 浏览器不仅加载完成了 HTML , 还加载完成了所有外部资源: 图片, 样式 等</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="js-bom"><a href="#js-bom" class="header-anchor">#</a> JS BOM</h2> <ul><li><strong>BOM：浏览器对象模型</strong> <ul><li>简称<font color="orange"> BOM</font> ，由<font color="orange">浏览器提供的用于处理文档 之外的所有内容的其他对象</font></li></ul></li></ul> <h3 id="window-对象"><a href="#window-对象" class="header-anchor">#</a> window 对象</h3> <ul><li><p>window 对象在浏览器中可以从两个视角来看待</p> <ul><li>视角一：<font color="orange">全局对象</font> <ul><li>我们知道 ECMAScript 其实是有一个全局对象的，这个全局对象在<font color="orange">Node 中是 global</font>；</li> <li>在浏览器中就是<font color="orange">window 对象</font></li></ul></li> <li>视角二：<font color="orange">浏览器窗口对象</font> <ul><li>作为<font color="orange">浏览器窗口时，提供了对浏览器操作的相关的 API</font></li></ul></li></ul></li> <li><p>当然，这两个视角存在大量重叠的地方，所以不需要刻意去区分它们：</p> <ul><li>事实上对于<font color="orange">浏览器和 Node 中全局对象名称不一样的情况</font>，目前已经指定了对应的标准，称之为<font color="orange">globalThis</font>，并且大多数现代
浏览器都支持它</li> <li>放在<font color="orange">window 对象</font>上的所有属性都可以被访问</li> <li>使用<font color="orange">var 定义的变量会被添加到 window 对象中</font>；</li> <li>window 默认给我们提供了全局的函数和类：<font color="cornflowerblue">setTimeout、Math、Date、Object</font>等</li></ul></li></ul> <h3 id="location-对象"><a href="#location-对象" class="header-anchor">#</a> location 对象</h3> <ul><li><p>location 对象用于表示 window 上当前链接到的 URL 信息</p></li> <li><p><strong>常见的属性有哪些呢？</strong></p> <ul><li><font color="orange">href </font>： 当前 window 对应的超链接 URL 整个 URL</li> <li><font color="orange">protocol </font>: 当前的协议</li> <li><font color="orange">host </font>: 主机协议</li> <li><font color="orange">hostname </font>：主机地址 （不带端口）</li> <li><font color="orange">port </font>：端口</li> <li><font color="orange">pathname </font>：路径</li> <li><font color="orange">search </font>：查询字符串</li> <li><font color="orange">hash </font>：哈希值</li></ul></li> <li><p><strong>location 有如下常用的方法</strong></p> <ul><li><font color="orange">assign</font> ： 赋值一个新的 URL ，并且跳转到该 URL 中</li> <li><font color="orange">replace </font>：打开一个新的 URL ，并且跳转到该 URL 中 （不同的是不会在浏览记录中留下之前的记录）</li> <li><font color="orange">reload </font>：重新加载页面，可以传入一个 Boolean 类型</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> goEL <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.go&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
goEL<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// location.assign(&quot;http://www.baidu.com&quot;);   跳转后，导航条有返回的按钮</span>
  <span class="token comment">// location.replace(&quot;http://www.baidu.com&quot;);  跳转后 ， 导航条没有返回的按钮</span>
  <span class="token comment">// location.reload(); // 重置刷新</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h3 id="urlsearchparams"><a href="#urlsearchparams" class="header-anchor">#</a> URLSearchParams</h3> <ul><li><p>URLSearchParams 定义了一些实用的方法来处理 URL 的查询字符串</p> <ul><li><p>可以将一个字符串转化成<font color="orange">URLSearchParams</font>类型；</p></li> <li><p>也可以将一个<font color="orange">URLSearchParams</font>类型转成字符串</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> urlsearch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">&quot;name=lys&amp;age=18&amp;height=1.88&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlsearch<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lys</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlsearch<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name=lys&amp;age=18&amp;height=1.88</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li> <li><p>URLSearchParams 常见的方法有如下：</p> <ul><li><font color="orange">get</font>：获取搜索参数的值；</li> <li><font color="orange">set</font>：设置一个搜索参数和值；</li> <li><font color="orange">append</font>：追加一个搜索参数和值；</li> <li><font color="orange">has</font>：判断是否有某个搜索参数</li></ul></li></ul> <h3 id="history"><a href="#history" class="header-anchor">#</a> history</h3> <p><strong>history 对象允许我们访问浏览器曾经的会话历史记录</strong></p> <ul><li>有两个属性
<ul><li><font color="orange">length </font>: 会话中记录条数</li> <li><font color="orange">state </font>: 当前保留的状态值</li></ul></li> <li>有五个方法
<ul><li><font color="orange">back() </font> 返回上一页 等价于 history.go(-1)</li> <li><font color="orange">forward()</font> 前进下一页 等价于 history.go(1)</li> <li><font color="orange">go() </font> 加载历史中某一页</li> <li><font color="orange">pushState()</font> 打开一个指定的地址</li> <li><font color="orange">replaceState() </font> 打开一个新的地址，并且使用 replace；</li></ul></li></ul> <h2 id="json"><a href="#json" class="header-anchor">#</a> JSON</h2> <p><strong>JSON 是一种非常重要的<font color="cornflowerblue">数据格式</font></strong>，它并不是<font color="cornflowerblue">编程语言</font>，<strong><font color="orange">而是一种可以在服务器和客户端之间传输的数据格式</font></strong></p> <ul><li>目前 JSON 被使用的场景也比较多
<ul><li><font color="cornflowerblue">网络数据的传递 JSON 数据</font></li> <li><font color="cornflowerblue">项目的某些配置文件</font></li> <li><font color="cornflowerblue">非关系数据库 将 JSON 作为存储格式</font></li></ul></li></ul> <p><strong>JSON 支持三种类型的值</strong></p> <ul><li><font color="orange">简单值</font>：数字（Number）、字符串（String，不支持单引号）、布尔类型（Boolean）、null 类型；</li> <li><font color="orange">对象值</font>：由 key、value 组成，key 是字符串类型，并且必须添加双引号，值可以是简单值、对象值、数组值；</li> <li><font color="orange">数组值</font>：数组的值可以是简单值、对象值、数组值；</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// 对象值</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token property">&quot;friend&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;kobe&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span>
  <span class="token comment">// 数组值</span>
  <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;kobe&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="json-序列化"><a href="#json-序列化" class="header-anchor">#</a> JSON 序列化</h3> <ul><li><p>在 ES5 中引用了 JSON 全局对象，该对象有两个常用的方法：</p> <ul><li><p><font color="orange">stringify 方法</font>：将 JavaScript 类型转成对应的 JSON 字符串</p></li> <li><p>第二个参数</p> <ul><li>如果指定了一个<font color="orange"> replacer 函数</font>，则可以<font color="orange">选择性地替换值</font>；</li> <li>如果<font color="orange">指定的 replacer 是数组</font>，则可<font color="orange">选择性地仅包含数组指定的属性</font>；</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hobbies</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;篮球&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {&quot;name&quot;:&quot;lys&quot;,&quot;age&quot;:18,&quot;hobbies&quot;:[&quot;篮球&quot;]}</span>

<span class="token comment">// 第二个参数 如果指定了一个函数，则可以选择性地替换值</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;lys66&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {&quot;name&quot;:&quot;lys66&quot;,&quot;age&quot;:18,&quot;hobbies&quot;:[&quot;篮球&quot;]}</span>

<span class="token comment">// 第二个参数为数组，只显示 包含数组指定的属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {&quot;name&quot;:&quot;lys&quot;,&quot;age&quot;:18}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li> <li><p><font color="orange">parse 方法</font>：方法用来**<font color="cornflowerblue">解析 JSON 字符串</font>**，<font color="cornflowerblue">构造由字符串描述的 JavaScript 值或对象</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h2 id="storage"><a href="#storage" class="header-anchor">#</a> Storage</h2> <p>WebStorage 主要提供了一种机制，可以让浏览器提供一种比 cookie 更直观的 key、value 存储方式</p> <ul><li><font color="orange">localStorage</font>：本地存储，提供的是一种<font color="orange">永久性的存储方法</font>，在<font color="orange">关闭掉网页重新打开时，存储的内容依然保留</font>；</li> <li><font color="orange">sessionStorage</font>：会话存储，提供的是<font color="orange">本次会话的存储，在关闭掉会话时，存储的内容会被清除</font>；</li></ul> <h3 id="方法和属性"><a href="#方法和属性" class="header-anchor">#</a> 方法和属性</h3> <ul><li>属性
<ul><li><font color="orange">Storage.length</font> : 只读属性
<ul><li><font color="cornflowerblue">返回一个整数，表示存储在 Storage 对象中的数据项数量</font></li></ul></li></ul></li> <li>方法
<ul><li><font color="orange">Storage.Key()</font> ：<font color="cornflowerblue">该方法接受一个数值 n 作为参数，返回存储中的第 n 个 key 名称</font></li> <li><font color="orange">Storage.getItem() </font>: <font color="cornflowerblue">该方法接受一个 key 作为参数，并且返回 key 对应的 value</font></li> <li><font color="orange">Storage.setItem() </font>: <font color="cornflowerblue">该方法接受一个 key 和 value，并且将会把 key 和 value 添加到存储中</font></li> <li><font color="orange">Storage.removeItem() </font> : <font color="cornflowerblue">该方法接受一个 key 作为参数，并把该 key 从存储中删除；</font></li> <li><font color="orange">Storage.clear()</font> : <font color="cornflowerblue">该方法的作用是清空存储中的所有 key</font></li></ul></li></ul> <h2 id="this-的指向"><a href="#this-的指向" class="header-anchor">#</a> this 的指向</h2> <p>函数在调用时候，JavaScript 会<font color="orange">默认给 this 绑定一个值</font>，this 的<font color="orange">绑定和定义的位置（编写的位置）</font>没有关系；this 的<font color="orange"><strong>绑定和调用方式以及调用的位置有关系</strong></font>；</p> <h3 id="默认绑定"><a href="#默认绑定" class="header-anchor">#</a> 默认绑定</h3> <ul><li>默认绑定 就是 独立函数调用，<font color="cornflowerblue">独立的函数调用我们可以理解成函数没有被绑定到某个对象上进行调用</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 案例 一</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// winodw</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 案例 二</span>
<span class="token keyword">function</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
<span class="token punctuation">}</span>
<span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="隐私绑定"><a href="#隐私绑定" class="header-anchor">#</a> 隐私绑定</h3> <ul><li><font color="orange">通过某个对象进行调用的</font>，也就是它的调用位置中，是通过某个对象发起的函数调用。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 案例一</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj对象</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 案例二</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj1</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;obj1&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;obj2&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">obj1</span><span class="token operator">:</span> obj1<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>obj1<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="显示绑定"><a href="#显示绑定" class="header-anchor">#</a> 显示绑定</h3> <p><font color="orange">函数使用 call 和 apply 和 bind 进行调用</font></p> <ul><li><p><font color="cornflowerblue">call 和 apply 方法的区别 </font></p> <ul><li>第一个参数是相同的，要求传入一个对象；</li> <li>在调用这个函数时，会<font color="orange">将 this 绑定到这个传入的对象</font>上。</li> <li>第二个参数 是给函数传递实参值， 是有区别的，<font color="orange">apply 为数组</font> ，<font color="orange">call 为参数列表</font></li> <li>明确的<font color="cornflowerblue">绑定了 this 指向的对象</font>，所以称之为 <strong>显式绑定</strong></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj  1 2 3</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj 1 2 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p><font color="cornflowerblue">bind </font></p> <ul><li><font color="orange">希望一个函数总是显示的绑定到一个对象上</font> <ul><li>使用 bind 方法，bind() 方法创建一个新的<font color="orange">绑定函数</font></li> <li>在 bind() 被调用时，这个新函数的 this 被指定为 bind() 的第一个参数，而其余参数将作为新函数的参数，供调用时使用</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul> <p><strong>忽略显示绑定</strong></p> <ul><li><p>如果在<font color="cornflowerblue">显示绑定</font>中，我们<font color="cornflowerblue">传入一个 null 或者 undefined</font> , 那么这个<font color="cornflowerblue">显示绑定会忽略, 使用默认规则</font></p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>

<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p><font color="cornflowerblue">创建一个函数 的 间接引用 , 这种情况使用默认绑定规则</font></p> <ul><li>赋值(obj2.foo = obj1.foo)的结果是 foo 函数；foo 函数被直接调用，那么是默认绑定；</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;obj1&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;obj2&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span>obj2<span class="token punctuation">.</span>foo <span class="token operator">=</span> obj1<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul> <h3 id="内置函数的绑定"><a href="#内置函数的绑定" class="header-anchor">#</a> 内置函数的绑定</h3> <ul><li>有些时候，我们会调用一些 JavaScript 的内置函数，或者一些第三方库中的内置函数</li> <li>这些函数中的 this 又是如何绑定的呢？</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cba&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
names<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: 'lys'}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> boxEL <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
boxEL<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// boxEL</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> boxEL<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="new-绑定"><a href="#new-绑定" class="header-anchor">#</a> new 绑定</h3> <ul><li>JS 函数中 类的构造函数来使用, 也就是使用 new 关键字</li> <li>使用 new 关键字调用函数, 会执行如下操作
<ul><li><font color="orange">创建一个全新的空对象</font></li> <li><font color="orange">构造函数的显示原型 pototype 赋值为 新空对象的隐式原型的 --proto-- </font></li> <li><font color="orange">将 this 指向 给这个 新空对象</font></li> <li><font color="orange">执行函数体内容代码</font></li> <li><font color="orange">如果构造函数没有返回值内容, 则会返回这个新对象</font></li></ul></li></ul> <h3 id="箭头函数调用"><a href="#箭头函数调用" class="header-anchor">#</a> 箭头函数调用</h3> <ul><li><font color="orange">箭头函数不会绑定 this , 所以 箭头函数里 的 this <strong>指向是根据外层作用域来决定 this</strong>的</font></li></ul> <h3 id="规则优先级"><a href="#规则优先级" class="header-anchor">#</a> 规则优先级</h3> <ol><li><font color="orange">默认规则的优先级最低</font></li> <li><font color="orange">显示绑定优先级高于隐式绑定</font></li> <li><font color="orange">new 绑定优先级高于隐式绑定</font></li> <li><font color="orange">new 绑定优先级高于 bind</font> <ul><li><font color="cornflowerblue">new 绑定和 call、apply 是不允许同时使用的，所以不存在谁的优先级更高</font></li> <li><font color="cornflowerblue">new 绑定可以和 bind 一起使用，new 绑定优先级更高</font></li></ul></li></ol> <h2 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h2> <ul><li>箭头函数是<strong>ES6 之后增加的一种编写函数的方法</strong>，并且它比<strong>函数表达式要更加简洁</strong>：
<ul><li>箭头函数<font color="orange">不会绑定 this 、arguments 属性</font></li> <li>箭头函数<font color="orange">不能作为构造函数来使用</font> ( 不能和 new 一起来使用，会抛出错误 )</li></ul></li></ul> <p><strong>箭头函数的编写优化</strong></p> <ul><li><p>优化一: <font color="cornflowerblue">如果只有一个参数()可以省略</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>nums<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>优化二: <font color="cornflowerblue">如果函数执行体中只有一行代码, 那么可以省略大括号</font></p> <ul><li>并且这行代码的返回值会作为整个函数的返回值</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>nums<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
nums<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>优化三 : <font color="cornflowerblue">如果函数执行体只有返回一个对象, 那么需要给这个对象加上()</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h2 id="浏览器的渲染原理"><a href="#浏览器的渲染原理" class="header-anchor">#</a> 浏览器的渲染原理</h2> <h3 id="浏览器的内核"><a href="#浏览器的内核" class="header-anchor">#</a> 浏览器的内核</h3> <ul><li><p>常见的浏览器内核有</p> <ul><li><font color="orange">Trident</font> （ 三叉戟）：IE、360 安全浏览器、搜狗高速浏览器、百度浏览器、UC 浏览器；</li> <li><font color="orange">Gecko</font>（ 壁虎） ：Mozilla Firefox；</li> <li><font color="orange">Presto</font>（急板乐曲）-&gt; <font color="orange">Blink </font>（眨眼）：Opera</li> <li><font color="orange">Webkit </font>：Safari、360 极速浏览器、搜狗高速浏览器、移动端浏览器（Android、iOS）</li> <li><font color="orange">Webkit </font>-&gt; <font color="orange">Blink </font>：Google Chrome，Edge</li></ul></li> <li><p>浏览器内核指的是浏览器的排版引擎</p> <ul><li><font color="orange">排版引擎</font>（layout engine），也称为浏览器引擎（browser engine）</li> <li>页面渲染引擎（rendering engine）或<font color="orange">样版引擎</font>。</li></ul></li></ul> <p><strong>渲染引擎如何解析页面?</strong></p> <ul><li>渲染引擎在拿到一个页面后，如何解析整个页面并且最终呈现出我们的网页呢？</li></ul> <img src="./images/JS/渲染引擎如何解析页面.jpg"> <img src="./images/JS/渲染页面详细流程.jpg"> <h3 id="回流和重绘"><a href="#回流和重绘" class="header-anchor">#</a> 回流和重绘</h3> <p><font color="red"><strong>回流的理解</strong></font></p> <ul><li><font color="cornflowerblue">第一次确定节点的大小和位置，称之为布局</font>（layout）, <font color="orange">之后对节点的大小、位置修改重新计算称之为 回流</font> ( 修改的排版布局了 )</li></ul> <p><strong>什么情况下引起回流呢？</strong></p> <ul><li>比如 DOM 结构发生改变（添加新的节点或者移除节点）</li> <li>比如改变了布局（修改了 width、height、padding、font-size 等值）</li> <li>比如窗口 resize（修改了窗口的尺寸等）</li> <li>比如调用 getComputedStyle 方法获取尺寸、位置信息；</li></ul> <p><font color="red"><strong>重绘的理解</strong></font></p> <ul><li><font color="orange">第一次渲染内容称之为绘制 , 之后重新渲染称之为重绘</font></li></ul> <p><strong>什么情况下会引起重绘呢？</strong></p> <ul><li>比如修改背景色、文字颜色、边框颜色、样式等</li></ul> <p><font color="red">注意</font>:</p> <ul><li><font color="orange">回流一定会引起重绘，所以<strong>回流是一件很消耗性能</strong>的事情</font>。</li> <li>所以在开发中要尽量避免发生回流：
<ul><li>修改样式时<font color="orange">尽量一次性修改</font>，比如通过 cssText 修改，比如通过添加 class 修改</li> <li>尽量<font color="orange">避免频繁的操作 DOM</font> ，可以在一个 DocumentFragment 或者父元素中 将要操作的 DOM 操作完成，再一次性的操作</li> <li>尽量<font color="orange">避免通过 getComputedStyle 获取尺寸、位置</font>等信息</li> <li>对<font color="orange">某些元素使用 position 的 absolute 或者 fixed</font> <ul><li>并不是不会引起回流，而是开销相对较小，不会对其他元素造成影响。</li></ul></li></ul></li></ul> <h3 id="合成-和-性能优化"><a href="#合成-和-性能优化" class="header-anchor">#</a> 合成 和 性能优化</h3> <ul><li><p><font color="cornflowerblue">绘制的过程，可以将布局后的元素绘制到多个合成图层中</font></p> <ul><li>这是浏览器的一种优化手段</li></ul></li> <li><p>默认情况下，<font color="cornflowerblue">标准流中的内容都是被绘制在同一个图层（Layer）中的</font></p></li> <li><p>而一些特殊的属性，会创建一个新的合成层（ CompositingLayer ），并且新的图层可以利用 GPU 来加速绘制；</p> <ul><li>因为<font color="cornflowerblue">每个合成层都是单独渲染的</font>；</li></ul></li> <li><p>那么哪些属性可以形成新的合成层呢？常见的一些属性</p> <ul><li><strong>3D transforms</strong></li> <li><strong>video 、canvas、iframe</strong></li> <li><strong>opacity 动画转换时</strong>；</li> <li><strong>position: fixed</strong></li> <li><strong>will-change</strong>：一个实验性的属性，提前告诉浏览器元素可能发生哪些变化</li> <li><strong>animation 或 transition 设置了 opacity、transform</strong></li></ul></li> <li><p><font color="orange">分层确实可以提高性能，但是它以内存管理为代价，因此不应作为 web 性能优化策略的一部分过度使用。</font></p></li></ul> <img src="./images/JS/分成.jpg"> <h3 id="defer-和-async-属性"><a href="#defer-和-async-属性" class="header-anchor">#</a> defer 和 async 属性</h3> <p><strong>script 元素 和 页面的解析的关系</strong></p> <ul><li><strong>我们现在已经知道了页面的渲染过程，但是 JavaScript 在哪里呢？</strong> <ul><li>事实上，<font color="orange">浏览器在解析 HTML 的过程中，遇到了 script 元素是不能继续构建 DOM 树</font>的；</li> <li>它会<font color="orange">停止继续构建，首先下载 JavaScript 代码，并且执行 JavaScript 的脚本</font>；</li> <li>只有<font color="orange">等到 JavaScript 脚本执行结束后，才会继续解析 HTML，构建 DOM 树</font>；</li></ul></li> <li><strong>为什么要这样做呢？</strong> <ul><li>这是<font color="orange">因为 JavaScript 的作用之一就是操作 DOM，并且可以修改 DOM</font>；</li> <li>如果我们<font color="orange">等到 DOM 树构建完成并且渲染再执行 JavaScript，会造成严重的回流和重绘，影响页面的性能</font>；</li> <li>所以会在<font color="orange">遇到 script 元素时，优先下载和执行 JavaScript 代码，再继续构建 DOM 树</font>；</li></ul></li> <li><strong>但是这个也往往会带来新的问题，特别是现代页面开发中</strong>：</li> <li>在目前的开发模式中（比如 Vue、React），<font color="orange">脚本往往比 HTML 页面更“重”，处理时间需要更长</font>；</li> <li>所以会<font color="orange">造成页面的解析阻塞，在脚本下载、执行完成之前，用户在界面上什么都看不到</font>；</li> <li><strong>为了解决这个问题，script 元素给我们提供了两个属性（attribute）：<font color="orange">defer </font>和 <font color="orange">async</font>。</strong></li></ul> <p><strong>defer 属性</strong></p> <ul><li><p>defer 属性告诉浏览器<font color="orange">不要等待脚本下载</font>，而<font color="orange">继续解析 HTML，构建 DOM Tree</font>。</p> <ul><li>脚本<font color="orange">会由浏览器来进行下载，但是不会阻塞 DOM Tree</font>的构建过程；</li> <li>如果脚本提前下载好了，它会<font color="orange">等待 DOM Tree 构建完成，在 DOMContentLoaded 事件之前先执行 defer 中的代码</font>；</li></ul></li> <li><p><strong>所以 DOMContentLoaded 总是会等待 defer 中的代码先执行完成</strong></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./4.js&quot;</span> defer<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li> <li><p><strong><font color="orange">另外多个带 defer 的脚本是可以保持正确的顺序执行的</font></strong></p></li> <li><p><font color="orange"><strong>defer 可以提高页面的性能，并且推荐放到 head 元素中</strong></font></p></li> <li><p><font color="orange"><strong>注意：defer 仅适用于外部脚本，对于 script 默认内容会被忽略。</strong></font></p></li></ul> <p><strong>async 属性</strong></p> <ul><li><p><strong>async 特性与 defer 有些类似，它也能够让脚本不阻塞页面</strong></p></li> <li><p><strong>async 是让一个脚本完全独立的</strong>：</p> <ul><li>浏览器<font color="orange">不会因 async 脚本而阻塞</font>（与 defer 类似）；</li> <li><strong><font color="orange">async 脚本不能保证顺序，它是独立下载、独立运行，不会等待其他脚本；</font></strong></li> <li><strong><font color="orange">async 不会能保证在 DOMContentLoaded 之前或者之后执行；</font></strong></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./4.js&quot;</span> async<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><strong><font color="orange">defer 通常用于需要在文档解析后操作 DOM 的 JavaScript 代码，并且对多个 script 文件有顺序要求的</font></strong></p></li> <li><p><strong><font color="orange">async 通常用于独立的脚本，对其他脚本，甚至 DOM 没有依赖的</font></strong></p></li></ul> <h2 id="js-的运行原理"><a href="#js-的运行原理" class="header-anchor">#</a> JS 的运行原理</h2> <ul><li><strong>浏览器内核是由两部分组成的，以 webkit 为例</strong> <ul><li><font color="orange">WebCore</font>：负责 HTML 解析、布局、渲染等等相关的工作</li> <li><font color="orange">JavaScriptCore</font>：解析、执行 JavaScript 代码；</li></ul></li></ul> <h3 id="v8-引擎原理"><a href="#v8-引擎原理" class="header-anchor">#</a> V8 引擎原理</h3> <ul><li>V8 是用<font color="orange">C ++编写</font>的 Google 开源<font color="orange">高性能 JavaScript 和 WebAssembly 引擎</font>，它用于<font color="orange">Chrome 和 Node.js</font>等。</li> <li>它实现 ECMAScript 和 WebAssembly，并在 Windows 7 或更高版本，macOS 10.12+和使用 x64，IA-32，ARM 或 MIPS 处理器的 Linux 系统上运行</li> <li>V8 可以独立运行，也可以嵌入到任何 C ++应用程序中。</li></ul> <img src="./images/JS/v8引擎执行原理图.jpg"> <ul><li>Parse 模块会将 JavaScript 代码转换成 AST（抽象语法树），这是因为解释器并不直接认识 JavaScript 代码；
<ul><li>如果函数没有被调用，那么是不会被转换成 AST 的；</li> <li>Parse 的 V8 官方文档：https://v8.dev/blog/scanner</li></ul></li> <li>Ignition 是一个解释器，会将 AST 转换成 ByteCode（字节码）
<ul><li>同时会收集 TurboFan 优化所需要的信息（比如函数参数的类型信息，有了类型才能进行真实的运算）；</li> <li>如果函数只调用一次，Ignition 会解释执行 ByteCode；</li> <li>Ignition 的 V8 官方文档：https://v8.dev/blog/ignition-interpreter</li></ul></li> <li>TurboFan 是一个编译器，可以将字节码编译为 CPU 可以直接执行的机器码；
<ul><li>如果一个函数被多次调用，那么就会被标记为热点函数，那么就会经过 TurboFan 转换成优化的机器码，提高代码的执行性能；</li> <li>但是，机器码实际上也会被还原为 ByteCode，这是因为如果后续执行函数的过程中，类型发生了变化（比如 sum 函数原来执行的是 number 类型，后来执行变成了 string 类型），之前优化的机器码并不能正确的处理运算，就会逆向的转换成字节码；</li></ul></li></ul> <h3 id="执行上下文"><a href="#执行上下文" class="header-anchor">#</a> 执行上下文</h3> <ul><li>js 引擎内部有一个<font color="orange">执行上下文栈</font> ，它是用于执行<font color="orange">代码的调用栈</font></li> <li>那么现在它要执行谁呢？执行的是全局的代码块：
<ul><li>全局的代码块为了执行会构建一个 Global Execution Context（GEC）；</li> <li>GEC 会 被放入到 ECS 中 执行；</li></ul></li> <li><font color="orange">GEC 被放入到 ECS 中里面包含两部分内容</font> <ul><li><font color="orange">第一部分</font>：在代码执行前，在<font color="orange">parser 转成 AST 的过程</font>中，会将<font color="orange">全局定义的变量、函数等</font>加入到<font color="orange">GlobalObject</font>中，但是并<font color="orange">不会赋值；</font></li> <li>这个过程也称之为<font color="orange">变量的作用域提升</font>（hoisting）</li> <li>第二部分：在代码执行中，对变量赋值，或者执行其他的函数</li></ul></li></ul> <p><strong>认识 VO 对象</strong></p> <ul><li>每一个执行上下文会关联一个<font color="orange">VO（Variable Object，变量对象），变量和函数声明</font>会被添加到这个 VO 对象中</li> <li>当全局代码被执行的时候，<font color="orange">VO 就是 GO 对象</font>了</li></ul> <img src="./images/JS/代码执行过程.jpg"> <p><strong>函数如何被执行呢？</strong></p> <ul><li><p>在执行的过程中<font color="cornflowerblue">执行到一个函数时</font>，就会根据<font color="cornflowerblue">函数体</font>创建一个<font color="cornflowerblue">函数执行上下文</font><font color="cornflowerblue">（Functional Execution Context，简称 FEC）</font>，并且压入到<font color="cornflowerblue">EC Stack</font>中。</p></li> <li><p><strong>因为每个执行上下文都会关联一个 VO，那么函数执行上下文关联的 VO 是什么呢</strong>？</p></li> <li><p>当进入一个函数执行上下文时，会创建一个<font color="orange">AO 对象（Activation Object）</font>；</p></li> <li><p>这个 AO 对象会<font color="orange">使用 arguments 作为初始化</font>，并且<font color="orange">初始值是传入的参数</font>；</p></li> <li><p>这个<font color="orange">AO 对象会作为执行上下文的 VO 来存放变量的初始化</font>；</p></li></ul> <img src="./images/JS/函数执行过程.jpg"> <h3 id="作用域和作用域链"><a href="#作用域和作用域链" class="header-anchor">#</a> 作用域和作用域链</h3> <ul><li><strong>当进入到一个执行上下文时，执行上下文也会关联一个作用域链</strong> <ul><li><font color="orange">作用域链是一个对象列表</font>，用于变量标识符的求值</li> <li>当进入一个执行上下文时，这个<font color="orange">作用域链被创建，并且根据代码类型，添加一系列的对象</font>；</li></ul></li></ul> <img src="./images/JS/作用域提升面试题.jpg"> <h2 id="js-内存管理-和-闭包"><a href="#js-内存管理-和-闭包" class="header-anchor">#</a> JS 内存管理 和 闭包</h2> <h3 id="认识内存管理"><a href="#认识内存管理" class="header-anchor">#</a> 认识内存管理</h3> <ul><li>不管什么样的编程语言，在<font color="orange">代码的执行过程中都是需要给它分配内存</font>的，不同的是<font color="orange">某些编程语言</font>需要我们<font color="orange">自己手动的管理内存</font>，
<font color="orange">某些编程语言</font>会可以<font color="orange">自动帮助我们管理内存</font></li> <li>不管以什么样的方式来管理内存，<font color="orange">内存的管理都会有如下的生命周期</font> <ul><li>第一步：<font color="orange">分配申请你需要的内存</font>（申请）；</li> <li>第二步：<font color="orange">使用分配的内存</font>（存放一些东西，比如对象等）；</li> <li>第三步：<font color="orange">不需要使用时，对其进行释放</font>；</li></ul></li> <li><strong>不同的编程语言对于第一步和第三步会有不同的实现</strong>：
<ul><li><font color="cornflowerblue">手动管理内存</font>：比如 C、C++，包括早期的 OC，都是需要手动来管理内存的申请和释放的（malloc 和 free 函数）；</li> <li><font color="cornflowerblue">自动管理内存</font>：比如 Java、JavaScript、Python、Swift、Dart 等，它们有自动帮助我们管理内存；</li></ul></li> <li><strong>对于开发者来说，JavaScript 的内存管理是自动的、无形的</strong>。</li> <li>我们创建的<font color="cornflowerblue">原始值、对象、函数……这一切都会占用内存</font>；</li> <li>但是我们<font color="cornflowerblue">并不需要手动来对它们进行管理，JavaScript 引擎</font>会帮助我们处理好它；</li></ul> <h3 id="js-内存管理"><a href="#js-内存管理" class="header-anchor">#</a> <strong>JS 内存管理</strong></h3> <ul><li>但是内存分配方式是一样的吗？
<ul><li>JS 对于原始数据类型内存的分配会在执行时，直接在栈空间进行分配；</li> <li>JS 对于复杂数据类型内存的分配会在堆内存中开辟一块空间，并且将这块空间的指针返回值变量引用；</li></ul></li></ul> <h3 id="js-垃圾回收"><a href="#js-垃圾回收" class="header-anchor">#</a> JS 垃圾回收</h3> <ul><li>因为<font color="orange">内存的大小是有限</font>的，所以当<font color="orange">内存不再需要的时候</font>，我们需要<font color="orange">对其进行释放</font>，以便腾出<font color="orange">更多的内存空间</font>。</li> <li>在手动管理内存的语言中，我们需要通过<font color="orange">一些方式自己来释放不再需要的内存，比如 free 函数</font>：
<ul><li>但是这种管理的方式其实<font color="orange">非常的低效</font>，影响我们<font color="orange">编写逻辑的代码的效率</font></li> <li>并且这种方式对<font color="orange">开发者的要求也很高</font>，并且<font color="orange">一不小心就会产生内存泄露</font>；</li></ul></li> <li>所以大部分<strong>现代的编程语言都是有自己的垃圾回收机制</strong>：
<ul><li>垃圾回收的英文是<font color="orange">Garbage Collection</font>，简称<font color="orange">GC</font>；</li> <li>对于<font color="orange">那些不再使用的对象</font>，我们都称之为是<font color="orange">垃圾</font>，它需要被<font color="orange">回收</font>，以释放更多的内存空间</li> <li>而我们的语言运行环境，比如 Java 的运行环境 JVM，JavaScript 的运行环境 js 引擎都会内存 <font color="orange">垃圾回收器</font>；</li> <li><font color="orange">垃圾回收器</font>我们也会简称为<font color="orange">GC</font>，所以在很多地方你看到 GC 其实指的是垃圾回收器</li></ul></li></ul> <h3 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h3> <p>闭包（英语：Closure），又称<font color="orange">词法闭包</font>（Lexical Closure）或<font color="orange">函数闭包</font>（function closures）；</p> <ul><li>闭包在实现上是一个<font color="orange">结构体</font>，它存储了<font color="orange">一个函数和一个关联的环境</font>（相当于一个符号查找表）</li> <li>闭包跟函数最大的区别在于，当捕捉闭包的时候，它的 <font color="orange">自由变量</font> 会在捕捉时被确定，这样即使脱离了捕捉时的上下文，它也能照常运行；</li></ul> <p><strong>MDN 对 JavaScript 闭包的解释</strong></p> <ul><li>一个函数和对其周围状态（lexical environment，词法环境）的引用捆绑在一起（或者说函数被引用包围），这样的组合就是闭包（closure）；</li> <li>闭包让你可以在一个内层函数中访问到其外层函数的作用域；</li> <li>每当创建一个函数，闭包就会在函数创建的同时被创建出来</li></ul> <p><strong>最后的 理解和总结：</strong></p> <ul><li><font color="cornflowerblue"><strong>一个普通的函数 function，如果它可以访问外层作用域的自由变量，那么这个函数和周围环境就是一个闭包</strong></font>；</li> <li>从<strong>广义的角度来说：JavaScript 中的函数都是闭包</strong>；</li> <li>从<strong>狭义的角度来说：JavaScript 中一个函数，如果访问了外层作用域的变量，那么它是一个闭包</strong>；</li></ul> <p><strong>闭包执行过程</strong></p> <ul><li><img src="./images/JS/闭包中函数运行过程.jpg"></li></ul> <p><strong>闭包的内存泄漏</strong></p> <ul><li><p><strong>那么我们为什么经常会说闭包是有内存泄露的呢？</strong></p> <ul><li>在上面的案例中，如果后续我们不再使用 add10 函数了，那么该函数对象应该要被销毁掉，并且其引用着的父作用域 AO 也应该被销毁掉；</li> <li>但是目前因为在全局作用域下 add10 变量对 0xb00 的函数对象有引用，而 0xb00 的作用域中 AO（0x200）有引用，所以最终会造成这些内存都是无法被释放的</li> <li>所以我们经常说的闭包会造成内存泄露，其实就是刚才的引用链中的所有对象都是无法释放的；</li></ul></li> <li><p><strong>那么，怎么解决这个问题呢？</strong></p> <ul><li><p>因为当将 add10 设置为 null 时，就不再对函数对象 0xb00 有引用，那么对应的 AO 对象 0x200 也就不可达了；</p></li> <li><p>在 GC 的下一次检测中，它们就会被销毁掉</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>add10 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h2 id="函数的增强知识"><a href="#函数的增强知识" class="header-anchor">#</a> 函数的增强知识</h2> <h3 id="函数属性-和-arguments"><a href="#函数属性-和-arguments" class="header-anchor">#</a> 函数属性 和 arguments</h3> <p><font color="red"><strong>函数对象的属性</strong></font></p> <ul><li><p>JS 函数也是一个对象，那么对象中就可以有属性和方法。</p> <ul><li><p><font color="orange">属性 name</font> ： 一个函数的名词我们可以通过 name 来访问</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// foo</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><font color="orange">属性 length</font> : 属性 length 用于返回函数参数的个数</p> <ul><li>注意 rest 参数是不参与 参数的个数的</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">baz</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token operator">...</span>agrs</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>baz<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li></ul> <p><strong><font color="red">认识 arguments</font></strong></p> <ul><li>arguments 是一个 对应于 <font color="orange">传递给函数的参数 的 类数组(array-like)对象</font>。
<ul><li><font color="cornflowerblue">array-like 意味着它不是一个数组类型，而是一个对象类型</font> <ul><li>但是它却拥有数组的一些特性，比如说 length，比如可以通过 index 索引来访问；</li> <li>但是它却没有数组的一些方法，比如 filter、map 等</li></ul></li></ul></li></ul> <p><font color="red"><strong>箭头函数不绑定 arguments</strong></font></p> <ul><li>箭头函数是不绑定 arguments 的，所以我们在箭头函数中使用 arguments 会去上层作用域查找：</li></ul> <p><font color="red"><strong>函数的剩余（rest）参数</strong></font></p> <ul><li>可以<strong>将不定数量的参数放入到一个数组</strong>中
<ul><li>如果<font color="orange">最后一个参数是 ... 为前缀的</font>，那么它<font color="orange">会将剩余的参数放到该参数中，并且作为一个数组</font>；</li></ul></li> <li><strong>那么剩余参数和 arguments 有什么区别呢？</strong> <ul><li><font color="cornflowerblue">剩余参数</font>只包含那些<font color="cornflowerblue">没有对应形参的实参</font>，而 <font color="cornflowerblue">arguments 对象包含了传给函数的所有实参</font></li> <li><font color="cornflowerblue">arguments 对象不是一个真正的数组</font>，而<font color="cornflowerblue">rest 参数是一个真正的数组</font>，可以进行数组的所有操作</li> <li>arguments 是<font color="cornflowerblue">早期的 ECMAScript</font>中为了方便去获取所有的参数提供的一个数据结构，而<font color="cornflowerblue">rest 参数是 ES6 中提供并且希望以此
来替代 arguments 的</font></li></ul></li> <li><strong>剩余参数必须放到最后一个位置，否则会报错。</strong></li></ul> <h3 id="纯函数的理解和应用"><a href="#纯函数的理解和应用" class="header-anchor">#</a> 纯函数的理解和应用</h3> <ul><li>函数式编程中有一个非常重要的概念叫纯函数，JavaScript 符合函数式编程的范式，所以也有纯函数的概念</li> <li>纯函数的维基百科定义：
<ul><li>此函数在<font color="orange">相同的输入值时，需产生相同的输出</font>。</li> <li>函数的<font color="orange">输出和输入值以外的其他隐藏信息或状态无关</font>，也和<font color="orange">由 I/O 设备产生的外部输出无关</font>。</li> <li>该函数不能有语义上可观察的函数副作用，诸<font color="orange">如“触发事件”，使输出设备输出，或不能更改输出值以外物件的内容等</font>。</li></ul></li> <li>我简单总结一下：
<ul><li><font color="orange"><strong>确定的输入，一定会产生确定的输出</strong></font></li> <li><strong><font color="orange">函数在执行过程中，不能产生副作用</font></strong></li></ul></li></ul> <p><font color="red">副作用概念的理解</font></p> <p>在计算机科学中，也引用了副作用的概念，表示在<font color="orange">执行一个函数时</font>，<font color="orange">除了返回函数值之外，还对调用函数产生了附加的影响，
比如修改了全局变量，修改参数或者改变外部的存储；</font></p> <ul><li>纯函数在执行的过程中就是不能产生这样的副作用：
<ul><li>副作用往往是产生 bug 的 “温床”</li></ul></li></ul> <p><font color="red">纯函数的案例</font></p> <ul><li>slice：slice 截取数组时不会对原数组进行任何操作,而是生成一个新的数组；</li> <li>splice：splice 截取数组, 会返回一个新的数组, 也会对原数组进行修改</li></ul> <p><strong>slice 就是一个纯函数，不会修改数组本身，而 splice 函数不是一个纯函数；</strong></p> <p><font color="red">纯函数的作用和优势</font></p> <ul><li><p>为什么纯函数在函数式编程中非常重要呢？</p> <ul><li><p>因为你可以安心的编写和安心的使用；</p></li> <li><p>你在写的时候保证了函数的纯度，只是<font color="orange">单纯实现自己的业务逻辑</font>即可，<font color="orange">不需要关心传入的内容</font>是如何获得的或者<font color="orange">依赖其他的
外部变量是否已经发生了修改</font></p></li> <li><p>你在用的时候，你确定<font color="orange">你的输入内容不会被任意篡改，并且自己确定的输入，一定会有确定的输出</font>；</p></li></ul></li></ul> <h3 id="柯里化概念的理解"><a href="#柯里化概念的理解" class="header-anchor">#</a> 柯里化概念的理解</h3> <ul><li>柯里化也是属于<font color="cornflowerblue">函数式编程</font>里面一个非常重要的概念
<ul><li>是一种关于函数的高阶技术</li> <li>它不仅被用于 JavaScript，还被用于其他编程语言</li></ul></li> <li>看下 维基百科 的 解释
<ul><li>柯里化 是把接收<font color="orange">多个参数的函数</font>，<font color="orange">变成接受一个单一参数</font>（最初函数的第一个参数）的函数，并且<font color="orange">返回接受余下的参数，而且返回 结果的新函数的技术</font>；</li> <li>柯里化声称 <font color="orange">“如果你固定某些参数，你将得到接受余下参数的一个函数”</font></li></ul></li> <li>个人总结
<ul><li><font color="orange"><strong>只传递给函数一部分参数来调用它，让它返回一个函数去处理剩余的参数</strong>；</font>这个过程就称之为<strong>柯里化</strong></li></ul></li> <li>柯里化 是一种函数的转换，<font color="cornflowerblue">将一个函数从可调用 f (a,b,c) 转换为 f (a) (b) (c)</font></li></ul> <p>柯里化代码的表现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>柯里化优势</strong></p> <ul><li><p>优势一 ： <font color="orange">函数的职责单一</font></p> <ul><li>在函数式编程中，我们其实往往<font color="cornflowerblue">希望一个函数处理的问题尽可能的单一</font>，而<font color="cornflowerblue">不是将一大堆的处理过程交给一个函数来处理</font>；</li> <li>那么我们是否就可以<font color="cornflowerblue">将每次传入的参数在单一的函数中进行处理</font>，处理完后在<font color="cornflowerblue">下一个函数中再使用处理后的结果</font>；</li></ul></li> <li><p>优势二 ： <font color="orange">函数的参数服用 </font></p> <ul><li>makeAdder 函数要求我们传入一个 num（并且如果我们需要的话，可以在这里对 num 进行一些修改）</li> <li>在之后使用返回的函数时，我们不需要再继续传入 num 了</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">makeAdder</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> count <span class="token operator">+</span> num<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> add5 <span class="token operator">=</span> <span class="token function">makeAdder</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add5</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add5</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 105</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul> <h3 id="组合函数感念何理解"><a href="#组合函数感念何理解" class="header-anchor">#</a> 组合函数感念何理解</h3> <ul><li>比如我们现在需要对<font color="orange">某一个数据</font>进行<font color="orange">函数的调用</font>，执行<font color="orange">两个函数 fn1 和 fn2</font>，这<font color="orange">两个函数是依次执行</font>的；</li> <li>那么如果每次我们都需要<font color="orange">进行两个函数的调用，操作上就会显得重复</font>；</li> <li>那么<font color="orange">是否可以将这两个函数组合起来，自动依次调用</font>呢？</li> <li>这个过程就是<font color="orange">对函数的组合</font>，我们称之为 <font color="orange">组合函数（Compose Function）</font>；</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token parameter">fn1<span class="token punctuation">,</span> fn2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token function">fn1</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">double</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> calcFn <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>double<span class="token punctuation">,</span> square<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">calcFn</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="with-和-eval-使用"><a href="#with-和-eval-使用" class="header-anchor">#</a> with 和 eval 使用</h3> <p><font color="red">with </font></p> <p>with 语句 <font color="orange">扩展一个语句的作用域链</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;window&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">with</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hello world</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>不建议使用 with 语句，因为它可能是混淆错误和兼容性问题的根源。</li></ul> <p><font color="red">eval </font></p> <ul><li>内建函数<font color="orange"> eval 允许执行一个代码字符串</font> <ul><li><font color="cornflowerblue">eval 是一个特殊的函数</font>，它可以<font color="cornflowerblue">将传入的字符串当做 JS 代码来运行</font></li> <li><font color="cornflowerblue">eval 会将最后语句运行语句的结果， 作为返回值</font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> evalString <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">var message = &quot;hello word&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token function">eval</span><span class="token punctuation">(</span>evalString<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hello word</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>不建议在开发中使用 eval</strong> <ul><li>eval 代码的<font color="cornflowerblue">可读性非常的差</font>（代码的可读性是高质量代码的重要原则）</li> <li>eval 是<font color="cornflowerblue">一个字符串</font>，那么有可能在<font color="cornflowerblue">执行的过程中被刻意篡改</font>，<font color="cornflowerblue">那么可能会造成被攻击的风险</font>；</li> <li>eval 的执行<font color="cornflowerblue">必须经过 JavaScript 解释器，不能被 JavaScript 引擎优化</font>；</li></ul></li></ul> <h3 id="严格模式的使用"><a href="#严格模式的使用" class="header-anchor">#</a> 严格模式的使用</h3> <ul><li>JavaScript 历史的局限性
<ul><li>长久以来，<font color="cornflowerblue">JavaScript 不断向前发展且并未带来任何兼容性</font>问题；</li> <li>新的特性被加入，旧的功能也没有改变，这么做有<font color="cornflowerblue">利于兼容旧代码</font>；</li> <li>但缺点是 JavaScript 创造者的<font color="cornflowerblue">任何错误或不完善的决定也将永远被保留在 JavaScript 语言中</font>；</li></ul></li> <li>在 ECMAScript5 标准中，JavaScript 提出了严格模式的概念（Strict Mode）：
<ul><li>严格模式很好理解，是一种<font color="cornflowerblue">具有限制性的 JavaScript 模式</font>，从而使<font color="cornflowerblue">代码隐式的脱离了 ”懒散（sloppy）模式</font>“；</li> <li><font color="cornflowerblue">支持严格模式的浏览器</font>在检测到代码中有严格模式时，会<font color="cornflowerblue">以更加严格的方式对代码进行检测和执行</font>；</li></ul></li> <li>严格模式对正常的 JavaScript 语义进行了一些限制
<ul><li>严格模式通过 <font color="cornflowerblue">抛出错误</font> 来消除一些原有的<font color="cornflowerblue"> 静默</font>（silent）<font color="cornflowerblue">错误</font></li> <li>严格模式让<font color="cornflowerblue">JS 引擎在执行代码时可以进行更多的优化</font>（不需要对一些特殊的语法进行处理）</li> <li>严格模式<font color="cornflowerblue">禁用了在 ECMAScript 未来版本中可能会定义的一些语法</font>；</li></ul></li></ul> <p><strong>开启严格模式</strong></p> <ul><li><strong>严格模式， 通过在文件或者函数开头使用 use strict 来开启</strong> <ul><li><font color="cornflowerblue">可以支持在 js 文件中开启严格模式</font>；</li> <li><font color="cornflowerblue">也支持对某一个函数开启严格模式</font>；</li></ul></li></ul> <p><strong>严格模式限制</strong></p> <ol><li><p>无法意外的创建全局变量</p></li> <li><p>严格模式会使引起静默失败(silently fail,注:不报错也没有任何效果)的赋值操作抛出异常</p></li> <li><p>严格模式下试图删除不可删除的属性</p></li> <li><p>严格模式不允许函数参数有相同的名称</p></li> <li><p>不允许 0 的八进制语法</p></li> <li><p>在严格模式下，不允许使用 with</p></li> <li><p>在严格模式下，eval 不再为上层引用变量</p></li> <li><p>严格模式下，this 绑定不会默认转成对象</p></li></ol> <h3 id="手写-apply-和-call-和-bind-函数实现"><a href="#手写-apply-和-call-和-bind-函数实现" class="header-anchor">#</a> 手写 apply 和 call 和 bind 函数实现</h3> <p><font color="orange">call</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">Mycall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">thisArg<span class="token punctuation">,</span> <span class="token operator">...</span>argm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token string">&quot;fn&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  thisArg<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>argm<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span><span class="token function">Mycall</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><font color="orange">bind</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">thisArg<span class="token punctuation">,</span> <span class="token operator">...</span>otherArg1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token string">&quot;fn&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>otherArg2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> otherArg <span class="token operator">=</span> otherArg1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>otherArg2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    thisArg<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>otherArg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> foo<span class="token punctuation">.</span><span class="token function">myBind</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;lys66&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="object-defineproperty"><a href="#object-defineproperty" class="header-anchor">#</a> Object.defineProperty</h3> <p><strong>对属性的操作的控制</strong></p> <ul><li>在前面我们的属性都是<font color="orange">直接定义在对象内部</font>，或者<font color="orange">直接添加到对象内部</font>的</li> <li>如果我们想要对<font color="orange">一个属性进行比较精准的操作控制</font>，那么我们就可以使用<font color="orange">属性描述符</font> <ul><li>通过属性描述符<font color="orange">可以精准的添加或修改对象的属性</font></li> <li>属性描述符需要使用 <font color="orange">Object . defineProperty</font> 来对属性进行添加或者修改；</li></ul></li></ul> <p><strong>Object . defineProperty()</strong> <font color="cornflowerblue">方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性，并返回此对象</font>。</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>Object.defineProperty( obj , prop , desctiptor
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>可接收三个参数
<ul><li>obj 要定义属性的对象</li> <li>prop 要定义或修改的属性的名称 或 Symbol</li> <li>descript 要定义或修改的属性描述符</li></ul></li> <li>返回值
<ul><li>被传递给函数的对象</li></ul></li></ul> <h3 id="数据属性描述符"><a href="#数据属性描述符" class="header-anchor">#</a> 数据属性描述符</h3> <ul><li>属性描述符的类型有两种
<ul><li><font color="orange">数据属性</font></li> <li><font color="orange">存取属性</font></li></ul></li></ul> <p><strong>数据属性描述符</strong></p> <ul><li><p>当我们直接<font color="cornflowerblue">在一个对象上定义某个属性时</font>，这个属性的<font color="cornflowerblue">为 true</font>；</p></li> <li><p>当我们通过 <font color="cornflowerblue">Object.defineProperty </font>属性描述符<font color="cornflowerblue">定义一个属性时，这个属性的</font><font color="cornflowerblue">默认为 false</font>；</p></li> <li><p>[[<font color="orange">Configurable</font>]]：表示<font color="cornflowerblue">属性<strong>是否可以通过 delete 删除属</strong>性</font>，<font color="cornflowerblue"><strong>是否可以修改它的特性</strong>，或者是否可以将它修改为存取属性描述符</font></p></li> <li><p>[[<font color="orange">Enumerable</font>]]：<font color="cornflowerblue">表示属性是否可以通过 for-in 或者 Object.keys()返回该属性</font></p></li> <li><p>[[<font color="orange">Writable </font>]]：<font color="cornflowerblue">表示是否可以修改属性的值</font>；</p></li> <li><p>[[<font color="orange">value </font>]]:：<font color="cornflowerblue">属性的 value 值，读取属性时会返回该值，修改属性时，会对其进行修改</font>；</p> <ul><li>默认情况下这个值是 undefined；</li></ul></li> <li><p>[[<font color="orange">get </font>]]：<font color="cornflowerblue">获取属性时会执行的函数。默认为 undefined</font></p></li> <li><p>[[<font color="orange">set </font>]]：<font color="cornflowerblue">设置属性时会执行的函数。默认为 undefined</font></p></li></ul> <h3 id="object-defineproperties"><a href="#object-defineproperties" class="header-anchor">#</a> Object.defineProperties</h3> <ul><li><strong>Object.defineProperties()</strong> 方法直接在一个对象上定义 <font color="orange">多个</font><font color="orange"> 新的属性或修改现有属性，并且返回该对象</font>。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">_age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {_age: 18, name: 'lys'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="对象的其他方法补充"><a href="#对象的其他方法补充" class="header-anchor">#</a> 对象的其他方法补充</h3> <ul><li><font color="cornflowerblue">获取对象的属性描述符</font> <ul><li>getOwnPropertyDescriptor</li> <li>getOwnPropertyDescriptors</li></ul></li> <li><font color="cornflowerblue">禁止对象扩展新属性：preventExtensions</font></li> <li>给一个对象添加新的属性会失败（在严格模式下会报错）；</li> <li><font color="cornflowerblue">密封对象，不允许配置和删除属性：seal</font> <ul><li>实际是调用 preventExtensions</li> <li>并且将现有属性的 configurable:false</li></ul></li> <li><font color="cornflowerblue">冻结对象，不允许修改现有属性： freeze</font> <ul><li>实际上是调用 seal</li> <li>并且将现有属性的 writable: false</li></ul></li></ul> <h2 id="es5-中实现继承"><a href="#es5-中实现继承" class="header-anchor">#</a> ES5 中实现继承</h2> <h3 id="对象和函数的原型"><a href="#对象和函数的原型" class="header-anchor">#</a> 对象和函数的原型</h3> <p><font color="red"><strong>对象原型</strong></font></p> <p>JS 中每个<font color="orange">对象都有一个特殊的内置属性 [[prototype]]</font>，这个特殊的对象可以<font color="orange">指向另外一个对象</font></p> <ul><li><p>那么这个对象有什么用呢？</p></li> <li><p>当我们通过引用对象的<font color="orange">属性 key 来获取一个 value</font>font&gt;时，它会<font color="orange">触发 [[Get]]</font>的操作；</p></li> <li><p>这个操作会<font color="orange">首先检查该对象是否有对应的属性</font>，如果有的话就使用它</p></li> <li><p>如果<font color="orange">对象中没有该属性，那么会访问对象[[prototype]]内置属性指向的对象上的属性</font>；</p></li> <li><p><strong>获取对象原型的方式有两种</strong></p> <ul><li>方式一 ： 通过<font color="cornflowerblue">对象的 <strong>proto</strong> 属性可以获取到</font>（但是这个是早期浏览器自己添加的，<font color="cornflowerblue">存在一定的兼容性问题</font>）；</li> <li>方式二：<font color="cornflowerblue">通过 Object.getPrototypeOf 方法可以获取到</font></li></ul></li></ul> <p><strong><font color="red">函数原型</font></strong></p> <p><strong>所有的函数都有一个 prototype 的属性</strong>（注意：不是--proto--）</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 所有函数都有一个属性，名字是 prototype</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <p>之前的 new 操作符</p> <ul><li>1.在内存中创建一个新的对象（空对象）；</li> <li>2.这个对象内部的[[--proto--]]属性会被赋值为该构造函数的 prototype 属性；</li></ul> <p><strong>constructor 属性</strong></p> <ul><li><font color="cornflowerblue">在函数原型对象上面是有一个属性的：constructor</font> <ul><li>默认情况下<font color="cornflowerblue">函数原型上都会添加一个属性叫做 constructor，这个 constructor 指向当前的函数对象</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// person 函数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="原型的对象"><a href="#原型的对象" class="header-anchor">#</a> 原型的对象</h3> <ul><li><p>如果我们需要在<font color="cornflowerblue">原型上添加过多的属性</font>，通常<font color="cornflowerblue">我们会重写整个原型对象</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">nam</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>前面我们说过, 每创建一个函数, 就会同时创建它的 prototype 对象, 这个对象也会自动获取 constructor 属性；</p> <ul><li>而我们这里相当于给 prototype<font color="orange">重新赋值了一个对象</font>, 那么<font color="cornflowerblue">这个新对象的 constructor 属性, 会指向 Object 构造函数, 而不是 Person 构造函数</font></li></ul></li></ul> <p><strong>如果希望 constructor 指向 Person，那么可以手动添加</strong></p> <ul><li><p>上面的方式虽然可以, 但是也会<font color="cornflowerblue">造成 constructor 的[[Enumerable]]特性被设置了 true</font>.</p></li> <li><p>默认情况下, <strong>原生的 constructor 属性是不可枚举的.</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">&quot;constructor&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> Person<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><font color="red"><strong>创建对象 - 构造函数和原型组合</strong></font></p> <ul><li><p>我们在上一个构造函数的方式创建对象时，有一个弊端：会创建出重复的函数，比如 running、eating 这些函数</p> <ul><li>可以将这些函数放到 Person.prototype 的对象上即可</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eating</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;在吃东西&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">running</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;在跑步&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;why&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p1<span class="token punctuation">.</span><span class="token function">eating</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p2<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ul> <h3 id="原型链实现继承"><a href="#原型链实现继承" class="header-anchor">#</a> 原型链实现继承</h3> <ul><li>面向对象有三大特性 ：封装、继承、多态
<ul><li>封装：我们前面将属性和方法封装到一个类中，可以称之为封装的过程</li> <li>继承：继承是面向对象中非常重要的，不仅仅可以减少重复代码的数量，也是多态前提（纯面向对象中）</li> <li>多态：不同的对象在执行时表现出不同的形态；</li></ul></li> <li>那么继承是做什么呢？
<ul><li>继承可以帮助我们<font color="orange">将重复的代码和逻辑抽取到父类</font>中，子类只需要直接继承过来使用即可；</li> <li>在很多编程语言中，<font color="cornflowerblue">继承也是多态的前提</font>；</li></ul></li></ul> <p><strong><font color="red">原型链</font></strong></p> <ul><li><p>从一个<font color="orange">对象上获取属性，如果在当前对象中没有获取到就会去它的原型上面获取</font></p> <img src="./images/JS/对象原型链.png"></li></ul> <p><strong>Object 的 原型</strong></p> <p>原型链的尽头</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let obj = {};
console.log(obj.__proto__.__proto__);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>该对象有原型属性，但是<font color="orange">它的原型属性已经指向的是 null，也就是已经是顶层原型了</font>；</li></ul> <h3 id="对象的方法补充"><a href="#对象的方法补充" class="header-anchor">#</a> 对象的方法补充</h3> <ul><li><font color="orange">hasOwnPropery</font> <ul><li>对象是否有某一个属性自己的属性</li></ul></li> <li><font color="orange">in / for in 操作符</font> <ul><li>判断某个属性是否在某对象或者对象原型上</li></ul></li> <li><font color="orange">instanceof</font> <ul><li>用于检测构造函数（Person、Student 类）的 pototype，<font color="orange">是否出现在</font><font color="orange">某个实例对象的原型链</font>上</li></ul></li> <li><font color="orange">isPrototypeOf</font> <ul><li>用于检测<font color="orange">某个对象</font>，是否出现在<font color="orange">某个实例对象的原型链</font>上</li></ul></li></ul> <h2 id="es6-中实现继承"><a href="#es6-中实现继承" class="header-anchor">#</a> ES6 中实现继承</h2> <h3 id="class-方式定义类"><a href="#class-方式定义类" class="header-anchor">#</a> class 方式定义类</h3> <ul><li><p>在 ES6 新标准中使用了 <font color="orange">class 关键字来直接定义类</font></p></li> <li><p>但是<font color="orange">类本质上依然是前面所讲的构造函数</font>、原型链的语法糖而已；</p></li> <li><p>使用两种方式来声明类：<font color="orange">类声明和类表达式</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> Student <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li></ul> <p><font color="red"><strong>类的构造函数</strong></font></p> <ul><li>当我们通过 new 关键字操作类的时候，会调用这个 constructor 函数
<ul><li>1.在内存中创建一个新的对象（空对象）</li> <li>2.这个对象内部的[[-- proto --]]属性会被赋值为该类的 prototype 属性；</li> <li>3.构造函数内部的 this，会指向创建出来的新对象；</li> <li>4.执行构造函数的内部代码（函数体代码）；</li> <li>5.如果构造函数没有返回非空对象，则返回创建出来的新对象；</li></ul></li></ul> <p><font color="red">类的访问器方法</font></p> <ul><li>之前讲对象的属性描述符时有讲过对象可以添加 setter 和 getter 函数的，那么类也是可以的</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">newName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;调用了name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> newName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><font color="red">类 的 静态方法</font></p> <p><font color="cornflowerblue">静态方法通常用于定义直接使用类来执行的方法，不需要有类的实例，使用 static 关键字来定义</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;run&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Person<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// run</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="extends-实现继承"><a href="#extends-实现继承" class="header-anchor">#</a> extends 实现继承</h3> <ul><li>在 ES6 中<font color="orange">新增了使用<strong>extends</strong>关键字</font>，可以方便的<font color="orange">帮助我们实现继承</font>：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>继承内置类</strong></p> <p>可以让我们的类继承自内置类，比如 Array</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
  <span class="token function">lastItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyArray</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">.</span><span class="token function">lastItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//30</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="super-关键字"><a href="#super-关键字" class="header-anchor">#</a> super 关键字</h3> <ul><li><p>super 关键字 拿到父的构造函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; eat &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> score</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lys</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 99</span>
s1<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lys eat</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul> <h3 id="js-中-的多态"><a href="#js-中-的多态" class="header-anchor">#</a> JS 中 的多态</h3> <ul><li>维基百科对多态的定义：<strong>多态</strong>指为不同数据类型的实体提供统一的接口，或使用一个单一的符号来表示多个不同的类型</li></ul> <p>个人总结 ：<font color="orange"> 不同数据类型进行同一个操作 ， 表现出不同的行为，就是多态的体现</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cba&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="es6-新特性"><a href="#es6-新特性" class="header-anchor">#</a> ES6 新特性</h2> <h3 id="let-和-const-基本使用"><a href="#let-和-const-基本使用" class="header-anchor">#</a> let 和 const 基本使用</h3> <ul><li><p>ES6 开始 新增了两个关键字可以声明变量：let、const</p> <ul><li><strong>let</strong> <ul><li>从直观的角度来说，<font color="orange">let 和 var 是没有太大的区别的，都是用于声明一个变量</font>；</li></ul></li> <li><strong>const</strong> <ul><li>const 关键字 是<font color="orange"> constant 的单词的缩写，表示常量、衡量</font>的意思；</li> <li>它表示<font color="orange">保存的数据一旦被赋值，就不能被修改</font></li> <li>但是<font color="orange">如果赋值是引用类型，那么可以通过引用找到对应的对象，修改对象</font>的内容</li></ul></li></ul> <p>注意 ： 另外<strong>let 、const 不允许重复声明变量</strong></p></li></ul> <p><font color="red"><strong>let / const 有没有作用域提升呢？</strong></font></p> <p>在<strong>执行上下文的词法环境创建出来的时候，变量事实上已经被创建了，只是这个变量是不能被访问的</strong>。</p> <ul><li>作用域提升：<font color="cornflowerblue">在声明变量的作用域中，如果这个变量可以在声明之前被访问，那么我们可以称之为作用域提升</font>；</li></ul> <p><font color="orange">let、const 没有进行作用域提升，但是会在解析阶段被创建出来</font></p> <p><strong>var 的 块级作用域</strong></p> <ul><li>在我们前面的学习中，JavaScript 只会形成两个作用域：<font color="orange">全局作用域和函数作用域</font>。</li></ul> <img src="./images/JS/var的块级作用域.png"> <p><strong>let 和 const 的块级作用域</strong></p> <ul><li>在 ES6 中新增了块级作用域，并且通过<font color="orange">let、const、function、class</font>声明的标识符是具备块级作用域的限制的</li></ul> <img src="./images/JS/let 和 const 的块级作用域.png"> <p><strong>var 、 let 、const 的选择</strong></p> <ul><li>对于 var 的使用
<ul><li>var 所表现出来的特殊性：比如<font color="orange">作用域提升</font>、<font color="orange">window 全局对象、没有块级作用域</font>等都是一些<font color="orange">历史遗留问题</font>font&gt;</li> <li>其实是<font color="orange">JS 在设计之初的一种语言缺陷</font></li> <li>但是在实际工作中，我们<font color="orange">可以使用最新的规范来编写，也就是不再使用 var 来定义变量了</font>；</li></ul></li> <li>对于 let 、const
<ul><li>会<font color="orange">优先推荐使用 const</font>，这样可以<font color="orange">保证数据的安全性不会被随意的篡改</font>；</li> <li>只有当我们明确知道<font color="orange">一个变量后续会需要被重新赋值时</font>，这个时候再<font color="orange">使用 let</font>；</li></ul></li></ul> <h3 id="模板字符串的详解"><a href="#模板字符串的详解" class="header-anchor">#</a> <strong>模板字符串的详解</strong></h3> <ul><li>ES6 允许我们使用字符串模板来嵌入 JS 的变量或者表达式来进行拼接
<ul><li>会使用 `` 符号来编写字符串，称之为<font color="orange">模板字符串</font></li> <li>在模板字符串中，我们可以<font color="orange">通过 ${expression}</font> 来嵌入动态的内容</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>模板字符串调用函数</strong></p> <ul><li><font color="cornflowerblue">模板字符串被拆分</font>了</li> <li>第一个元素是<font color="cornflowerblue">数组</font>，是<font color="cornflowerblue">被模板字符串拆分的字符串组合</font></li> <li><font color="cornflowerblue">后面的元素是一个个模块字符串传入的内容</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>agrs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>agrs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[['Hello ', ' world ', '', raw: Array(3)], 'lys', 18]</span>
<span class="token punctuation">}</span>
foo<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> world </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="函数默认值的补充"><a href="#函数默认值的补充" class="header-anchor">#</a> 函数默认值的补充</h3> <ul><li><font color="orange">参数的默认值我们通常会将其放到最后</font>（在很多语言中，如果不放到最后其实会报错的）
<ul><li>但是 JavaScript<font color="cornflowerblue">允许不将其放到最后，但是意味着还是会按照顺序来匹配</font>；</li></ul></li> <li><strong>另外默认值会改变函数的 length 的个数，默认值以及后面的参数都不计算在 length 之内了</strong></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age <span class="token operator">=</span> <span class="token number">18</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lys</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">&quot;lys&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="函数的剩余参数"><a href="#函数的剩余参数" class="header-anchor">#</a> 函数的剩余参数</h3> <ul><li><p>ES6 中引用了 rest parameter，可以将<font color="cornflowerblue">不定数量的参数放入到一个数组</font>中：</p> <ul><li><p>如果最后一个<strong>参数是 ... 为前缀的，那么它会将剩余的参数放到该参数</strong>中，并且作为一个数组；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li> <li><p><strong>剩余参数和 arguments 有什么区别呢？</strong></p> <ul><li>剩余参数只包含那些<font color="cornflowerblue">没有对应形参的实参</font>，而<font color="cornflowerblue"> arguments 对象包含了传给函数的所有实参</font>；</li> <li><font color="cornflowerblue">arguments 对象不是一个真正的数组</font>，而<font color="cornflowerblue">rest 参数是一个真正的数组</font>，可以进行数组的所有操作</li> <li>arguments 是<font color="cornflowerblue">早期的 ECMAScript</font>中为了方便去获取所有的参数提供的一个数据结构，而 rest 参数是<font color="cornflowerblue">ES6 中提供</font>并且希望以此 来替代 arguments 的；</li></ul></li></ul> <p><font color="red">注意</font>：<font color="orange">剩余参数必须放到最后一个位置，否则会报错。</font></p> <h3 id="箭头函数的补充"><a href="#箭头函数的补充" class="header-anchor">#</a> 箭头函数的补充</h3> <ul><li>箭头函数是<font color="orange">没有显式原型 prototype</font> 的，所以不能作为构造函数，使用 new 来创建对象</li> <li>箭头函数也<font color="orange">不绑定 this 、 arguments 、super 参数</font></li></ul> <h3 id="展开语法"><a href="#展开语法" class="header-anchor">#</a> 展开语法</h3> <ul><li>可以在<font color="cornflowerblue">函数调用 / 数组构造时，将数组表达式 或者 string 字符串 在语法层面展开</font></li> <li>在 ES2018（<font color="cornflowerblue">ES9）中添加的新特性可以在构造字面量对象时, </font>将对象表达式按 key-value 的方式展开</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// b</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['c', 'd']</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a b c d</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;hello word&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// h e l l o   w o r d</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>展开语法的场景
<ul><li>在<font color="orange">函数调用</font>时使用</li> <li>在<font color="orange">数组构造</font>时使用</li> <li>在<font color="orange">构建对象字面量</font>时，也可以使用展开运算符，这个是在 ES2018（ES9）中添加的新特性；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这样不可以，报错 ，需要可迭代</span>

<span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>obj<span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">1.88</span><span class="token punctuation">,</span>
  <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&quot;上海&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  {name: 'lys', age: 18, height: 1.88, address: '上海'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>注意：<font color="cornflowerblue">展开运算符其实是一种浅拷贝；</font></p> <h3 id="数值的表示"><a href="#数值的表示" class="header-anchor">#</a> 数值的表示</h3> <p>在 ES12 中新增的特性，数字过长，可以使用 _作为连接符，便于阅读</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token number">1_0000_0000_0000</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1000000000000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="symbol-的-基本使用"><a href="#symbol-的-基本使用" class="header-anchor">#</a> Symbol 的 基本使用</h3> <ul><li><p>ES6 之前，对象的属性名都是字符串形式，那么很<font color="orange">容易造成属性名的冲突</font>；</p></li> <li><p>比如原来有一个<font color="orange">对象</font>，我们希望在其<font color="orange">中添加一个新的属性和值</font>，但是我们在不确定它原来内部有什么内容的情况下，<font color="orange">很容易造成冲突，从而覆盖掉它内部的某个属性</font></p> <ul><li>比如我们前面在讲 apply、call、bind 实现时，我们有给其中<font color="orange">添加一个 fn 属性</font>，那么如果它内部原来已经有了 fn 属性了呢？</li> <li>比如开发中我们使用混入，那么混入中出现了同名的属性，必然有一个会被覆盖掉；</li></ul></li> <li><p>Symbol 就是 为了 解决上面的问题 ， 用来<strong>生成一个独一无二的值</strong></p> <ul><li>Symbol 值是通过<font color="orange">Symbol 函数</font>来生成的，生成后可以<font color="orange">作为属性名</font>；</li> <li>也就是在 ES6 中，对象的属性名可以使用<font color="orange">字符串</font>，也可以使用<font color="orange">Symbol 值</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p><strong>Symbol 即使多次创建值，它们也是不同的</strong>：Symbol 函数执行后每次<font color="orange">创建出来的值都是独一无二的</font></p></li> <li><p>也<font color="cornflowerblue">可以在创建 Symbol 值的时候传入一个描述<strong>description</strong></font>：这个是 ES2019（ES10）新增的特性</p></li></ul> <p><font color="orange">Symbol 的额外的知识点</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>s1<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>s2<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&quot;s2&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['name']   Object.keys 获取不到 Symbol 的key</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [Symbol(), Symbol()]  // 获取 symobl 的key</span>

<span class="token keyword">let</span> sy <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> sy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12 , s2</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>description</strong></p></li> <li><p><font color="orange">设置 Symbol 描述符</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> s3 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;ccc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s3<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ccc</span>

<span class="token keyword">const</span> s4 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span>s3<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s4<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ccc</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s3 <span class="token operator">==</span> s4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></li></ul> <p><strong>相同值 的 Symbol</strong></p> <ul><li><p><font color="cornflowerblue">前面我们讲 Symbol 的目的是为了创建一个独一无二的值，那么如果我们现在就是想创建相同的 Symbol 应该怎么来做呢？</font></p> <ul><li>可以<font color="orange">使用 Symbol.for 方法来做到这一点</font></li> <li>并且可以通过 <font color="orange">Symbol.keyFor 来获取对应的 key</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> s1 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> s2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//abc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h3 id="set-的-基本使用"><a href="#set-的-基本使用" class="header-anchor">#</a> Set 的 基本使用</h3> <ul><li><strong>Set 是一个新增的数据结构</strong>，可以用来<strong>保存数据</strong>，类似于数组，但是和数组的区别是<font color="orange">元素不能重复</font> <ul><li><font color="cornflowerblue">创建</font>Set 我们需要<font color="cornflowerblue">通过 Set 构造函数</font></li></ul></li> <li>可以发现<font color="orange">Set 中存放的元素是不会重复</font>的，那么<font color="orange">Set 有一个非常常用的功能就是给数组去重</font>。</li></ul> <p>set 的 使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> set1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

set1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>set1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {'1', '2'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>set 数组的去重</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 数组的去重</span>
<span class="token comment">//方法一</span>
<span class="token keyword">let</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newArr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    newArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [10, 20, 44, 78]</span>

<span class="token comment">// 方法二   使用了Set</span>
<span class="token keyword">let</span> newArr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>newArr2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [10, 20, 44, 78]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><font color="orange">Set 的 常见方法</font></p> <ul><li>Set 常见的属性
<ul><li><font color="orange">size </font>: <strong>返回 Set 中元素的个数</strong></li></ul></li> <li>Set 常见的方法
<ul><li><font color="orange">add ( value ) </font>：<strong>添加某个元素，返回 Set 对象本身</strong>；</li> <li><font color="orange">delete ( value )</font> : <strong>从 set 中删除和这个值相等的元素，返回 boolean 类型</strong>；</li> <li><font color="orange">has(value)</font>：<strong>判断 set 中是否存在某个元素，返回 boolean 类型</strong>；</li> <li><font color="orange">clear()</font>：<strong>清空 set 中所有的元素，没有返回值</strong></li> <li><font color="orange">forEach(callback, [, thisArg])</font>：<strong>通过 forEach 遍历 set</strong>；</li></ul></li></ul> <p>另外**<font color="orange">Set 是支持 for of 的遍历的</font>**</p> <h3 id="weakset-使用"><a href="#weakset-使用" class="header-anchor">#</a> WeakSet 使用</h3> <ul><li><strong>和 Set 类似的另外一个数据结构称之为<font color="orange">WeakSet</font>，也是<font color="cornflowerblue">内部元素不能重复的数据结构</font></strong></li> <li>那么和 Set 有什么区别呢？
<ul><li>区别一：WeakSet 中<font color="orange">只能存放对象类型</font>，<font color="orange">不能存放基本数据类型</font>；</li> <li>区别二：<font color="orange">WeakSet 对元素的引用是弱引用</font>，如果<font color="cornflowerblue">没有其他引用对某个对象进行引用，那么 GC 可以对该对象进行回收</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> wset <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// wset.add(&quot;123&quot;); // 这样就会报错</span>
wset<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wset<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  [obj]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>WeakSet 常见的方法
<ul><li>add(value)：添加某个元素，返回 WeakSet 对象本身；</li> <li>delete(value)：从 WeakSet 中删除和这个值相等的元素，返回 boolean 类型；</li> <li>has(value)：判断 WeakSet 中是否存在某个元素，返回 boolean 类型；</li></ul></li></ul> <p><font color="orange">weakSet 不能进行遍历</font></p> <p>使用了 weakSet 的案例</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> weakset <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    weakset<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>weakset<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;不能通过其他对象调用&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;running&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// running</span>

<span class="token keyword">let</span> running <span class="token operator">=</span> p<span class="token punctuation">.</span>running<span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">run</span><span class="token operator">:</span> running<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//不能通过其他对象调用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="map-的基本使用"><a href="#map-的基本使用" class="header-anchor">#</a> Map 的基本使用</h3> <p>新增数据结构是 Map ，用于<font color="orange">存储映射关系</font></p> <ul><li><p>使用对象来存储映射关系，他们有什么区别呢？</p> <ul><li>事实上我们对象存储映射关系只能用<font color="orange">字符串（ES6 新增了 Symbol）作为属性名（key）</font></li> <li>某些情况下我们可能希望通过<font color="orange">其他类型作为 key，比如对象</font>，这个时候会<font color="orange">自动将对象转成字符串来作为 key</font>；</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&quot;上海市&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>obj1<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>obj2<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&quot;bb&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// key 会自动转换为 string 字符串  然后就两个object，后面的就会覆盖前的对象</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  {address: '上海市',  [object Object]: 'bb'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>那我们就可以使用 Map</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys2&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj2<span class="token punctuation">,</span> <span class="token string">&quot;bb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {{…} =&gt; 'aa', {…} =&gt; 'bb'}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// aa</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Map 的常见属性</p> <ul><li><font color="orange"> size</font>：<font color="cornflowerblue">返回 Map 中元素的个数； </font></li></ul> <p>Map 常见的方法</p> <ul><li><font color="orange">set(key, value)</font>：在 Map 中添加 key、value，并且返回整个 Map 对象；</li> <li><font color="orange">get(key)</font>：根据 key 获取 Map 中的 value；</li> <li><font color="orange">has(key)</font>：判断是否包括某一个 key，返回 Boolean 类型；</li> <li><font color="orange">delete(key)</font>：根据 key 删除一个键值对，返回 Boolean 类型；</li> <li><font color="orange">clear()</font>：清空所有的元素；</li> <li><font color="orange">forEach(callback, [, thisArg])</font>：通过 forEach 遍历 Map；</li></ul> <p><strong>Map 也可以通过 for of 进行遍历</strong></p> <h3 id="weakmap-的使用"><a href="#weakmap-的使用" class="header-anchor">#</a> weakMap 的使用</h3> <ul><li><p><strong>和 Map 类型的另外一个数据结构称之为</strong><font color="orange">WeakMap</font>，也是以<font color="orange">键值对的形式存在</font>的。</p></li> <li><p>那么和 Map 有什么区别呢？</p> <ul><li>区别一：<font color="orange">WeakMap 的 key 只能使用对象，不接受其他的类型作为 key</font>；</li> <li>区别二：WeakMap 的 key 对对象想的<font color="orange">引用是弱引用</font>，如果没有<font color="orange">其他引用这个对象，那么 GC 可以回收该对象</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys2&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> weakMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
weakMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
weakMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj2<span class="token punctuation">,</span> <span class="token string">&quot;bbb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weakMap<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {{…} =&gt; 'bbb', {…} =&gt; 'aaa'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>WeakMap 常见的方法有四个</p> <ul><li><font color="orange">set(key, value)</font>：在 Map 中添加 key、value，并且返回整个 Map 对象</li> <li><font color="orange">get(key)</font>：根据 key 获取 Map 中的 value；</li> <li><font color="orange">has(key)</font>：判断是否包括某一个 key，返回 Boolean 类型；</li> <li><font color="orange">delete(key)</font>：根据 key 删除一个键值对，返回 Boolean 类型；</li></ul> <h3 id="proxy-的使用"><a href="#proxy-的使用" class="header-anchor">#</a> Proxy 的使用</h3> <ul><li><p>我们先来看一个需求：有一个对象，我们希望监听这个对象中的属性被设置或获取的过程</p> <ul><li>通过我们前面所学的知识，们可以<font color="cornflowerblue">通过之前的属性描述符中的存储属性描述符来做到</font></li> <li>使用<font color="cornflowerblue"><strong>Object.defineProperty</strong> 的存储属性描述符来对属性的操作进行监听</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">1.88</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> _value <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听: 设置了值 &quot;</span> <span class="token operator">+</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
      _value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听: 获取的值 &quot;</span> <span class="token operator">+</span> _value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> _value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 监听: 获取的值 lys</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;coderlys&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 监听: 设置了值 coderlys</span>
obj<span class="token punctuation">.</span>age<span class="token punctuation">;</span> <span class="token comment">// 监听: 获取的值 18</span>
obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">17</span><span class="token punctuation">;</span> <span class="token comment">// 监听: 设置了值 17</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li></ul> <p><strong>但是这样做有什么缺点呢？</strong></p> <ul><li>首先，<font color="cornflowerblue">Object.defineProperty 设计的初衷，不是为了去监听截止一个对象中所有的属性的</font>。
<ul><li>我们在定义某些属性的时候，<font color="cornflowerblue">初衷其实是定义普通的属性，但是后面我们强行将它变成了数据属性描述符</font></li></ul></li> <li>其次，如果我们<font color="cornflowerblue">想监听更加丰富的操作，比如新增属性、删除属性，那么 Object.defineProperty 是无能为力的</font></li></ul> <p>此时此刻就有了 Proxy 的出现</p> <p><font color="red"><strong>Proxy 基本使用</strong></font></p> <ul><li><p>在 ES6 中，<strong>新增了一个 Proxy 类，这个类从名字就可以看出来，是用于帮助我们创建一个代理的</strong>：\</p> <ul><li>也就是说，如果我们希望<font color="orange">监听一个对象的相关操作</font>，那么我们可以先**<font color="orange">创建一个代理对象（Proxy 对象）</font>**；</li> <li>之后对<font color="orange">该对象的所有操作</font>，都通过<font color="orange">代理对象来完成</font>，代理对象<font color="orange">可以监听我们想要对原对象进行哪些操作</font>；</li></ul></li> <li><p>首先，我们需要<font color="orange">new Proxy 对象</font>，并且<font color="orange">传入需要侦听的对象以及一个处理对象</font>，可以<font color="orange">称之为 handler</font>；</p></li> <li><p>其次，<font color="orange">我们之后的操作都是直接对 Proxy 的操作</font>，而<font color="orange">不是原有的对象</font>，因为我们需要在 handler 里面进行侦听；</p></li></ul> <p><strong>Proxy 的 set 和 get 捕获器</strong></p> <ul><li><strong>如果我们想要侦听某些具体的操作，那么就可以在 handler 中添加对应的</strong><font color="orange">捕捉器（Trap）</font>：</li> <li><strong>set 和 get 分别对应是函数类型</strong> <ul><li><font color="orange">set 函数 有四个参数</font> <ul><li><font color="cornflowerblue">target </font>： 目标对象 (侦听的对象)</li> <li><font color="cornflowerblue">property </font>：被将设置的属性 key</li> <li><font color="cornflowerblue">value </font>： 新属性值</li> <li><font color="cornflowerblue">receiver </font>：调用的代理对象</li></ul></li> <li><font color="orange">get 函数 有三个参数</font> <ul><li><font color="cornflowerblue">target </font>：目标对象 （侦听的对象）</li> <li><font color="cornflowerblue">property </font>：被获取的属性 key</li> <li><font color="cornflowerblue">receiver </font>：调用的代理对象</li></ul></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">1.88</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> objProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听: 设置了值 &quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听: 获取的值 &quot;</span> <span class="token operator">+</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

objProxy<span class="token punctuation">.</span>age<span class="token punctuation">;</span> <span class="token comment">// 监听: 获取的值 18</span>
objProxy<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 监听: 获取的值 lys</span>
objProxy<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;coderlys&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 监听: 设置了值 coderlys</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong><font color="red">Prxoy 所有捕获器</font></strong></p> <img src="./images/JS/Proxy的所有捕获器.jpg"> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">1.88</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> objProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听: 设置了值 &quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听: 获取的值 &quot;</span> <span class="token operator">+</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token parameter">traget<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听: 删除的值 &quot;</span> <span class="token operator">+</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">has</span><span class="token punctuation">(</span><span class="token parameter">traget<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听: in的操作符捕获器&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> key <span class="token keyword">in</span> traget<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">delete</span> objProxy<span class="token punctuation">.</span>age<span class="token punctuation">;</span> <span class="token comment">// 监听: 删除的值 age</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span> <span class="token keyword">in</span> objProxy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><font color="red"><strong>Proxy 的   construct  和   apply</strong></font></p> <ul><li>当然，我们还<strong>会看到捕捉器中还有 construct 和 apply，它们是应用于函数对象的</strong></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;foo函数被调用 &quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> fooProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> thisArg<span class="token punctuation">,</span> otherArgs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听到 该函数被apply 进行了调用&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">target</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> otherArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">construct</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> otherArgs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听到 该函数被new 进行了调用&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">target</span><span class="token punctuation">(</span><span class="token operator">...</span>otherArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fooProxy</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 监听到 该函数被apply 进行了调用</span>
<span class="token keyword">new</span> <span class="token class-name">fooProxy</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  监听到 该函数被new 进行了调用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="reflect-的使用"><a href="#reflect-的使用" class="header-anchor">#</a> Reflect 的使用</h3> <ul><li>Reflect 也是<font color="cornflowerblue">ES6 新增</font>的一个 API，<font color="cornflowerblue">它是一个对象，字面的意思是反射</font>。</li> <li>那么这个 Reflect 有什么用呢？
<ul><li>它主要<font color="cornflowerblue">提供了很多操作 JS 对象的方法</font>，有点像<font color="cornflowerblue">Object 中操作对象的方法</font>；</li> <li>比如 Reflect.getPrototypeOf(target)类似于 Object.getPrototypeOf()；</li></ul></li> <li>如果我们有 Object 可以做这些操作，那么<font color="cornflowerblue">为什么还需要有 Reflect 这样的新增对象呢？</font> <ul><li>这是因为在早期的 ECMA 规范中<font color="orange">没有考虑到这种对 对象本身 的操作如何设计会更加规范，所以将这些 API 放到了 Object 上面</font>；</li> <li>但是<font color="orange">Object 作为一个构造函数</font>，这些操作实际上<font color="orange">放到它身上并不合适</font></li> <li>所以在 ES6 中<font color="cornflowerblue">新增了 Reflect</font>，让我们这些操作都集中到了 Reflect 对象上；</li> <li>另外在使用 Proxy 时，可以做到<font color="cornflowerblue">不操作原对象</font>；</li></ul></li></ul> <p><strong>Reflect 的常见方法</strong></p> <img src="./images/JS/Reflect的常见方法.jpg"> <p><strong>Reflect 的使用</strong></p> <ul><li>那么我们可以将之前 Proxy 案例中对原对象的操作，<font color="orange">都修改为 Reflect 来操作</font>：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> objProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
objProxy<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;coderlys&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: 'coderlys'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>Receiver 的作用</strong></p> <ul><li>我们发现在使用 getter、setter 的时候有一个<font color="orange">receiver</font>的参数，它的作用是什么呢？
<ul><li>如果我们的源对象（obj）有<font color="cornflowerblue">setter、getter 的访问器属性</font>，那么可以<font color="orange">通过 receiver 来改变里面的 this</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> objProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="promise-的使用"><a href="#promise-的使用" class="header-anchor">#</a> <strong><font color="red">Promise 的使用</font></strong></h3> <ul><li><p>从一个实际的例子来作为切入点</p> <ul><li>我们调用一个函数，这个函数中发送网络请求（我们可以用定时器来模拟）</li> <li>如果发送<font color="cornflowerblue">网络请求成功了</font>，那么<font color="cornflowerblue">告知调用者发送成功，并且将相关数据返回过去</font>；</li> <li>如果发送<font color="cornflowerblue">网络请求失败了</font>，那么<font color="cornflowerblue">告知调用者发送失败，并且告知错误信息</font>；</li></ul></li> <li><p><font color="orange">Promise 是一个类</font>，可以翻译成 <font color="orange">承诺、许诺 、期约</font>；</p></li> <li><p>当我们需要的时候，<font color="orange">给予调用者一个承诺</font>：待会儿<font color="orange">我会给你回调数据时</font>，就可以<font color="orange">创建一个 Promise 的对象</font>；</p></li> <li><p>在通过 new 创建 Promise 对象时，我们需要<font color="orange">传入一个回调函</font>数，我们称之为<font color="orange">executor</font></p> <ul><li>这个回调函数<font color="orange">会被立即执行</font>，并且给<font color="orange">传入另外两个回调函数<strong>resolve</strong>、<strong>reject</strong></font>；</li> <li>当我们<font color="orange">调用 resolve 回调函数时</font>，会执行<font color="orange">Promise 对象的 then 方法传入的回调函数</font></li> <li>当我们<font color="orange">调用 reject 回调函数时</font>，会执行<font color="orange">Promise 对象的 catch 方法传入的回调函数</font>；</li></ul></li></ul> <p><strong><font color="red">Promise 的代码结构</font></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;成功的回调&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;失败的回调&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// let r = run(101);</span>
<span class="token comment">// r.then((res) =&gt; {</span>
<span class="token comment">//   console.log(res); // 成功的回调</span>
<span class="token comment">// });</span>
<span class="token comment">// r.catch((error) =&gt; {</span>
<span class="token comment">//   console.log(error);</span>
<span class="token comment">// });</span>

<span class="token function">run</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 成功的回调</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><strong><font color="red">Executor</font></strong></p> <ul><li><p>Executor 是在创建 Promise 时需要传入的一个回调函数，这个<font color="orange">回调函数会被立即执行</font>，并且<font color="orange">传入两个参数</font>：</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>通常我们会在 Executor 中确定我们的 Promise 状态：</p> <ul><li>通过<font color="orange">resolve</font>，可以兑现（fulfilled）Promise 的状态，我们也可以称之为已决议（resolved）</li> <li>通过<font color="orange">reject</font>，可以拒绝（reject）Promise 的状态</li></ul></li> <li><p>这里需要注意：<strong>一旦状态被确定下来，Promise 的状态会被 锁死，该 Promise 的状态是不可更改的</strong></p> <ul><li>在我们<font color="orange">调用 resolve</font>的时候，如果<font color="orange">resolve 传入的值本身不是一个 Promise</font>，那么<font color="orange">会将该 Promise 的状态变成 兑现</font>（fulfilled）</li> <li>在<font color="cornflowerblue">之后我们去调用 reject 时，已经不会有任何的响应了</font>（并不是这行代码不会执行，而是无法改变 Promise 状态）；</li></ul></li></ul> <p><font color="red"><strong>resolve 不同值的区别</strong></font></p> <ul><li><p>情况一：如果 resolve 传入<font color="orange">一个普通的值或者对象</font>，那么这个<font color="orange">值会作为 then 回调的参数</font>；</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;Hello word&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello word</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul></li> <li><p>情况二：如果 resolve 中传入的是<font color="orange">另外一个 Promise</font>，那么这个<font color="orange">新 Promise 会决定原 Promise 的状态</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;第二个Promise 的值 &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第二个Promise 的值</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul></li> <li><p>情况三：如果 resolve 中<font color="orange">传入的是一个对象</font>，并且这个对象<font color="orange">有实现 then 方法</font>，那么会执行该 then 方法，并且<font color="orange">根据 then 方法的结 果来决定 Promise 的状态</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">then</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">res</span><span class="token punctuation">(</span><span class="token string">&quot;666&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 666</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul></li></ul> <p><font color="red"><strong>then 方法 - 多次调用</strong></font></p> <ul><li>一个 Promise 的 then 方法是可以<font color="cornflowerblue">被多次调用</font>的：
<ul><li>每次调用我们都可以<font color="cornflowerblue">传入对应的 fulfilled 回调</font></li> <li>当 Promise 的状态<font color="cornflowerblue">变成 fulfilled 的时候，这些回调函数都会被执行</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 666</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 666</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 666</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><font color="red"><strong>then 方法 - 返回值</strong></font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;666&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 666</span>
    <span class="token comment">//  情况一  return &quot;111&quot;;  //  return &quot;111&quot; 这个是返回一个普通的值</span>
    <span class="token comment">//  情况二  return new Promise((resolve, reject) =&gt; { // 这是返回一个 Promise</span>
    <span class="token comment">// 			resolve(&quot;123&quot;);</span>
    <span class="token comment">//		     });</span>
    <span class="token comment">//   情况三  return {   //	这是返回一个 对象 ，里面有then的方法 ，会被执行 ，返回 resolve里的值</span>
    <span class="token comment">//             then(resolve, reject) {</span>
    <span class="token comment">//                  resolve(&quot;情况三&quot;);</span>
    <span class="token comment">//                   },</span>
    <span class="token comment">//   	       };</span>
    <span class="token keyword">return</span> <span class="token string">&quot;111&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 111</span>
    <span class="token comment">//  这个then 方法 的 res 的结果值 ，是通过上一个then方法的返回 Promsie 的值</span>
    <span class="token comment">//  没有return 的情况  res 为 undefinde</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><font color="red"><strong>catch 方法 - 多次调用</strong></font></p> <ul><li>catch 方法也是 Promise 对象上的一个方法（实例方法）
<ul><li>它也是<font color="cornflowerblue">放在 Promise 的原型上的 Promise.prototype.catch</font></li></ul></li> <li>一个<font color="orange">Promise 的 catch 方法是可以被多次调用</font>的：
<ul><li>每次调用我们<font color="cornflowerblue">都可以传入对应的 reject 回调</font></li> <li>当<font color="cornflowerblue">Promise 的状态变成 reject 的时候，这些回调函数都会被执行</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;err&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;err&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><font color="red"><strong>catch 方法 - 返回值</strong></font></p> <p>事实上 catch 方法也是会<font color="orange">返回一个 Promise 对象</font>的，所以 catch 方法后面我们<font color="orange">可以继续调用 then 方法或者 catch 方法</font>：</p> <p><strong><font color="red">finally 方法</font></strong></p> <ul><li>finally 是在 ES9（ES2018）中新增的一个特性：<font color="orange">表示无论 Promise 对象无论变成 resolve 还是 rejected 状态，最终都会被执行 的代码</font>。</li> <li><font color="orange"><strong>finally 方法是不接收参数的，因为无论前面是 fulfilled 状态，还是 rejected 状态，它都会执行</strong>。</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;reject&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;finally&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// finally</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong><font color="red">resolve 方法</font></strong></p> <ul><li><p>前面我们学习的<font color="cornflowerblue">then、catch、finally</font>方法都<font color="orange">属于 Promise 的实例方法</font>，都是<font color="orange">存放在 Promise 的 prototype 上</font>的。</p></li> <li><p>有时候我们已经有一个<font color="cornflowerblue">现成的内容</font>了，希望<font color="orange">将其转成 Promise 来使用</font>，这个时候我们<font color="orange">可以使用 Promise.resolve 方法来完成</font>。</p> <ul><li>Promise.resolve 的用法相当于 new Promise ，并且执行 resolve 操作</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;lys&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lys</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;lys&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等价于</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;why&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>resolve 参数的形态</p> <ul><li>情况一：参数是一个普通的值或者对象</li> <li>情况二：参数本身是 Promise</li> <li>情况三：参数是一个 对象 里面 执行了 then 方法</li></ul></li></ul> <p><strong><font color="red">reject 方法</font></strong></p> <ul><li><p>reject 方法类似于 resolve 方法，只是会将 Promise 对象的状态设置为 reject 状态。</p></li> <li><p><font color="orange">Promise.reject 的用法相当于 new Promise，只是会调用 reject：</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;lys&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lys</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;lys&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 相当于</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;why&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><font color="cornflowerblue">Promise.reject 传入的参数无论是什么形态，都会直接作为 reject 状态的参数传递到 catch 的</font></li></ul></li></ul> <p><strong><font color="red">all 方法</font></strong></p> <ul><li><strong>另外一个类方法是 Promise.all</strong> <ul><li>它的作用是<font color="orange">将多个 Promise 包裹在一起形成一个新的 Promise</font>；</li> <li><font color="orange">新的 Promise 状态由包裹的所有 Promise 共同决定</font></li> <li>当<font color="orange">所有的 Promise 状态变成 resolve 状态</font>时，<font color="orange">新的 Promise 状态为 resolve，并且会将所有 Promise 的返回值组成一个数组</font>；</li> <li>当**<font color="orange">有一个 Promise 状态为 reject</font>时，新的<font color="orange">Promise 状态为 reject，并且会将第一个 reject 的返回值作为参数</font>**；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;第一个Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;第二个Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;第三个Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['第一个Promise', '第二个Promise', '第三个Promise']</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果 Promise 是 reject 那就会返回这个</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><font color="red"><strong>allSettled 方法</strong></font></p> <ul><li><font color="cornflowerblue">all 方法有一个缺陷：当有其中一个 Promise 变成 reject 状态时，新 Promise 就会立即变成对应的 reject 状态。</font> <ul><li>那么对于 resolved 的，以及依然处于 pending 状态的 Promise，我们是获取不到对应的结果的；</li></ul></li> <li>在 ES11（ES2020）中，添加了新的 API Promise.allSettled：
<ul><li>该方法<font color="orange">会在所有的 Promise 都有结果（settled），无论是 resolve，还是 rejected 时，才会有最终的状态</font>；</li> <li>并且<font color="orange">这个 Promise 的结果一定是 resolve 的</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;第一个Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;第二个Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;第三个Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{status: 'rejected', reason: '第一个Promise'},{status: 'fulfilled', value: '第二个Promise'}, {status: 'rejected', reason: '第三个Promise'}]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>打印的结果： <font color="cornflowerblue"> allSettled 的结果是一个数组，数组中存放着每一个 Promise 的结果，并且是对应一个对象的</font>；</p> <p><strong><font color="red">race 方法</font></strong></p> <ul><li><strong>如果有一个 Promise 有了结果，我们就希望决定最终新 Promise 的状态，那么可以使用 race 方法</strong></li> <li><font color="orange">race 是竞技、竞赛</font>的意思，表示<font color="orange">多个 Promise 相互竞争，谁先有结果，那么就使用谁的结果</font>；</li> <li><font color="orange">不管是 resolve 还是 reject , 谁执行数据返回的快，就执行那个结果</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;1111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;2222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;3333&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1111</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><font color="red"><strong>any 方法</strong></font></p> <ul><li><p>any 方法是<font color="cornflowerblue">ES12 中新增的方法</font>，和 race 方法是类似的</p> <ul><li><font color="orange">any 方法会等到一个 最快返回 和 resolve 状态，才会决定新 Promise 的状态</font>；</li> <li>如果<font color="orange">所有的 Promise 都是 reject 的，那么会报一个 AggregateError 的错误</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;1111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;2222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;3333&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//222</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err <span class="token operator">+</span> <span class="token string">&quot; err&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li></ul> <h2 id="es8-新特性"><a href="#es8-新特性" class="header-anchor">#</a> ES8 新特性</h2> <h3 id="object-valus"><a href="#object-valus" class="header-anchor">#</a> Object valus</h3> <ul><li>之前我们可以通过<font color="orange"> Object.keys</font> 获取<font color="orange">一个对象所有的 key</font></li> <li>在 ES8 中提供了 <font color="orange">Object.values</font> 来<font color="orange">获取所有的 value 值</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">1.88</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['lys', 18, 1.88]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['name', 'age', 'height']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="object-entries"><a href="#object-entries" class="header-anchor">#</a> <strong>Object entries</strong></h3> <p>通过 Object.entries 可以<font color="orange">获取到一个数组</font>,数组中<font color="orange">存放可枚举属性的键值对数组</font></p> <ul><li>可以针对<font color="orange">对象、数组、字符串</font>进行操作；</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">1.88</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  [['name','lys'], ['age', 18], ['height', 1.88]]</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['name', 'lys']</span>
  <span class="token comment">//  ['age', 18]</span>
  <span class="token comment">//  ['height', 1.88]</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token string">&quot;abcd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ ['0', 'a'],['1', 'b'],['2', 'c'],['3', 'd'] ]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="string-padding"><a href="#string-padding" class="header-anchor">#</a> String Padding</h3> <p>某些字符串我们需要对其进行前后的填充，来实现某种格式化效果，ES8 中增加了 <font color="orange">padStart 和 padEnd 方法，分别是对字符串
的首尾进行填充的</font>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str1 <span class="token operator">=</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str2 <span class="token operator">=</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str1<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 02</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str2<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 60</span>

<span class="token keyword">let</span> tel <span class="token operator">=</span> <span class="token string">&quot;15756593645&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> filterTEl <span class="token operator">=</span> tel<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span>tel<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>filterTEl<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 157********</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="trailing-commas"><a href="#trailing-commas" class="header-anchor">#</a> <strong>Trailing Commas</strong></h3> <p>在 ES8 中，我们允许在函数定义和调用时<font color="orange">多加一个逗号</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="es10-新特性"><a href="#es10-新特性" class="header-anchor">#</a> ES10 新特性</h2> <h3 id="flat-和-flatmap"><a href="#flat-和-flatmap" class="header-anchor">#</a> flat 和 flatMap</h3> <ul><li><p><strong>flat()</strong> <font color="orange">方法会按照一个可指定的深度递归遍历数组，并将所有元素与遍历到的子数组中的元素合并为一个新数组返回</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [10,20,5,8,[2,3],[9,22],100];</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [10, 20, 5, 8, 2, 3, 9, 22, 100]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p><strong>flatMap()</strong> <font color="orange">方法首先使用映射函数映射每个元素，然后将结果压缩成一个新数组</font></p> <ul><li>注意一：flatMap 是<font color="cornflowerblue">先进行 map 操作，再做 flat 的操作</font></li> <li>注意二：f<font color="cornflowerblue">latMap 中的 flat 相当于深度为 1；</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newValue <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [10,20,5,8,[2,3],[9,22],100];</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul> <h3 id="object-fromentries"><a href="#object-fromentries" class="header-anchor">#</a> Object_ fromEntries</h3> <ul><li>在前面，我们可以通过 Object.entries 将一个对象转换成 entries</li> <li>那么如果我们有一个 entries 了，如何将其转换成对象呢？
<ul><li>ES10<font color="orange">提供了 Object.formEntries 来完成转换</font>：</li></ul></li></ul> <p><strong>那么这个方法有什么应用场景?</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">1.88</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> entries <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  [['name','lys'], ['age', 18], ['height', 1.88]]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: 'lys', age: 18, height: 1.88}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> searchUrl <span class="token operator">=</span> <span class="token string">&quot;?name=lys&amp;age=18&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> searchParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>searchUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>searchParams<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: 'lys', age: '18'}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> searchParams<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['name', 'lys']</span>
  <span class="token comment">// ['age', '18']</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="trimstart-和-trimend"><a href="#trimstart-和-trimend" class="header-anchor">#</a> trimStart 和 trimEnd</h3> <ul><li><font color="cornflowerblue">去除一个字符串首尾的空格，我们可以通过 trim 方法，如果单独去除前面或者后面呢？</font> <ul><li>ES10 中给我们提供了<font color="orange">trimStart 和 trimEnd</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&quot;   Hello word    &quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Hello word</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">trimStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Hello word</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">trimEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//   Hello word</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="bigint"><a href="#bigint" class="header-anchor">#</a> BigInt</h3> <ul><li><p>在早期的 JavaScript 中，我<font color="cornflowerblue">们不能正确的表示过大的数字</font>：</p> <ul><li><p>大于<font color="orange">MAX_SAFE_INTEGER</font>的数值，表示的<font color="orange">可能是不正确的</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> maxInt <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>maxInt<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9007199254740991</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>maxInt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9007199254740992</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>maxInt <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9007199254740992</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li> <li><p>那么 ES11 中，<font color="orange">引入了新的数据类型 BigInt，用于表示大的整数</font></p> <ul><li><font color="orange"> BitInt 的表示</font>方法是在数值的<font color="orange"><strong>后面加上 n</strong></font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> bigInt <span class="token operator">=</span> <span class="token number">9007199254740991n</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bigInt <span class="token operator">+</span> <span class="token number">1n</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  9007199254740992n</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bigInt <span class="token operator">+</span> <span class="token number">2n</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  9007199254740993n</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h3 id="空值合并操作符"><a href="#空值合并操作符" class="header-anchor">#</a> ?? 空值合并操作符</h3> <p><strong>ES11 增加了 空值合并操作符</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result1 <span class="token operator">=</span> foo <span class="token operator">||</span> <span class="token string">&quot;默认值&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 默认值   || 这个符号就有缺点是 , 如果值为 0 , false &quot; &quot; ,这些值都是取后面的默认值</span>

<span class="token keyword">const</span> result2 <span class="token operator">=</span> foo <span class="token operator">??</span> <span class="token string">&quot;默认值&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="可选链"><a href="#可选链" class="header-anchor">#</a> ?? 可选链</h3> <p><font color="orange">可选链</font>也是<font color="orange">ES11 中新增一个特性</font>，主要作用是让我们的代码在<font color="orange">进行 null 和 undefined 判断时更加清晰</font>和简洁：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// run: function () {</span>
  <span class="token comment">//   console.log(this.name);</span>
  <span class="token comment">// },</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

obj<span class="token operator">?.</span>run<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj对象中没有这个函数,也不会报错,不会停止运行后面的代码</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="global-this"><a href="#global-this" class="header-anchor">#</a> Global This</h3> <ul><li>在之前我们希望获取<font color="cornflowerblue">JS 环境的全局对象，不同的环境获取的方式是不一样</font>的
<ul><li>比如在<font color="cornflowerblue">浏览器中可以通过 this、window 来获取</font>；</li> <li>比如在<font color="cornflowerblue">Node 中我们需要通过 global 来获取</font>；</li></ul></li> <li>在<font color="orange">ES11 中对获取全局对象进行了统一的规范：globalThis</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>globalThis<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="for-in-标准化"><a href="#for-in-标准化" class="header-anchor">#</a> for .. in 标准化</h3> <ul><li>在 ES11 之前，虽然很多浏览器支持<font color="orange">for...in 来遍历对象类型</font>，但是并没有被 ECMA 标准化</li> <li>在 ES11 中，对其进行了标准化，<font color="orange">for...in 是用于遍历对象的 key 的</font>：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">1.88</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  name  age  height</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="es12-新特性"><a href="#es12-新特性" class="header-anchor">#</a> ES12 新特性</h2> <h3 id="监听垃圾回收"><a href="#监听垃圾回收" class="header-anchor">#</a> 监听垃圾回收</h3> <ul><li><font color="orange">FinalizationRegistry </font><strong>对象可以让你在对象被垃圾回收时请求一个回调</strong>。
<ul><li>FinalizationRegistry 提供了这样的一种方法：当一个在注册表中<font color="orange">注册的对象被回收时</font>，请求在某个<font color="orange">时间点上调用一个清理回调</font>。（清理回调有时被称为 finalizer ）;</li> <li>你可以<font color="orange">通过调用 register 方法，注册任何你想要清理回调的对象，传入该对象和所含的值</font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">1.88</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FinalizationRegistry</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value <span class="token operator">+</span> <span class="token string">&quot; 已被垃圾回收了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

reg<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;obj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

obj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="weakrefs"><a href="#weakrefs" class="header-anchor">#</a> WeakRefs</h3> <ul><li>如果我们默认<font color="orange">将一个对象赋值给另外一个引用</font>，那么这个<font color="orange">引用是一个强引用</font>：
<ul><li>如果我们<font color="orange">希望是一个弱引用</font>的话，可以<font color="orange">使用 WeakRef</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakRef</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="逻辑赋值运算符"><a href="#逻辑赋值运算符" class="header-anchor">#</a> 逻辑赋值运算符</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 逻辑或运算符</span>
<span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
message <span class="token operator">=</span> message <span class="token operator">||</span> <span class="token string">&quot;Hello word&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello word</span>

<span class="token comment">// 2. 逻辑与操作符</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 3. 逻辑空运算符</span>
<span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> foo <span class="token operator">??</span> <span class="token string">&quot;默认值&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="es13-新特性"><a href="#es13-新特性" class="header-anchor">#</a> ES13 新特性</h2> <h3 id="method-at"><a href="#method-at" class="header-anchor">#</a> method.at()</h3> <ul><li>数组的 at 方法，它们是作为 ES13 中的新特性加入的：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cba&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;nba&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 处理数组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>names<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cba</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>names<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// nba</span>

<span class="token comment">//  处理字符串</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;hello coderlys&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// e</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// s</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="hasown-obj-propkey"><a href="#hasown-obj-propkey" class="header-anchor">#</a> hasOwn(obj,propKey)</h3> <p><font color="orange">Object 中新增了一个<strong>静态方法</strong>（类方法）： <strong>hasOwn(obj, propKey)</strong></font></p> <ul><li>方法用于<font color="cornflowerblue"><strong>判断一个对象中是否有某个自己的属性</strong></font></li></ul> <p>那么<strong>和之前学习的 Object.prototype.hasOwnProperty 有什么区别呢？</strong></p> <ul><li>区别一：<font color="orange">防止对象内部有重写 hasOwnProperty</font></li> <li>区别二：<font color="orange">对于隐式原型指向 null 的对象， hasOwnProperty 无法进行判断</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="迭代器"><a href="#迭代器" class="header-anchor">#</a> 迭代器</h2> <ul><li>迭代器 ( iterator ) ，使用户在<font color="cornflowerblue">容器对象（container，例如链表或数组）上遍访的对象</font>，使用该接口<font color="cornflowerblue">无需关心对象的内部实现细节</font> <ul><li>其行为<font color="cornflowerblue">像数据库中的光标</font>，迭代器最早出现在<font color="cornflowerblue">1974 年设计的 CLU 编程语言</font>中</li> <li>在各种编程语言的实现中，<font color="cornflowerblue">迭代器的实现方式各不相同</font>，但是<font color="cornflowerblue">基本都有迭代器，比如 Java、Python</font>等；</li></ul></li> <li><font color="cornflowerblue">从迭代器的定义我们可以看出来，迭代器是帮助我们对某个数据结构进行遍历的对象</font></li> <li>在 JS 中，<font color="cornflowerblue">迭代器也是一个具体的对象</font>，这个对象需要符合迭代器协议（iterator protocol）
<ul><li>迭代器协议定义了<font color="orange">产生一系列值（无论是有限还是无限个）的标准方式</font></li> <li>在 JS 中这个标准就是一个<font color="orange">特定的 next 方法</font></li></ul></li> <li>next 方法有如下的要求
<ul><li>一个<font color="orange">无参数或者一个参数的函数</font>，返回一个应当<font color="orange">拥有以下两个属性的对象</font></li> <li><font color="orange">done（boolean）</font> <ul><li>如果迭代器<font color="orange">可以产生序列中的下一个值，则为 false</font>。（这等价于没有指定 done 这个属性。）</li> <li>如果迭代器<font color="orange">已将序列迭代完毕，则为 true</font>。这种情况下，value 是可选的，如果它依然存在，即为迭代结束之后的默认返回值。</li></ul></li> <li><font color="orange">value</font> <ul><li>迭代器返回的任何 JavaScript 值。done 为 true 时可省略</li></ul></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> friends <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;lilei&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;kobe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;james&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> friendsIterator <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> friends<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> friends<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friendsIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {done: false, value: 'lilei'}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friendsIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {done: false, value: 'kobe'}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friendsIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {done: false, value: 'james'}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friendsIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {done: true, value: undefined}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>进行了封装，通用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> friends <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;lilei&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;kobe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;james&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">friendsIterator</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">value</span><span class="token operator">:</span> array<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token function">friendsIterator</span><span class="token punctuation">(</span>friends<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {done: false, value: 'lilei'}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {done: false, value: 'kobe'}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {done: false, value: 'james'}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {done: true}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>可迭代对象</strong></p> <ul><li>但是上面的代码整体来说看起来是有点奇怪的：
<ul><li>我们获取一个数组的时候，需要<font color="cornflowerblue">自己创建一个 index 变量</font>，<font color="cornflowerblue">再创建一个所谓的迭代器对象</font></li> <li>事实上<font color="cornflowerblue">我们可以对上面的代码进行进一步的封装，让其变成一个可迭代对象</font>；</li></ul></li> <li>什么又是可迭代对象呢？
<ul><li><font color="cornflowerblue">它和迭代器是不同的概念</font></li> <li>当一个对象<font color="cornflowerblue">实现了 iterable protocol 协议</font>时，它就是<font color="cornflowerblue">一个可迭代对象</font>；</li> <li>这个对象的要求是<font color="cornflowerblue">必须实现 @@iterator 方法</font>，在代码中我们<font color="cornflowerblue">使用 Symbol.iterator 访问该属性</font>；</li></ul></li> <li>当然我们要问一个问题，我们转成这样的一个东西有什么好处呢？
<ul><li>当<font color="cornflowerblue">一个对象变成一个可迭代对象</font>的时候，就可以<font color="cornflowerblue">进行某些迭代操作</font>；</li> <li>比如 <font color="cornflowerblue">for...of 操作</font>时，其实就会调用它的 @@iterator 方法；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> infos <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">1.88</span><span class="token punctuation">,</span>

  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> entries <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> iterator <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> entries<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> entries<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> iterator<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> infos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['name', 'lys'] , ['age', 18] , ['height', 1.88]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li><font color="cornflowerblue">事实上平时创建的很多原生对象已经实现了可迭代协议，会生成一个迭代器对象的</font> <ul><li>String、Array、Map、Set、arguments 对象、NodeList 集合</li></ul></li></ul> <h2 id="生成器"><a href="#生成器" class="header-anchor">#</a> 生成器</h2> <p><strong>什么是生成器?</strong></p> <ul><li>生成器是 ES6 中新增的一种<font color="orange">函数控制、使用</font>的方案，它可以让我们<font color="orange">更加灵活的控制函数什么时候继续执行、暂停执行</font>等。</li> <li>生成器函数也是一个函数，但是和普通的函数有一些区别：
<ul><li>首先，<font color="orange">生成器函数需要在 function 的后面加一个符号：*</font></li> <li>其次，<font color="orange">生成器函数可以通过 yield 关键字来控制函数的执行流程</font>：</li> <li>最后，<font color="orange">生成器函数的返回值是一个 Generator（生成器）</font>：
<ul><li><font color="orange">生成器事实上是一种特殊的迭代器</font>；</li></ul></li></ul></li></ul> <p><strong>生成器函数执行</strong></p> <ul><li>我们发现下面的生成器函数 foo 的执行体压根没有执行。
<ul><li>那么我们<font color="cornflowerblue">如何可以让它执行函数中的东西呢？</font><font color="orange">调用 next</font> 即可；</li> <li>我们之前学习迭代器时，知道<font color="orange">迭代器的 next 是会有返回值</font>的</li> <li>但是我们很多时候<font color="orange">不希望 next 返回的是一个 undefined，这个时候我们可以通过 yield 来返回结果</font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value1 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> value1<span class="token punctuation">;</span>

  <span class="token keyword">const</span> value2 <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> value2<span class="token punctuation">;</span>

  <span class="token keyword">const</span> value3 <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> value3<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> generator <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 100, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 200, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 300, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: undefined, done: true}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>生成器传递参数 - next 函数</strong></p> <ul><li><font color="orange">调用 next 函数的时候，可以<strong>给它传递参数</strong>，那么这个参数会作为上一个<strong>yield 语句的返回值</strong></font></li> <li>注意 : <font color="orange">也就是说我们是为本次的函数代码块执行提供了一个值</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value1 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">yield</span> value1<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7</span>

  <span class="token keyword">const</span> value2 <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">yield</span> value2<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>

  <span class="token keyword">const</span> value3 <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token keyword">yield</span> value3<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9</span>

  <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> generator <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 100, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 200, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 300, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: undefined, done: true}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>生成器提前结束 – return 函数</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value1 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  222</span>
  <span class="token keyword">const</span> value2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;bbb&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> value3 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> value4 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> generator <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 'lys', done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: '1', done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 'bbb', done: true}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  {value: undefined, done: true}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="async-、await、事件循环"><a href="#async-、await、事件循环" class="header-anchor">#</a> async 、await、事件循环</h2> <h3 id="async、await"><a href="#async、await" class="header-anchor">#</a> async、await</h3> <p><font color="red"><strong>异步函数 async function</strong></font></p> <ul><li><strong>async 关键字用于声明一个异步函数</strong>：
<ul><li>async 是 asynchronous 单词的缩写，异步、非同步</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Promise</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p><strong>异步函数有返回值时, 和普通函数会有区别</strong></p> <ul><li>情况一：<font color="orange">异步函数也可以有返回值，但是异步函数的返回值相当于被包裹到 Promise.resolve 中</font></li> <li>情况二：<font color="orange">如果我们的异步函数的返回值是 Promise，状态由会由 Promise 决定</font></li> <li>情况三：<font color="orange">如果我们的异步函数的返回值是一个对象并且实现了 thenable，那么会由对象的 then 方法来决定</font></li></ul></li> <li><p><strong>如果我们在 async 中抛出了异常，那么程序它并不会像普通函数一样报错，而是会作为 Promise 的 reject 来传递；</strong>、</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;12313&quot;</span><span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  &quot;12313&quot;.filters is not a function</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <p><font color="red"><strong>await 关键字</strong></font></p> <ul><li><p><font color="orange">async 函数另外一个特殊之处</font>就是可以在它内部<font color="orange">使用 await 关键字</font>，而<font color="orange">普通函数中是不可以</font>的</p></li> <li><p>await 关键字有什么特点呢？</p> <ul><li>通常使用 await 是后面会<font color="orange">跟上一个表达式</font>，这个表达式会<font color="orange">返回一个 Promise</font>；</li> <li>那么 await 会<font color="orange">等到 Promise 的状态变成 fulfilled 状态</font>，之后<font color="orange">继续执行异步函数</font>；</li></ul></li> <li><p>如果 await 后面<font color="orange">是一个普通的值</font>，那么会<font color="orange">直接返回这个值</font>；</p></li> <li><p>如果 await 后面是一个<font color="orange">thenable 的对象</font>，那么会根据对象的<font color="orange">then 方法调用来决定后续的值</font>；</p></li> <li><p>如果 await 后面的表达式，返回的 Promise 是<font color="orange">reject 的状态</font>，那么会将这个<font color="orange">reject 结果直接作为函数的 Promise 的 reject 值</font>；</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// url</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123</span>
<span class="token punctuation">}</span>
<span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="进程-和-线程"><a href="#进程-和-线程" class="header-anchor">#</a> 进程 和 线程</h3> <ul><li><p>线程和进程是操作系统中的两个概念：</p> <ul><li><font color="orange">进程</font> ：计算机<font color="orange">已经运行的程序，是操作系统管理程序</font>的一种方式；</li> <li><font color="orange">线程 </font>：操作系统能够运行<font color="orange">运算调度的最小单位</font>，通常情况下<font color="orange">它被包含在进程中</font></li></ul></li> <li><p>听起来很抽象，这里还是给出我的解释</p> <ul><li><font color="orange">进程</font> ：我们可以认为，启动<font color="orange">一个应用程序</font>，就会默认<font color="orange">启动一个进程</font>（也可能是多个进程）；</li> <li><font color="orange">线程</font> ：每<font color="orange">一个进程</font>中，都会启动<font color="orange">至少一个线程</font>用来执行程序中的代码，这个线程被称之为<font color="orange">主线程</font>；</li></ul></li> <li><p>再用一个形象的例子解释：</p> <ul><li>操作系统类似于一个大工厂</li> <li>工厂中里有很多车间，这个车间就是进程</li> <li>每个车间可能有一个以上的工人在工厂，这个工人就是线程；</li></ul></li></ul> <img src="./images/JS/操作系统-进程-线程.jpg"> <p><strong>操作系统的工作方式</strong></p> <ul><li>操作系统是如何做到同时让多个进程（边听歌、边写代码、边查阅资料）同时工作呢
<ul><li>这是因为<font color="cornflowerblue">CPU 的运算速度非常快</font>，它可以<font color="cornflowerblue">快速的在多个进程之间迅速的切换</font>；</li> <li>当我们<font color="cornflowerblue">进程中的线程</font>获取到<font color="cornflowerblue">时间片</font>时，就可以<font color="cornflowerblue">快速执行我们编写的代码</font>；</li> <li>对于用户来说<font color="cornflowerblue">是感受不到这种快速的切换</font>的</li></ul></li></ul> <p><strong>浏览器中的 JS 线程</strong></p> <ul><li>我们经常会说<font color="cornflowerblue">JS 是单线程</font>（可以开启 workers）的，但是<font color="cornflowerblue">JS 的线程应该有自己的容器进程</font>：浏览器或者 Node。</li> <li><strong>浏览器是一个进程吗，它里面只有一个线程吗？</strong> <ul><li>目前<font color="orange">多数的浏览器其实都是多进程</font>的，当我们<font color="orange">打开一个 tab 页面时就会开启一个新的进程</font>，这是为了<font color="orange">防止一个页面卡死而造成所有页面无法响应</font>，整个浏览器需要强制退出；</li> <li><font color="orange">每个进程中又有很多的线程</font>，其中<font color="orange">包括执行 JavaScript 代码的线程</font>；</li></ul></li> <li><strong>JS 的代码执行是在一个单独的线程中执行的</strong>：
<ul><li>这就意味着 JavaScript 的代码，在<font color="cornflowerblue">同一个时刻只能做一件事</font>；</li> <li>如果<font color="cornflowerblue">这件事是非常耗时</font>的，就意味着当前的线程就<font color="cornflowerblue">会被阻塞</font>；</li></ul></li> <li><strong>所以真正耗时的操作，实际上并不是由 JavaScript 线程在执行的</strong>：
<ul><li>浏览器的每个进程是多线程的，那么<font color="cornflowerblue">其他线程可以来完成这个耗时的操作</font>；</li> <li>比如<font color="cornflowerblue">网络请求、定时器</font>，我们只需要在特性的时候执行应该有的回调即可；</li></ul></li></ul> <h3 id="事件循环"><a href="#事件循环" class="header-anchor">#</a> 事件循环</h3> <p>如果在<font color="orange">执行 JS 代码的过程中，有异步操作，会加入到事件循环</font>里。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 50</span>
<span class="token comment">// setTimeout</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><font color="red"><strong>宏任务和微任务</strong></font></p> <p><strong>事件循环是有两个队列：</strong></p> <ul><li><font color="orange">宏任务队列</font> ：ajax 、setTimeout、setInterval、DOM 监听、UI Rendering</li> <li><font color="orange">微任务队列</font> ：Promise 的 then 回调 、Mutation Observer API、queueMicrotask()等</li></ul> <p>事件循环对于两个队列的优先级是怎么样的呢？</p> <ul><li><font color="orange">先运行完 非异步代码的,执行完了 , 再运行事件循环</font></li> <li>在<font color="orange">每次执行任何一个宏任务之前</font>，<font color="orange">都会<strong>先查看微任务队列中是否有任务需要执行, 如果有就运行完微任务队列在   运行 宏任务。</strong></font> <ul><li>也就是宏任务执行之前，必须保证微任务队列是空的；</li> <li>如果不为空，那么就优先执行微任务队列中的任务</li></ul></li></ul> <p><strong>面试题一</strong></p> <img src="./images/JS/面试题一-画图.png"> <p><strong>面试题二</strong></p> <img src="./images/JS/面试题二-画图.png"> <h2 id="代码异常处理"><a href="#代码异常处理" class="header-anchor">#</a> 代码异常处理</h2> <h3 id="throw-关键字"><a href="#throw-关键字" class="header-anchor">#</a> <strong>throw 关键字</strong></h3> <ul><li><font color="orange"> throw 抛出一个异常错误，throw 表达式就是在 throw 后面可以跟上一个表达式来表示具体的异常信息</font></li> <li>throw 关键字可以跟上哪些类型呢？
<ul><li><font color="orange">基本数据类型</font>：比如 number、string、Boolean</li> <li><font color="orange">对象类型</font>：对象类型可以包含更多的信息</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> num1 <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> num2 <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token string">&quot;type error: 必须是number类型&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span> <span class="token number">321</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Uncaught type error: 必须是number类型</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;_____________&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 后面代码就不会执行</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="error-类型"><a href="#error-类型" class="header-anchor">#</a> Error 类型</h3> <p><font color="orange">Error 可以 错误函数的调用栈以及位置信息</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> num1 <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> num2 <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;type error: 必须是number类型&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>Error 包含三个属性：
<ul><li>messsage：创建 Error 对象时传入的 message；</li> <li>name：Error 的名称，通常和类的名称一致</li> <li>stack：整个 Error 的错误信息，包括函数的调用栈，当我们直接打印 Error 对象时，打印的就是 stack；</li></ul></li></ul> <h3 id="异常的处理"><a href="#异常的处理" class="header-anchor">#</a> <strong>异常的处理</strong></h3> <ul><li><p><font color="orange">之前的代码中，一个函数抛出了异常，后面代码就是终止了 不会执行后面</font>。</p> <ul><li>这个函数<font color="cornflowerblue">抛出了异常</font>，但是我们<font color="cornflowerblue">并没有对这个异常进行处理</font>，那么这个<font color="cornflowerblue">异常会继续传递到上一个函数调用中</font>；</li> <li>而如果<font color="orange">到了最顶层（全局）的代码中依然没有对这个异常的处理代码</font>，这个时候就<font color="orange">会报错并且终止程序的运行</font>；</li></ul></li> <li><p>我们先来看一下这段代码的异常传递过程：</p> <ul><li>foo 函数在被执行时会抛出异常，也就是我们的 bar 函数会拿到这个异常；</li> <li>但是 bar 函数并没有对这个异常进行处理，那么这个异常就会被继续传递到调用 bar 函数的函数，也就是 test 函数；</li> <li>但是 test 函数依然没有处理，就会继续传递到我们的全局代码逻辑中；</li> <li>依然没有被处理，这个时候程序会终止执行，后续代码都不会再执行了；</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;error message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;--------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul> <p><strong>异常的捕获</strong></p> <ul><li>但是很多情况下<font color="orange">当出现异常时，我们并不希望程序直接推出，而是希望可以正确的处理异常</font> <ul><li>这个时候我们就<font color="orange">可以使用<strong>try catch</strong></font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;error message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;--------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li><p>在 ES10（ES2019）中，<font color="cornflowerblue">catch 后面绑定的 error 可以省略</font></p></li> <li><p>当然，如果有一些必须要执行的代码<font color="cornflowerblue">，我们可以使用 finally 来执行</font>：</p> <ul><li><font color="orange">finally 表示最终一定会被执行的代码结构</font></li> <li>注意：<font color="cornflowerblue">如果 try 和 finally 中都有返回值，那么会使用 finally 当中的返回值</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;都会执行的&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h2 id="storage、正则表达式"><a href="#storage、正则表达式" class="header-anchor">#</a> storage、正则表达式</h2> <h3 id="storage-2"><a href="#storage-2" class="header-anchor">#</a> storage</h3> <ul><li><font color="orange">localStorage</font>：本地存储，提供的是一种<font color="orange">永久性的存储方法</font>，在<font color="cornflowerblue">关闭掉网页重新打开时，存储的内容依然保留</font></li> <li><font color="orange">sessionStorage</font>：会话存储，提供的是<font color="orange">本次会话的存储</font>，在<font color="cornflowerblue">关闭掉会话时，存储的内容会被清除</font></li></ul> <p><strong>localStorage 和 sessionStorage 的区别</strong></p> <ul><li>验证一：<font color="cornflowerblue">关闭网页后重新打开，localStorage 会保留，而 sessionStorage 会被删除</font>；</li> <li>验证二：<font color="cornflowerblue">在页面内实现跳转，localStorage 会保留，sessionStorage 也会保留</font>；</li> <li>验证三：<font color="cornflowerblue">在页面外实现跳转（打开新的网页），localStorage 会保留，sessionStorage 不会被保留</font>；</li></ul> <h3 id="storage-常见的方法和属性"><a href="#storage-常见的方法和属性" class="header-anchor">#</a> Storage 常见的方法和属性</h3> <ul><li>属性
<ul><li><font color="orange">Storage.length</font>：只读属性
<ul><li><font color="cornflowerblue">返回一个整数，表示存储在 Storage 对象中的数据项数量</font></li></ul></li></ul></li> <li>方法
<ul><li><font color="orange">Storage.key(index)</font>：该方法接受一个<font color="cornflowerblue">数值 n 作为参数</font>，<font color="cornflowerblue">返回存储中的第 n 个 key 名称</font>；</li> <li><font color="orange">Storage.getItem(key)</font>：该方法接受一个<font color="cornflowerblue">key 作为参数</font>，并且<font color="cornflowerblue">返回 key 对应的 value</font>；</li> <li><font color="orange">Storage.setItem(key , value)</font>：该方法接受一个 key 和 value，并且将<font color="cornflowerblue">会把 key 和 value 添加到存储</font>中。
<ul><li>如果<font color="cornflowerblue">key 之前已经被存储，则更新其对应的值</font></li></ul></li> <li><font color="orange">Storage.removeItem()</font>：该方法接受一个 key 作为参数，并把<font color="cornflowerblue">该 key 从存储中删除</font>；</li> <li><font color="orange">Storage.clear()</font>：该方法的作用是<font color="cornflowerblue">清空存储中的所有 key</font>；</li></ul></li></ul> <p><strong>封装 工具类</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Cache</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">isLocal <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isLocal <span class="token operator">=</span> isLocal <span class="token operator">?</span> localStorage <span class="token operator">:</span> sessionStorage<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">setCache</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;value error: value必须有值!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isLocal<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">getCache</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isLocal<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">removeCache</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isLocal<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    localCache<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> localCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sessionCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cache</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h3> <ul><li>正则表达式 ：又称正则表示式、正则表示法、规则表达式、常规表示法</li> <li>正则表达式使用<font color="cornflowerblue">单个字符串来描述、匹配一系列匹配某个句法规则的字符串</font></li> <li>简单概况：<font color="orange">正则表达式是一种字符串匹配利器，可以帮助我们搜索、获取、替代字符串</font>；</li></ul> <p>正则表达式使用 RegExp 类来创建,也有对应的字面量的方式</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> re1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> re2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">hello</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>正则表达式的使用方法</strong></p> <ul><li>JS 的正则表达式被用于 RegExp 的 exec 的 <font color="orange">test </font>方法</li> <li>也包括 String 的 <font color="orange">match</font>、matchAll、replace、search 和 split 方法；</li></ul> <table><thead><tr><th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>exec</td> <td>一个在字符串中执行查找匹配的 RegExp 方法，它返回一个数组（未匹配到则返回 null）。</td></tr> <tr><td><font color="orange"><strong>test</strong></font></td> <td><font color="orange">一个在字符串中测试是否匹配的 RegExp 方法，它返回 true 或 false。</font></td></tr> <tr><td><font color="orange"><strong>match</strong></font></td> <td><font color="orange">一个在字符串中执行查找匹配的 String 方法，它返回一个数组，在未匹配到时会返回 null。</font></td></tr> <tr><td>matchAll</td> <td>一个在字符串中执行查找所有匹配的 String 方法，它返回一个迭代器（iterator）。</td></tr> <tr><td>search</td> <td>一个在字符串中测试匹配的 String 方法，它返回匹配到的位置索引，或者在失败时返回-1。</td></tr> <tr><td>replace</td> <td>一个在字符串中执行查找匹配的 String 方法，并且使用替换字符串替换掉匹配到的子字符串。</td></tr> <tr><td>split</td> <td>一个使用正则表达式或者一个固定字符串分隔一个字符串，并将分隔后的子字符串存储到数组中的 String 方法。</td></tr></tbody></table> <p><strong>常见的修饰符的使用</strong></p> <ul><li><strong><font color="orange">g</font></strong> 全部的、给我匹配全部的</li> <li><strong><font color="orange">i</font></strong> 忽略大小写</li> <li><strong><font color="orange">m</font></strong> 多行匹配</li></ul> <p>例如 将一个字符串中所有的 abc 换成大写</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">&quot;Hello ABC, abc ABc , AAabc&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> jg <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">abc</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">&quot;ABC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello ABC, ABC ABC , AAABC</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>字符类</strong></p> <table><thead><tr><th>字符</th> <th>含义</th></tr></thead> <tbody><tr><td>\d（“d” 来自 “digit”）</td> <td>数字：从 0 到 9 的字符。</td></tr> <tr><td>\s（“s” 来自 “space”）</td> <td>空格符号：包括空格，制表符 \t，换行符 \n 和其他少数稀有字符，例如 \v，\f 和 \r。</td></tr> <tr><td>\w（“w” 来自 “word”）</td> <td>“单字”字符：拉丁字母或数字或下划线 _。</td></tr> <tr><td>.（点）</td> <td>点 . 是一种特殊字符类，它与 “除换行符之外的任何字符” 匹配</td></tr></tbody></table> <p><strong>反向类</strong></p> <table><thead><tr><th>字符</th> <th>含义</th></tr></thead> <tbody><tr><td>\D 非数字</td> <td>除 \d 以外的任何字符，例如字母。</td></tr> <tr><td>\S 非空格符号</td> <td>除 \s 以外的任何字符，例如字母。</td></tr> <tr><td>\W 非单字字符</td> <td>除 \w 以外的任何字符，例如非拉丁字母或空格。</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&quot;CSS2.5&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">CSS\d(\.)(\d)?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['CSS2.5', '.', '5']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>锚点</strong></p> <ul><li><p><font color="orange">符号 <strong>^</strong> 和符号 <strong>$</strong> 在正则表达式中具有特殊的意义，它们被称为“锚点”</font>。</p> <ul><li><strong>符号 ^ 匹配文本开头</strong>；</li> <li><strong>符号 $ 匹配文本末尾</strong></li></ul></li> <li><p>词边界</p> <ul><li>词边界 <font color="orange">\b</font> 是一种检查，就像 ^ 和 $ 一样，它会检查字符串中的位置是否是词边界。</li> <li>词边界测试 \b 检查位置的一侧是否匹配 \w，而另一侧则不匹配 “\w”</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&quot;now time 22:45, number is 123.456&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> timePattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b\d\d:\d\d\b</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>timePattern<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 22:45</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>转义字符串</strong></p> <ul><li><p>如果要把特殊字符作为常规字符来使用 ， 需要对其进行转义</p> <ul><li>只需要在它前面加个<font color="orange">反斜杠</font> <font color="orange">\</font></li></ul></li> <li><p>常见的需要转义的字符</p> <ul><li><div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>[] \ ^ $ . | ? * + ( )
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>斜杠符号 ‘/’ 并不是一个特殊符号，但是在字面量正则表达式中也需要转义</p></li></ul></li> <li><p>练习：匹配所有以.js 或者 jsx 结尾的文件名</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fileNames <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;abc.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;cba.java&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;nba.html&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;mba.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;aaa.jsx&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;aaa.jsa&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> fileNames<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jsx?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['abc.js', 'mba.js', 'aaa.jsx']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul></li></ul> <p><strong>集合 和 范围</strong></p> <p><font color="orange">集合</font></p> <ul><li>有时候我们只要选择多个匹配字符的其中之一就可以
<ul><li>在<font color="cornflowerblue">方括号 […] 中的几个字符或者字符类意味着“搜索给定的字符中的任意一个</font>”</li></ul></li> <li>比如说，<font color="cornflowerblue">[eao] 意味着查找在 3 个字符 ‘a’、‘e’ 或者 `‘o’ 中的任意一个</font>；</li></ul> <p><font color="orange">范围</font></p> <ul><li><font color="cornflowerblue">方括号也可以包含字符范围</font></li> <li><font color="cornflowerblue">[a-z] 会匹配从 a 到 z</font> 范围内的字母，<font color="cornflowerblue">[0-5] 表示从 0 到 5 </font>的数字；</li> <li><font color="cornflowerblue">[0-9A-F] </font>表示两个范围：它搜索一个字符，<font color="cornflowerblue">满足数字 0 到 9 或字母 A 到 F</font>；</li> <li>\d —— 和 [0-9] 相同；</li> <li>\w —— 和 [a-zA-Z0-9_] 相同；</li></ul> <p>案例 : 匹配手机号码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> phonePettern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[356789]\d{9}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>量词</strong></p> <ul><li><p>所需要的数量的词被称为<font color="cornflowerblue">量词</font></p></li> <li><p>数量 { n }</p> <ul><li><font color="orange">确切的位数 { 5 }</font></li> <li><font color="orange">某个范围的位数 { 3 , 5 }</font></li></ul></li> <li><p>缩写</p> <ul><li><font color="orange">+代表 一个或多个</font> , 相当于 { 1, }</li> <li><font color="orange">?代表 零个或一个</font> , 相当于 { 0,1 } 换句说 , 它使得符号变得可选</li> <li><font color="orange">*代表 零个或多个</font> ，相当于 {0,}。也就是说，这个字符可以多次出现或不出现</li></ul></li></ul> <p>案例：匹配标签</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> htmlElement <span class="token operator">=</span> <span class="token string">&quot;&lt;div&gt;&lt;p&gt;哈哈哈&lt;/p&gt;&lt;span&gt;呵呵&lt;/span&gt;&lt;/div&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tagPattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;\/?[a-z][a-z0-9]*&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>htmlElement<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>tagPattern<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['&lt;div&gt;', '&lt;p&gt;', '&lt;/p&gt;', '&lt;span&gt;', '&lt;/span&gt;', '&lt;/div&gt;']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>贪婪 和 惰性</strong></p> <ul><li>如果我们有这样一个需求：匹配下面字符串中所有使用《》包裹的内容</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&quot;我最喜欢的这两本书: 《黄金时代》和《沉默的大多数》&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?:《)(.*?)(?:》)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 黄金时代   沉默的大多数</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>捕获组</strong></p> <ul><li>模式的一部分可以用<font color="orange">括号括起来 (...)</font>，这称为“捕获组（capturing group）”</li> <li>这有两个作用：
<ul><li>它允许将<font color="cornflowerblue">匹配的一部分作为结果数组中的单独项</font>；</li> <li>它将<font color="cornflowerblue">括号视为一个整体</font>；</li></ul></li> <li>方法 str.match(regexp)，如果 regexp <font color="cornflowerblue">没有 g 标志，将查找第一个匹配并将它作为一个数组返回</font>font&gt;：
<ul><li>在索引 0 处：完全匹配。</li> <li>在索引 1 处：第一个括号的内容。</li> <li>在索引 2 处：第二个括号的内容</li></ul></li></ul> <p>补充</p> <ul><li>or 是正则表达式中的一个术语，实际上是一个简单的“或
<ul><li>在正则表达式中，它用竖线 | 表示；</li></ul></li></ul> <p>更多正则查询：https://c.runoob.com/front-end/854/</p> <p><font color="orange">案例练习 - 歌词解析</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> lyricLineStrings <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lyricLines <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
lyricLineStrings<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[(\d{2}):(\d{2}).(\d{2,3})\]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> timePattern <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timePattern<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> time1 <span class="token operator">=</span> timePattern<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> time2 <span class="token operator">=</span> timePattern<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> time3 <span class="token operator">=</span>
    timePattern<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">?</span> timePattern<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">:</span> timePattern<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> time <span class="token operator">=</span> time1 <span class="token operator">+</span> time2 <span class="token operator">+</span> time3<span class="token punctuation">;</span>
  <span class="token keyword">let</span> content <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regexp<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  lyricLines<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> time<span class="token punctuation">,</span> content <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><font color="orange">案例练习 - 时间格式化</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> endTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&quot;2022/12/31 23:00:00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">formatDate</span><span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> format</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;y+&quot;</span><span class="token operator">:</span> data<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;M+&quot;</span><span class="token operator">:</span> data<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;d+&quot;</span><span class="token operator">:</span> data<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;h+&quot;</span><span class="token operator">:</span> data<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;m+&quot;</span><span class="token operator">:</span> data<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;s+&quot;</span><span class="token operator">:</span> data<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>regexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>format<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      format <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regexp<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> format<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>endTime<span class="token punctuation">,</span> <span class="token string">&quot;yyyy/MM/dd/hh:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2022/12/31/23:00:00</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="防抖-和-节流-函数"><a href="#防抖-和-节流-函数" class="header-anchor">#</a> 防抖 和 节流 函数</h2> <p><strong>认识防抖和节流函数</strong></p> <ul><li>防抖和节流的概念其实最早并不是出现在软件工程中，防抖是出现在电子元件中，节流出现在流体流动中
<ul><li>JS 是事件驱动, <font color="cornflowerblue">大量的操作会触发事件，加入到事件队列中处理</font>。</li> <li>而对于某些<font color="cornflowerblue">频繁的事件处理会造成性能的损耗</font>，我们就可以通过<font color="cornflowerblue">防抖和节流来限制事件频繁的发生</font>；</li></ul></li></ul> <h3 id="认识防抖函数"><a href="#认识防抖函数" class="header-anchor">#</a> 认识防抖函数</h3> <ul><li>当<font color="orange">事件触发时，相应的函数并不会立即触发，而是会等待一定的时间</font>；</li> <li>当事件密集触发时，函数的触发会被频繁的推迟</li> <li>只<font color="orange">有等待了一段时间也没有事件触发，才会真正的执行响应函数</font>；</li></ul> <img src="./images/JS/防抖函数.jpg"> <p>防抖的应用场景很多：</p> <ul><li>➢ 输入框中频繁的输入内容，搜索或者提交信息</li> <li>➢ 频繁的点击按钮，触发某个事件；</li> <li>➢ 监听浏览器滚动事件，完成某些特定操作</li> <li>➢ 用户缩放浏览器的 resize 事件；</li></ul> <p><font color="cornflowerblue">使用第三方库 Underscore</font> 实现防抖</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> ipt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.ipt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ipt<span class="token punctuation">.</span>oninput <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">debounce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;发送网络请求&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><font color="cornflowerblue">自己手写封装 </font> 实现防抖</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> inputEL <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.ipt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> btnEL <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delayTime<span class="token punctuation">,</span> immediate <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> isInvoke <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>argm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isInvoke<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> argm<span class="token punctuation">)</span><span class="token punctuation">;</span>
      isInvoke <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    time <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> argm<span class="token punctuation">)</span><span class="token punctuation">;</span>
      time <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      isInvoke <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delayTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  fun<span class="token punctuation">.</span><span class="token function-variable function">close</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> fun<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> debounceFn <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;发送网络请求&quot;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inputEL<span class="token punctuation">.</span>oninput <span class="token operator">=</span> debounceFn<span class="token punctuation">;</span>
btnEL<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  debounceFn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="认识节流函数"><a href="#认识节流函数" class="header-anchor">#</a> 认识节流函数</h3> <ul><li>节流的过程
<ul><li>当事件触发时, 会执行这个事件的响应函数</li> <li>如果这个事件会被频繁触发，那么节流函数会按照一定的频率来执行函数</li> <li><font color="orange">不管在这个中间有多少次触发这个事件，执行函数的频繁总是固定的</font>；</li></ul></li></ul> <img src="./images/JS/节流函数.jpg"> <p>节流的应用场景</p> <ul><li><font color="cornflowerblue">监听页面的滚动事件</font></li> <li><font color="cornflowerblue">用户频繁点击按钮操作</font></li> <li><font color="cornflowerblue">游戏中的一些设计</font> ( 比如 1 秒钟只能发射一次，即使用户在这 1 秒钟按下了 10 次，子弹会保持发射一颗的频率来发射 )</li></ul> <p><font color="cornflowerblue">使用第三方库 Underscore</font> 实现节流</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> inputEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inputEl<span class="token punctuation">.</span>oninput <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;节流函数触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><font color="cornflowerblue">自己手写封装 </font> 实现节流</p> <p>(基本实现流程)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delayTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> startTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>argm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取当前时间</span>
    <span class="token keyword">let</span> currentTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 计算需要等待的时间执行函数</span>
    <span class="token keyword">let</span> time <span class="token operator">=</span> delayTime <span class="token operator">-</span> <span class="token punctuation">(</span>currentTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> argm<span class="token punctuation">)</span><span class="token punctuation">;</span>
      startTime <span class="token operator">=</span> currentTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> fun<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
inputEl<span class="token punctuation">.</span>oninput <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;节流函数触发&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>(对节流函数第一次是否执行函数控制)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delayTime<span class="token punctuation">,</span> leading <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> startTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>argm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> currentTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  获取当前时间</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>leading <span class="token operator">&amp;&amp;</span> startTime <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 对立即执行进行控制</span>
      startTime <span class="token operator">=</span> currentTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> time <span class="token operator">=</span> delayTime <span class="token operator">-</span> <span class="token punctuation">(</span>currentTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 计算需要等待的时间执行函数</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> argm<span class="token punctuation">)</span><span class="token punctuation">;</span>
      startTime <span class="token operator">=</span> currentTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  fun<span class="token punctuation">.</span><span class="token function-variable function">closeThrottle</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    startTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;取消&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> fun<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;节流函数触发&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inputEl<span class="token punctuation">.</span>oninput <span class="token operator">=</span> f<span class="token punctuation">;</span>
btnEl<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  f<span class="token punctuation">.</span><span class="token function">closeThrottle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="underscore-库的介绍"><a href="#underscore-库的介绍" class="header-anchor">#</a> underscore 库的介绍</h3> <ul><li><p>事实上我们可以通过一些第三方库来实现防抖操作：</p> <ul><li><font color="orange">lodash</font></li> <li><font color="orange">underscore</font></li></ul></li> <li><p>这里使用 underscore</p> <ul><li>我们可以理解成 lodash 是 underscore 的升级版，它更重量级，功能也更多；</li> <li>但是目前我看到 underscore 还在维护，lodash 已经很久没有更新了；</li></ul></li> <li><p>Underscore 的官网： https://underscorejs.org/</p></li> <li><p>Underscore 的安装有很多种方式：</p> <ul><li>下载 Underscore，本地引入；</li> <li>通过 CDN 直接引入；</li> <li>通过包管理工具（npm）管理安装；</li></ul></li></ul> <h2 id="深拷贝-和-浅拷贝"><a href="#深拷贝-和-浅拷贝" class="header-anchor">#</a> 深拷贝 和 浅拷贝</h2> <ul><li><p><strong>引入的赋值</strong> : <font color="cornflowerblue">指向同一个对象，相互之间会影响</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj1 <span class="token operator">=</span> info<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: 'lys', age: 18}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li> <li><p><strong>对象的浅拷贝</strong> : <font color="cornflowerblue">只是浅层的拷贝，内部引入对象时，依然会相互影响</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">friend</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;kobe&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> info2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>info <span class="token punctuation">}</span><span class="token punctuation">;</span>
info2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;coderlys&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// coderlys</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lys</span>

info2<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;coderkobe&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info2<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// coderkobe</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// coderkobe</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ul></li> <li><p>**对象深拷贝 ** : <font color="cornflowerblue">两个对象不再有任何关系，不会相互影响</font></p> <ul><li><p>方法一 : 使用 JSON.parse 和 JSON.stringify</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">friend</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;kobe&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> info2 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

info2<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;coderkobe&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info2<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// coderkobe</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// kobe</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>注意 :</p></li> <li><p>这种<font color="orange">深拷贝的方式其实对于函数、Symbol 等是无法处理</font>的</p></li> <li><p>并且<font color="orange">如果存在对象的循环引用，也会报错</font>的；</p></li></ul></li> <li><p>自定义深拷贝函数</p> <p>( 基础版本 )</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> valueType <span class="token operator">=</span> <span class="token keyword">typeof</span> value<span class="token punctuation">;</span>
  <span class="token keyword">return</span> value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> valueType <span class="token operator">==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">copy</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> info2 <span class="token operator">=</span> <span class="token function">copy</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
info2<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;coderkobe&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info2<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// coderkobe</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// kobe</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>(最终版本)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> valueType <span class="token operator">=</span> <span class="token keyword">typeof</span> value<span class="token punctuation">;</span>
  <span class="token keyword">return</span> value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> valueType <span class="token operator">==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">copy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果值为 Symbol 类型的,进行对应的操作</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">==</span> <span class="token string">&quot;symbol&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Symbol</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 1. 如果是原型类型, 直接返回</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 判断是否Set类型的</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Set</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> newSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">of</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      newSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">copy</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> newSet<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 2. 如果是对象类型, 才需要创建对象</span>
  <span class="token keyword">let</span> newObj <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> newObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">copy</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 单独处理 Symbol</span>
  <span class="token keyword">let</span> symbolKeys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> symbolKeys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    newObj<span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">copy</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div></li></ul></li></ul> <h2 id="自定义事件总线"><a href="#自定义事件总线" class="header-anchor">#</a> 自定义事件总线</h2> <ul><li><p>自定义事件总线属于一种观察者模式，其中包括三个角色：</p> <ul><li>发布者（Publisher）：发出事件（Event）；</li> <li>订阅者（Subscriber）：订阅事件（Event），并且会进行响应（Handler）；</li> <li>事件总线（EventBus）：无论是发布者还是订阅者都是通过事件总线作为中台的；</li></ul></li> <li><p>当然我们可以选择一些第三方的库</p> <ul><li>Vue2 默认是带有事件总线的功能；</li> <li>Vue3 中推荐一些第三方库，比如 mitt</li></ul></li> <li><p>当然我们也可以实现自己的事件总线：</p> <ul><li>事件的<font color="orange">监听方法 on</font>；</li> <li>事件的<font color="orange">发射方法 emit</font>；</li> <li>事件的<font color="orange">取消监听 off</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">evnentBus</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>fnNames <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">fnName<span class="token punctuation">,</span> <span class="token operator">...</span>agrm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> eventFns <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fnNames<span class="token punctuation">[</span>fnName<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>eventFns<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> fn <span class="token keyword">of</span> eventFns<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>agrm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">fnName<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>fnNames<span class="token punctuation">[</span>fnName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>fnNames<span class="token punctuation">[</span>fnName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>fnNames<span class="token punctuation">[</span>fnName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">off</span><span class="token punctuation">(</span><span class="token parameter">fnName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> eventFns <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fnNames<span class="token punctuation">[</span>fnName<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>eventFns<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fnNames<span class="token punctuation">[</span>fnName<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> eB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">evnentBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

navClickBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  eB<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;navClick&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
headerClickBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  eB<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;headerClick&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

eB<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;navClick&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;发送navClick监听的事件1&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;参数 &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

eB<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;headerClick&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;发送headerClick监听的事件1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cancelNavClickBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  eB<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&quot;navClick&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h2 id="js-网络编程"><a href="#js-网络编程" class="header-anchor">#</a> JS 网络编程</h2> <h3 id="前端数据请求方式"><a href="#前端数据请求方式" class="header-anchor">#</a> 前端数据请求方式</h3> <p><font color="red"><strong>服务器端渲染</strong></font></p> <img src="./images/JS/服务器端渲染.png"> <p><font color="red"><strong>前后端分离渲染</strong></font></p> <img src="./images/JS/前后端分离渲染.png"> <p><font color="red"><strong>前后端分离的优势</strong></font></p> <ul><li><p><font color="cornflowerblue">早期的网页都是通过后端渲染来完成的：服务器端渲染</font>（SSR，server side render）</p> <ul><li>客户端发送请求 -&gt; 服务端接收请求并返回相应 HTML 文档 -&gt; 页面刷新，客户端加载新的 HTML 文档；</li></ul></li> <li><p><strong>服务端渲染的缺点</strong></p> <ul><li>当用户点击页面中的某个按钮向服务器发送请求时，页面本质上<font color="orange">只是一些数据发生了变化</font>，而此时<font color="orange">服务器却要将重绘的整个页面再返 回给浏览器加载</font>，这显然有悖于程序员的“DRY（ Don‘t repeat yourself ）”原则</li> <li>而且明明<font color="orange">只是一些数据的变化却迫使服务器要返回整个 HTML 文档</font>，这本身也会<font color="orange">给网络带宽带来不必要的开销</font>。</li></ul></li> <li><p>有没有办法在<font color="cornflowerblue">页面数据变动</font>时，只向<font color="cornflowerblue">服务器请求新的数据，并且在阻止页面刷新</font>的情况下，<font color="cornflowerblue">动态的替换页面</font>中展示的<font color="cornflowerblue">数据</font>呢？</p> <ul><li>答案正是**“<font color="orange">AJAX</font>font&gt;**”</li></ul></li> <li><p><font color="orange">AJAX</font>是“Asynchronous JavaScript And XML”的缩写(<font color="orange">异步的 JavaScript 和 XML</font>)，是一种<font color="orange">实现 无页面刷新 获取服务器数据的技术</font>font&gt;。</p> <ul><li>AJAX 最吸引人的就是它的“异步”特性，也就是说它可以在<font color="orange">不重新刷新页面的情况下与服务器通信，交换数据，或更新页面</font>。</li></ul></li> <li><p><strong>AJAX 最主要的两个特性做下列事</strong></p> <ul><li>在<font color="orange">不重新加载页面的情况下发送请求给服务器</font>；</li> <li><font color="orange">接受并使用从服务器发来的数据</font></li></ul></li></ul> <h3 id="http-协议的解析"><a href="#http-协议的解析" class="header-anchor">#</a> HTTP 协议的解析</h3> <p><font color="red"><strong>什么是 HTTP</strong></font></p> <ul><li>什么是 HTTP 呢？我们来看一下维基百科的解释
<ul><li><font color="orange">超文本传输协议</font>（英语：HyperText Transfer Protocol，缩写：HTTP）是一种用于分布式、协作式和超媒体信息系统的<font color="orange">应用层协议</font>；</li> <li>HTTP 是万维网的数据通信的基础，设计 HTTP 最初的目的是为了提供一种<font color="orange">发布和接收 HTML 页面的方法</font>；</li> <li>通过<font color="orange">HTTP 或者 HTTPS 协议请求的资源由统一资源标识符（Uniform Resource Identifiers，URI）来标识</font>；</li></ul></li> <li><strong>HTTP 是一个客户端（用户）和服务端（网站）之间请求和响应的标准</strong> <ul><li>通过使用<font color="orange">网页浏览器、网络爬虫或者其它的工具</font>，客户端发起一个<font color="orange">HTTP 请求</font>到服务器上指定端口（<font color="orange">默认端口为 80</font>）</li> <li>我们称这个<font color="orange">客户端为用户代理程序</font>（user agent）</li> <li><font color="orange">响应的服务器上存储着一些资源</font>，比如 HTML 文件和图像。
<ul><li>我们称这个<font color="orange">响应服务器为源服务器</font>（origin server）；</li></ul></li></ul></li></ul> <img src="./images/JS/HTTP.png"> <ul><li>目前我们页面中很多<font color="cornflowerblue">数据是动态展示</font>的
<ul><li>比如页面中的<font color="orange">数据展示</font>、<font color="orange">搜索数据</font>、<font color="orange">表单验证</font>等等，也是通过在 JavaScript 中发送 HTTP 请求获取的</li></ul></li></ul> <p><font color="red"><strong>HTTP 的组成</strong></font></p> <ul><li>一次 HTTP 请求主要包括：<font color="orange">请求（Request）和 响应 （Response）</font></li></ul> <img src="./images/JS/HTTP.png"> <p><strong><font color="red">HTTP 的版本</font></strong></p> <ul><li>HTTP/0.9
<ul><li> 发布于 1991 年；</li> <li> 只支持 GET 请求方法获取文本数据，当时主要是为了获取 HTML 页面内容；</li></ul></li> <li>HTTP/1.0</li> <li> 发布于 1996 年；</li> <li> 支持 POST、HEAD 等请求方法，支持请求头、响应头等，支持更多种数据类型(不再局限于文本数据) ；</li> <li> 但是浏览器的每次请求都需要与服务器建立一个 TCP 连接，请求处理完成后立即断开 TCP 连接，每次建立连接增加了性能损耗；</li> <li><font color="orange">HTTP/1.1</font>(目前使用最广泛的版本)
<ul><li> 发布于 1997 年；</li> <li> 增加了 PUT、DELETE 等请求方法；</li> <li> 采用持久连接(Connection: keep-alive)，多个请求可以共用同一个 TCP 连接；</li></ul></li> <li>2015 年，HTTP/2.0</li> <li>2018 年，HTTP/3.0</li></ul> <p><font color="red"><strong>HTTP 的请求方式</strong></font></p> <ul><li><strong><font color="orange">get</font> ：请求用于获取数据</strong></li> <li><strong><font color="orange">post</font>：用于提交指定的数据 或 资源文件</strong></li> <li><strong><font color="orange"> put</font>：用于替换目标资源的所有数据</strong></li> <li><strong><font color="orange">delete</font>：删除指定的数据 或 资源文件</strong></li> <li><strong><font color="orange">patch</font>：用于对数据 修改</strong></li> <li><font color="orange">head</font>：HEAD 方法请求一个与 GET 请求的响应相同的响应，但没有响应体
<ul><li>比如在准备下载一个文件前，先获取文件的大小，再决定是否进行下载；</li></ul></li> <li><font color="orange">connect</font>：方法建立一个到目标资源标识的服务器的隧道，通常用在代理服务器，网页开发很少用到。</li> <li><font color="orange">trace</font>：沿着到目标资源的路径执行一个消息环回测试</li></ul> <p><strong><font color="red">HTTP 的 请求头 信息</font></strong></p> <ul><li>在 request 对象的 header 中也包含很多有用的信息，客户端会默认传递过来一些信息：</li></ul> <img src="./images/JS/网络请求头信息.png"> <ul><li>content-length：文件的大小长度</li> <li>accept-encoding：告知服务器，客户端支持的文件压缩格式，比如 js 文件可以使用 gzip 编码，对应 .gz 文件；</li> <li>accept：告知服务器，客户端可接受文件的格式类型；</li> <li>user-agent：客户端相关的信息</li></ul> <p><strong><font color="red">HTTP 的 响应头 信息</font></strong></p> <ul><li>响应的 header 中包括一些服务器给客户端的信息：</li></ul> <img src="./images/JS/网络响应请求头信息.png"> <p><font color="orange">content-type 是这次请求携带的数据的类型</font></p> <ul><li><strong><font color="orange">application/x-www-form-urlencoded</font></strong> 表示数据被编码成以 '&amp;' 分隔的键 - 值对，同时以 '=' 分隔键和值</li> <li><font color="orange"><strong>application/json</strong></font> 表示是一个 json 类型</li> <li><font color="orange">**text/plain **</font> 表示是文本类型</li> <li><font color="orange"><strong>application/xml</strong></font> 表示是 xml 类型</li> <li><font color="orange"><strong>multipart/form-data</strong></font> 表示是上传文件</li></ul> <p><font color="red"><strong>HTTP 响应状态码</strong></font></p> <ul><li>Http 状态码（Http Status Code）是用来表示 Http 响应状态的数字代码
<ul><li>Http 状态码非常多，可以根据不同的情况，给客户端返回不同的状态码；</li> <li>MDN 响应码解析地址：https://developer.mozilla.org/zh-CN/docs/web/http/status</li></ul></li></ul> <table><thead><tr><th>常见 HTTP 状态码</th> <th>状态描述</th> <th>信息说明</th></tr></thead> <tbody><tr><td>200</td> <td>OK</td> <td>客户端请求成功</td></tr> <tr><td>201</td> <td>Created</td> <td>POST 请求，创建新的资源</td></tr> <tr><td>301</td> <td>Moved Permanently</td> <td>请求资源的 URL 已经修改，响应中会给出新的 URL</td></tr> <tr><td>400</td> <td>Bad Request</td> <td>客户端的错误，服务器无法或者不进行处理</td></tr> <tr><td>401</td> <td>Unauthorized</td> <td>未授权的错误，必须携带请求的身份信息</td></tr> <tr><td>403</td> <td>Forbidden</td> <td>客户端没有权限访问，被拒接</td></tr> <tr><td>404</td> <td>Not Found</td> <td>服务器找不到请求的资源。</td></tr> <tr><td>500</td> <td>Internal Server Error</td> <td>服务器遇到了不知道如何处理的情况。</td></tr> <tr><td>503</td> <td>Service Unavailable</td> <td>服务器不可用，可能处理维护或者重载状态，暂时无法访问</td></tr></tbody></table> <h3 id="xhr-的基本用法"><a href="#xhr-的基本用法" class="header-anchor">#</a> XHR 的基本用法</h3> <p><strong><font color="red">AJAX 发送请求</font></strong></p> <ul><li><p>AJAX 是异步的 JavaScript 和 XML</p></li> <li><p>可以使用 <font color="cornflowerblue">JSON，XML，HTML，text 文本</font> 等 格式发送和接受数据</p></li> <li><p>如何来完成 AJAX 请求呢？</p> <ul><li>第一步：创建网络请求的 AJAX 对象（使用<font color="orange">XMLHttpRequest</font>）</li> <li>第二步：使用 <font color="orange">onreadystatechange </font>事件监听<font color="orange">XMLHttpRequest</font>对象状态的变化，或者监听<font color="orange">onload</font>事件（请求完成时触发）；</li> <li>第三步：<font color="cornflowerblue">配置网络请求</font>（通过<font color="orange">open</font>方法）；</li> <li>第四步：<font color="cornflowerblue">发送</font><font color="orange">send</font><font color="cornflowerblue">网络请求</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 第一步 ：创建网络请求的AJAX对象 ，使用 XMLHttpRequest</span>
<span class="token keyword">let</span> xml <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xml<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 设置返回数据的类型</span>
<span class="token comment">// 第二步 ：监听 XMLHTTPRequest对象状态的变化，或者监听load事件（（请求完成时触发））</span>
xml<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xml<span class="token punctuation">.</span>readyState <span class="token operator">!=</span> XMLHttpRequest<span class="token punctuation">.</span><span class="token constant">DONE</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// XMLHttpRequest.DONE 等于 4，含义是 下载操作已完成。</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xml<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 第三步：配置网络请求（通过open方法）</span>
xml<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 第四步：发送send网络请求；</span>
xml<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><font color="red"><strong>XMLHttpRequest 的 state（状态）</strong></font></p> <img src="./images/JS/网络请求的 state 状态码.png"> <ul><li><p>注意：这个状态并非是 HTTP 的相应状态，而是<font color="cornflowerblue">记录的 XMLHttpRequest 对象的状态变化</font>。</p> <ul><li><font color="orange">http 响应状态通过 status 获取</font></li></ul> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>xml.readyState
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p><strong><font color="red">设置同步请求 </font></strong></p> <ul><li><p>将<font color="orange">open 的第三个参数设置为 false</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>xml<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p><font color="red"><strong>XMLHttp Request 其他事件监听</strong></font></p> <ul><li><strong>除了 onreadystatechange 还有其他事件可以监听</strong> <ul><li><font color="orange">loadstart</font>：请求开始</li> <li><font color="orange">progress</font>： 一个响应数据包到达，此时整个 response body 都在 response 中</li> <li><font color="orange">abort</font>：调用 xhr.abort() <strong>取消了请求</strong></li> <li><font color="orange">error</font>：发生<strong>连接错误，例如，域错误</strong>。不会发生诸如 404 这类的 HTTP 错误。</li> <li><strong><font color="orange">load</font>：请求成功完成</strong></li> <li><font color="orange">timeout</font>：由于<strong>请求超时而取消了该请求</strong>（仅发生在设置了 timeout 的情况下）。</li> <li><font color="orange">loadend</font>：在 load，error，timeout 或 abort 之后触发。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong><font color="red">响应数据和响应类型</font></strong></p> <ul><li><p>发送了请求后，我们需要获取对应的结果</p> <ul><li>XMLHttpRequest <font color="orange">response </font>属性 返回 响应正文的内容</li> <li>返回类型取决于 <font color="orange">responseType </font>的属性设置</li></ul></li> <li><p><strong>通过 responseType 可以设置获取数据的类型</strong></p> <ul><li>如果将 <font color="orange">responseType 的值设置为空字符串</font>，则会使用<font color="orange"> text 作为默认值</font></li></ul> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>xhr.repsonseType = &quot;json&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p><strong><font color="red">get / post 请求的传递参数</font></strong></p> <ul><li>常见的传递给服务器数据的方式如下几种
<ul><li>方式一 ：<font color="orange">get 请求的 query 参数</font></li> <li>方式二 ：<font color="orange">post 请求 x - www - form - urlencoded 格式</font></li> <li>方式三 ：<font color="orange">post 的 请求 formdata 格式</font></li> <li>方式四 ：<font color="orange">post 请求 JSON 格式 </font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. get 请求的 query 参数</span>
xml<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>
  <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;http://123.207.32.32:1888/02_param/get?name=why&amp;age=18&amp;address=广州市&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
xml<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 2. post 请求 x-www-form-urlencoded 格式</span>
xml<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://123.207.32.32:1888/02_param/posturl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xml<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xml<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;name=lys&amp;age=18&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 3. post 的 请求 formdata 格式</span>
xml<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://123.207.32.32:1888/02_param/postform&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span>formEl<span class="token punctuation">)</span><span class="token punctuation">;</span>
xml<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 4. post 的 请求 JSON 格式</span>
xml<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://123.207.32.32:1888/02_param/postjson&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xml<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xml<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><font color="red"><strong>延迟时间 timeout 和 取消请求</strong></font></p> <ul><li><p>在网络请求的过程中，为了<font color="cornflowerblue">避免过长的时间服务器无法返回数据</font>，通常我们会为<font color="cornflowerblue">请求设置一个超时时间：timeout</font></p> <ul><li>当达到<font color="orange">超时间后依然没有获取到数据</font>，那么这个<font color="orange">请求会自动被取消掉</font>；</li> <li><font color="orange">默认值为 0</font>，表示没有设置超时时间</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>我们也可以**<font color="orange">通过 abort() 方法强制取消请求</font>**；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> xml <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

el<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  xml<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="xhr-的封装"><a href="#xhr-的封装" class="header-anchor">#</a> XHR 的封装</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myAjax</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> success<span class="token punctuation">,</span> failure <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> xml <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xml<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xml<span class="token punctuation">.</span>readyState <span class="token operator">!==</span> XMLHttpRequest<span class="token punctuation">.</span><span class="token constant">DONE</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xml<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xml<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      success <span class="token operator">&amp;&amp;</span> <span class="token function">success</span><span class="token punctuation">(</span>xml<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      failure <span class="token operator">&amp;&amp;</span> <span class="token function">failure</span><span class="token punctuation">(</span>xml<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  xml<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">==</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    xml<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    xml<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xml<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">==</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> quersyString <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        quersyString<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      url <span class="token operator">+=</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> quersyString<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    xml<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    xml<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> xml<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">myAjax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://123.207.32.32:1888/02_param/posturl&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lys&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">failure</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="fetch-的使用详解"><a href="#fetch-的使用详解" class="header-anchor">#</a> Fetch 的使用详解</h3> <p><font color="red"><strong>认识 Fetch 和 Fetch API</strong></font></p> <ul><li><p><strong>Fetch 可以看做是早期的 XMLHttpRequest 的替代方案，它提供了一种更加现代的处理方案</strong></p> <ul><li>比如 <font color="orange">返回值是 promise </font>，提供了一种更加优雅的处理结果方式
<ul><li>在请求发送成功时，调用 resolve 回调 then；</li> <li>在请求发送失败时，调用 reject 回调 catch</li></ul></li> <li>比如<font color="orange">不像 XMLHttpRequest 一样</font>，所有的操作都在一个对象上</li></ul></li> <li><p>fetch 函数的使用</p> <ul><li><div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>fetch(input[,init]);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><font color="orange">input</font>：定义要获取的资源地址，可以是一个 URL 字符串，也可以使用一个 Request 对象（实验性特性）类型；</li> <li><font color="orange">init</font>：其他初始化参数
<ul><li><font color="orange">method</font>: 请求使用的方法，如 GET、POST；</li> <li><font color="orange">headers</font>: 请求的头信息；</li> <li><font color="orange">body</font>: 请求的 body 信息；</li></ul></li></ul></li></ul></li></ul> <p><strong><font color="red">Fetch 数据的响应（Response）</font></strong></p> <ul><li>阶段一：当服务器返回了响应（response）
<ul><li>fetch 返回的 promise 就使用内建的 Response class 对象来对响应头进行解析；</li> <li>在这个阶段，我们可以通过检查响应头，来检查 HTTP 状态以确定请求是否成功</li> <li>如果 fetch 无法建立一个 HTTP 请求，例如网络问题，亦或是请求的网址不存在，那么 promise 就会 reject</li> <li>异常的 HTTP 状态，例如 404 或 500，不会导致出现 error</li></ul></li> <li>我们可以在 response 的属性中看到 HTTP 状态
<ul><li>status：HTTP 状态码，例如 200；</li> <li>ok：布尔值，如果 HTTP 状态码为 200-299，则为 true；</li></ul></li> <li>第二阶段，为了获取 response body，我们需要使用一个其他的方法调用
<ul><li><font color="orange"><strong>response.text()</strong> —— 读取 response，并以文本形式返回 response</font>；</li> <li><font color="orange"><strong>response.json()</strong> —— 将 response 解析为 JSON</font>；</li></ul></li></ul> <p><font color="red"><strong>Fetch 网络请求的处理</strong></font></p> <ul><li><p><strong>基于 Promise 的使用方案</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 请求数据的结果</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p><strong>基于 async、await 的使用方案</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 请求数据的结果</span>
<span class="token punctuation">}</span>
<span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <p><font color="red"><strong>Fetch post 请求</strong></font></p> <ul><li>创建一个 POST 请求，或者其他方法的请求，我们需要使用 fetch 选项：
<ul><li><font color="orange">method</font> ：<font color="cornflowerblue">HTTP 方法</font></li> <li><font color="orange">body</font>：request body，其中之一
<ul><li><font color="cornflowerblue">字符串（例如 JSON 编码的）</font></li> <li><font color="cornflowerblue">FormData 对象，以 multipart/form-data 形式发送数据</font></li></ul></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;http://123.207.32.32:1888/02_param/posturl&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token string">&quot;name=lys&amp;age=18&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;Content-type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="前端文件上传的流程"><a href="#前端文件上传的流程" class="header-anchor">#</a> 前端文件上传的流程</h3> <p><font color="cornflowerblue">xmlHttpRequest 文件上传</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;file&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;file&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btnFile&quot;</span><span class="token operator">&gt;</span>上传图片<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">let</span> fileEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> btnFile <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.btnFile&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

btnFile<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> files <span class="token operator">=</span> fileEl<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 获取图片的信息</span>
  <span class="token keyword">let</span> fromData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建表单数据</span>
  fromData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;filesUrl&quot;</span><span class="token punctuation">,</span> files<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 添加到表单的数据</span>
  <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://123.207.32.32:1888/02_param/upload&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>fromData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><font color="cornflowerblue">Fetch 文件上传</font> （但是 Fetch 没办法监听进度）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> files <span class="token operator">=</span> fileEl<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> fromData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fromData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;filesUrl&quot;</span><span class="token punctuation">,</span> files<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;http://123.207.32.32:1888/02_param/upload&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> fromData<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#认识-javascript" class="sidebar-link reco-side-认识-javascript" data-v-cb1513f6>认识 JavaScript</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#javascript-由谁来运行" class="sidebar-link reco-side-javascript-由谁来运行" data-v-cb1513f6>JavaScript 由谁来运行</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#浏览器内核-和-js-引擎的关系" class="sidebar-link reco-side-浏览器内核-和-js-引擎的关系" data-v-cb1513f6>浏览器内核 和 JS 引擎的关系</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-基础语法" class="sidebar-link reco-side-js-基础语法" data-v-cb1513f6>JS 基础语法</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#noscript-元素" class="sidebar-link reco-side-noscript-元素" data-v-cb1513f6>noscript 元素</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#javascript-编写的注意事项" class="sidebar-link reco-side-javascript-编写的注意事项" data-v-cb1513f6>JavaScript 编写的注意事项</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#javascript-的-交互方式" class="sidebar-link reco-side-javascript-的-交互方式" data-v-cb1513f6>javaScript 的 交互方式</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#javascript-的-注释" class="sidebar-link reco-side-javascript-的-注释" data-v-cb1513f6>JavaScript 的 注释</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#vscode-配置" class="sidebar-link reco-side-vscode-配置" data-v-cb1513f6>vsCode 配置</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-变量和数据类型" class="sidebar-link reco-side-js-变量和数据类型" data-v-cb1513f6>JS 变量和数据类型</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#变量的使用注意" class="sidebar-link reco-side-变量的使用注意" data-v-cb1513f6>变量的使用注意</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#javascript-的数据类型" class="sidebar-link reco-side-javascript-的数据类型" data-v-cb1513f6>JavaScript 的数据类型</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#typeof-操作符" class="sidebar-link reco-side-typeof-操作符" data-v-cb1513f6>typeof 操作符</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#number-类型" class="sidebar-link reco-side-number-类型" data-v-cb1513f6>Number 类型</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#字符串中的转义字符" class="sidebar-link reco-side-字符串中的转义字符" data-v-cb1513f6>字符串中的转义字符</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#undefined-类型" class="sidebar-link reco-side-undefined-类型" data-v-cb1513f6>Undefined 类型</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#null-类型" class="sidebar-link reco-side-null-类型" data-v-cb1513f6>Null 类型</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#字符串的-string-的转换" class="sidebar-link reco-side-字符串的-string-的转换" data-v-cb1513f6>字符串的 String 的转换</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#数字类型-number-的转换" class="sidebar-link reco-side-数字类型-number-的转换" data-v-cb1513f6>数字类型 Number 的转换</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#布尔类型-boolean-的转换" class="sidebar-link reco-side-布尔类型-boolean-的转换" data-v-cb1513f6>布尔类型 Boolean 的转换</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-基础运算符" class="sidebar-link reco-side-js-基础运算符" data-v-cb1513f6>JS 基础运算符</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#算术运算符" class="sidebar-link reco-side-算术运算符" data-v-cb1513f6>算术运算符</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#和-区别" class="sidebar-link reco-side-和-区别" data-v-cb1513f6>=== 和 == 区别</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-分支语句" class="sidebar-link reco-side-js-分支语句" data-v-cb1513f6>JS 分支语句</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#代码块的理解" class="sidebar-link reco-side-代码块的理解" data-v-cb1513f6>代码块的理解</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#if-语句的细节补充" class="sidebar-link reco-side-if-语句的细节补充" data-v-cb1513f6>if 语句的细节补充</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#三元运算符" class="sidebar-link reco-side-三元运算符" data-v-cb1513f6>三元运算符</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#逻辑运算符" class="sidebar-link reco-side-逻辑运算符" data-v-cb1513f6>逻辑运算符</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#非" class="sidebar-link reco-side-非" data-v-cb1513f6>! (非)</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#switch-语句" class="sidebar-link reco-side-switch-语句" data-v-cb1513f6>switch 语句</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#while-循环" class="sidebar-link reco-side-while-循环" data-v-cb1513f6>while 循环</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#do-while-循环" class="sidebar-link reco-side-do-while-循环" data-v-cb1513f6>do .. while 循环</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#for-循环" class="sidebar-link reco-side-for-循环" data-v-cb1513f6>for 循环</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-函数" class="sidebar-link reco-side-js-函数" data-v-cb1513f6>JS 函数</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#函数的-声明-和-调用" class="sidebar-link reco-side-函数的-声明-和-调用" data-v-cb1513f6>函数的 声明 和 调用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#函数的参数" class="sidebar-link reco-side-函数的参数" data-v-cb1513f6>函数的参数</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#函数的返回值" class="sidebar-link reco-side-函数的返回值" data-v-cb1513f6>函数的返回值</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#arguments-参数" class="sidebar-link reco-side-arguments-参数" data-v-cb1513f6>arguments 参数</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#函数的递归" class="sidebar-link reco-side-函数的递归" data-v-cb1513f6>函数的递归</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#局部变量-和-外部变量" class="sidebar-link reco-side-局部变量-和-外部变量" data-v-cb1513f6>局部变量 和 外部变量</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#函数表达式" class="sidebar-link reco-side-函数表达式" data-v-cb1513f6>函数表达式</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#回调函数" class="sidebar-link reco-side-回调函数" data-v-cb1513f6>回调函数</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#立即执行函数" class="sidebar-link reco-side-立即执行函数" data-v-cb1513f6>立即执行函数</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-代码风格" class="sidebar-link reco-side-js-代码风格" data-v-cb1513f6>JS 代码风格</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-面向对象" class="sidebar-link reco-side-js-面向对象" data-v-cb1513f6>JS 面向对象</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#对象的常见操作" class="sidebar-link reco-side-对象的常见操作" data-v-cb1513f6>对象的常见操作</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#方括号-和-引用的使用" class="sidebar-link reco-side-方括号-和-引用的使用" data-v-cb1513f6>方括号 和 引用的使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#对象的遍历" class="sidebar-link reco-side-对象的遍历" data-v-cb1513f6>对象的遍历</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#栈内存-和-堆内存" class="sidebar-link reco-side-栈内存-和-堆内存" data-v-cb1513f6>栈内存 和 堆内存</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#this-指向-什么" class="sidebar-link reco-side-this-指向-什么" data-v-cb1513f6>this 指向 什么</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#类和对象的思维方式" class="sidebar-link reco-side-类和对象的思维方式" data-v-cb1513f6>类和对象的思维方式</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#构造函数的认识和使用" class="sidebar-link reco-side-构造函数的认识和使用" data-v-cb1513f6>构造函数的认识和使用</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-内置类" class="sidebar-link reco-side-js-内置类" data-v-cb1513f6>JS 内置类</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#原始类型的包装类" class="sidebar-link reco-side-原始类型的包装类" data-v-cb1513f6>原始类型的包装类</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#number-类的补充" class="sidebar-link reco-side-number-类的补充" data-v-cb1513f6>Number 类的补充</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#math-对象" class="sidebar-link reco-side-math-对象" data-v-cb1513f6>Math 对象</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#string-类-的补充" class="sidebar-link reco-side-string-类-的补充" data-v-cb1513f6>String 类 的补充</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#数组认识和使用" class="sidebar-link reco-side-数组认识和使用" data-v-cb1513f6>数组认识和使用</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-dom" class="sidebar-link reco-side-js-dom" data-v-cb1513f6>JS DOM</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#dom-tree-的理解" class="sidebar-link reco-side-dom-tree-的理解" data-v-cb1513f6>DOM Tree 的理解</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#节点之间的导航" class="sidebar-link reco-side-节点之间的导航" data-v-cb1513f6>节点之间的导航</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#元素之间的导航" class="sidebar-link reco-side-元素之间的导航" data-v-cb1513f6>元素之间的导航</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#表格之间的导航" class="sidebar-link reco-side-表格之间的导航" data-v-cb1513f6>表格之间的导航</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#获取元素的方法" class="sidebar-link reco-side-获取元素的方法" data-v-cb1513f6>获取元素的方法</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#节点的属性" class="sidebar-link reco-side-节点的属性" data-v-cb1513f6>节点的属性</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#元素的属性和特性" class="sidebar-link reco-side-元素的属性和特性" data-v-cb1513f6>元素的属性和特性</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-动态修改样式" class="sidebar-link reco-side-js-动态修改样式" data-v-cb1513f6>JS 动态修改样式</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#元素的操作" class="sidebar-link reco-side-元素的操作" data-v-cb1513f6>元素的操作</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#元素的大小-、滚动" class="sidebar-link reco-side-元素的大小-、滚动" data-v-cb1513f6>元素的大小 、滚动</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#window-的大小-、-滚动" class="sidebar-link reco-side-window-的大小-、-滚动" data-v-cb1513f6>window 的大小 、 滚动</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#window-定时器" class="sidebar-link reco-side-window-定时器" data-v-cb1513f6>window 定时器</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-事件处理" class="sidebar-link reco-side-js-事件处理" data-v-cb1513f6>JS 事件处理</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#常见事件列表" class="sidebar-link reco-side-常见事件列表" data-v-cb1513f6>常见事件列表</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#事件冒泡-和-事件捕获" class="sidebar-link reco-side-事件冒泡-和-事件捕获" data-v-cb1513f6>事件冒泡 和 事件捕获</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#事件对象" class="sidebar-link reco-side-事件对象" data-v-cb1513f6>事件对象</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#事件处理中的-this" class="sidebar-link reco-side-事件处理中的-this" data-v-cb1513f6>事件处理中的 this</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#eventtarget-类" class="sidebar-link reco-side-eventtarget-类" data-v-cb1513f6>EventTarget 类</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#事件委托" class="sidebar-link reco-side-事件委托" data-v-cb1513f6>事件委托</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#常见的鼠标事件" class="sidebar-link reco-side-常见的鼠标事件" data-v-cb1513f6>常见的鼠标事件</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#常见的键盘事件" class="sidebar-link reco-side-常见的键盘事件" data-v-cb1513f6>常见的键盘事件</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#常见的表单事件" class="sidebar-link reco-side-常见的表单事件" data-v-cb1513f6>常见的表单事件</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#文档加载事件" class="sidebar-link reco-side-文档加载事件" data-v-cb1513f6>文档加载事件</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-bom" class="sidebar-link reco-side-js-bom" data-v-cb1513f6>JS BOM</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#window-对象" class="sidebar-link reco-side-window-对象" data-v-cb1513f6>window 对象</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#location-对象" class="sidebar-link reco-side-location-对象" data-v-cb1513f6>location 对象</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#urlsearchparams" class="sidebar-link reco-side-urlsearchparams" data-v-cb1513f6>URLSearchParams</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#history" class="sidebar-link reco-side-history" data-v-cb1513f6>history</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#json" class="sidebar-link reco-side-json" data-v-cb1513f6>JSON</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#json-序列化" class="sidebar-link reco-side-json-序列化" data-v-cb1513f6>JSON 序列化</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#storage" class="sidebar-link reco-side-storage" data-v-cb1513f6>Storage</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#方法和属性" class="sidebar-link reco-side-方法和属性" data-v-cb1513f6>方法和属性</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#this-的指向" class="sidebar-link reco-side-this-的指向" data-v-cb1513f6>this 的指向</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#默认绑定" class="sidebar-link reco-side-默认绑定" data-v-cb1513f6>默认绑定</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#隐私绑定" class="sidebar-link reco-side-隐私绑定" data-v-cb1513f6>隐私绑定</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#显示绑定" class="sidebar-link reco-side-显示绑定" data-v-cb1513f6>显示绑定</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#内置函数的绑定" class="sidebar-link reco-side-内置函数的绑定" data-v-cb1513f6>内置函数的绑定</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#new-绑定" class="sidebar-link reco-side-new-绑定" data-v-cb1513f6>new 绑定</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#箭头函数调用" class="sidebar-link reco-side-箭头函数调用" data-v-cb1513f6>箭头函数调用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#规则优先级" class="sidebar-link reco-side-规则优先级" data-v-cb1513f6>规则优先级</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#箭头函数" class="sidebar-link reco-side-箭头函数" data-v-cb1513f6>箭头函数</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#浏览器的渲染原理" class="sidebar-link reco-side-浏览器的渲染原理" data-v-cb1513f6>浏览器的渲染原理</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#浏览器的内核" class="sidebar-link reco-side-浏览器的内核" data-v-cb1513f6>浏览器的内核</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#回流和重绘" class="sidebar-link reco-side-回流和重绘" data-v-cb1513f6>回流和重绘</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#合成-和-性能优化" class="sidebar-link reco-side-合成-和-性能优化" data-v-cb1513f6>合成 和 性能优化</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#defer-和-async-属性" class="sidebar-link reco-side-defer-和-async-属性" data-v-cb1513f6>defer 和 async 属性</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-的运行原理" class="sidebar-link reco-side-js-的运行原理" data-v-cb1513f6>JS 的运行原理</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#v8-引擎原理" class="sidebar-link reco-side-v8-引擎原理" data-v-cb1513f6>V8 引擎原理</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#执行上下文" class="sidebar-link reco-side-执行上下文" data-v-cb1513f6>执行上下文</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#作用域和作用域链" class="sidebar-link reco-side-作用域和作用域链" data-v-cb1513f6>作用域和作用域链</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-内存管理-和-闭包" class="sidebar-link reco-side-js-内存管理-和-闭包" data-v-cb1513f6>JS 内存管理 和 闭包</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#认识内存管理" class="sidebar-link reco-side-认识内存管理" data-v-cb1513f6>认识内存管理</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-内存管理" class="sidebar-link reco-side-js-内存管理" data-v-cb1513f6>JS 内存管理</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-垃圾回收" class="sidebar-link reco-side-js-垃圾回收" data-v-cb1513f6>JS 垃圾回收</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#闭包" class="sidebar-link reco-side-闭包" data-v-cb1513f6>闭包</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#函数的增强知识" class="sidebar-link reco-side-函数的增强知识" data-v-cb1513f6>函数的增强知识</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#函数属性-和-arguments" class="sidebar-link reco-side-函数属性-和-arguments" data-v-cb1513f6>函数属性 和 arguments</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#纯函数的理解和应用" class="sidebar-link reco-side-纯函数的理解和应用" data-v-cb1513f6>纯函数的理解和应用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#柯里化概念的理解" class="sidebar-link reco-side-柯里化概念的理解" data-v-cb1513f6>柯里化概念的理解</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#组合函数感念何理解" class="sidebar-link reco-side-组合函数感念何理解" data-v-cb1513f6>组合函数感念何理解</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#with-和-eval-使用" class="sidebar-link reco-side-with-和-eval-使用" data-v-cb1513f6>with 和 eval 使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#严格模式的使用" class="sidebar-link reco-side-严格模式的使用" data-v-cb1513f6>严格模式的使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#手写-apply-和-call-和-bind-函数实现" class="sidebar-link reco-side-手写-apply-和-call-和-bind-函数实现" data-v-cb1513f6>手写 apply 和 call 和 bind 函数实现</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#object-defineproperty" class="sidebar-link reco-side-object-defineproperty" data-v-cb1513f6>Object.defineProperty</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#数据属性描述符" class="sidebar-link reco-side-数据属性描述符" data-v-cb1513f6>数据属性描述符</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#object-defineproperties" class="sidebar-link reco-side-object-defineproperties" data-v-cb1513f6>Object.defineProperties</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#对象的其他方法补充" class="sidebar-link reco-side-对象的其他方法补充" data-v-cb1513f6>对象的其他方法补充</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#es5-中实现继承" class="sidebar-link reco-side-es5-中实现继承" data-v-cb1513f6>ES5 中实现继承</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#对象和函数的原型" class="sidebar-link reco-side-对象和函数的原型" data-v-cb1513f6>对象和函数的原型</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#原型的对象" class="sidebar-link reco-side-原型的对象" data-v-cb1513f6>原型的对象</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#原型链实现继承" class="sidebar-link reco-side-原型链实现继承" data-v-cb1513f6>原型链实现继承</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#对象的方法补充" class="sidebar-link reco-side-对象的方法补充" data-v-cb1513f6>对象的方法补充</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#es6-中实现继承" class="sidebar-link reco-side-es6-中实现继承" data-v-cb1513f6>ES6 中实现继承</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#class-方式定义类" class="sidebar-link reco-side-class-方式定义类" data-v-cb1513f6>class 方式定义类</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#extends-实现继承" class="sidebar-link reco-side-extends-实现继承" data-v-cb1513f6>extends 实现继承</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#super-关键字" class="sidebar-link reco-side-super-关键字" data-v-cb1513f6>super 关键字</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-中-的多态" class="sidebar-link reco-side-js-中-的多态" data-v-cb1513f6>JS 中 的多态</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#es6-新特性" class="sidebar-link reco-side-es6-新特性" data-v-cb1513f6>ES6 新特性</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#let-和-const-基本使用" class="sidebar-link reco-side-let-和-const-基本使用" data-v-cb1513f6>let 和 const 基本使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#模板字符串的详解" class="sidebar-link reco-side-模板字符串的详解" data-v-cb1513f6>模板字符串的详解</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#函数默认值的补充" class="sidebar-link reco-side-函数默认值的补充" data-v-cb1513f6>函数默认值的补充</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#函数的剩余参数" class="sidebar-link reco-side-函数的剩余参数" data-v-cb1513f6>函数的剩余参数</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#箭头函数的补充" class="sidebar-link reco-side-箭头函数的补充" data-v-cb1513f6>箭头函数的补充</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#展开语法" class="sidebar-link reco-side-展开语法" data-v-cb1513f6>展开语法</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#数值的表示" class="sidebar-link reco-side-数值的表示" data-v-cb1513f6>数值的表示</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#symbol-的-基本使用" class="sidebar-link reco-side-symbol-的-基本使用" data-v-cb1513f6>Symbol 的 基本使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#set-的-基本使用" class="sidebar-link reco-side-set-的-基本使用" data-v-cb1513f6>Set 的 基本使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#weakset-使用" class="sidebar-link reco-side-weakset-使用" data-v-cb1513f6>WeakSet 使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#map-的基本使用" class="sidebar-link reco-side-map-的基本使用" data-v-cb1513f6>Map 的基本使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#weakmap-的使用" class="sidebar-link reco-side-weakmap-的使用" data-v-cb1513f6>weakMap 的使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#proxy-的使用" class="sidebar-link reco-side-proxy-的使用" data-v-cb1513f6>Proxy 的使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#reflect-的使用" class="sidebar-link reco-side-reflect-的使用" data-v-cb1513f6>Reflect 的使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#promise-的使用" class="sidebar-link reco-side-promise-的使用" data-v-cb1513f6>**</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#es8-新特性" class="sidebar-link reco-side-es8-新特性" data-v-cb1513f6>ES8 新特性</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#object-valus" class="sidebar-link reco-side-object-valus" data-v-cb1513f6>Object valus</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#object-entries" class="sidebar-link reco-side-object-entries" data-v-cb1513f6>Object entries</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#string-padding" class="sidebar-link reco-side-string-padding" data-v-cb1513f6>String Padding</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#trailing-commas" class="sidebar-link reco-side-trailing-commas" data-v-cb1513f6>Trailing Commas</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#es10-新特性" class="sidebar-link reco-side-es10-新特性" data-v-cb1513f6>ES10 新特性</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#flat-和-flatmap" class="sidebar-link reco-side-flat-和-flatmap" data-v-cb1513f6>flat 和 flatMap</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#object-fromentries" class="sidebar-link reco-side-object-fromentries" data-v-cb1513f6>Object_ fromEntries</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#trimstart-和-trimend" class="sidebar-link reco-side-trimstart-和-trimend" data-v-cb1513f6>trimStart 和 trimEnd</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#bigint" class="sidebar-link reco-side-bigint" data-v-cb1513f6>BigInt</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#空值合并操作符" class="sidebar-link reco-side-空值合并操作符" data-v-cb1513f6>?? 空值合并操作符</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#可选链" class="sidebar-link reco-side-可选链" data-v-cb1513f6>?? 可选链</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#global-this" class="sidebar-link reco-side-global-this" data-v-cb1513f6>Global This</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#for-in-标准化" class="sidebar-link reco-side-for-in-标准化" data-v-cb1513f6>for .. in 标准化</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#es12-新特性" class="sidebar-link reco-side-es12-新特性" data-v-cb1513f6>ES12 新特性</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#监听垃圾回收" class="sidebar-link reco-side-监听垃圾回收" data-v-cb1513f6>监听垃圾回收</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#weakrefs" class="sidebar-link reco-side-weakrefs" data-v-cb1513f6>WeakRefs</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#逻辑赋值运算符" class="sidebar-link reco-side-逻辑赋值运算符" data-v-cb1513f6>逻辑赋值运算符</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#es13-新特性" class="sidebar-link reco-side-es13-新特性" data-v-cb1513f6>ES13 新特性</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#method-at" class="sidebar-link reco-side-method-at" data-v-cb1513f6>method.at()</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#hasown-obj-propkey" class="sidebar-link reco-side-hasown-obj-propkey" data-v-cb1513f6>hasOwn(obj,propKey)</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#迭代器" class="sidebar-link reco-side-迭代器" data-v-cb1513f6>迭代器</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#生成器" class="sidebar-link reco-side-生成器" data-v-cb1513f6>生成器</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#async-、await、事件循环" class="sidebar-link reco-side-async-、await、事件循环" data-v-cb1513f6>async 、await、事件循环</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#async、await" class="sidebar-link reco-side-async、await" data-v-cb1513f6>async、await</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#进程-和-线程" class="sidebar-link reco-side-进程-和-线程" data-v-cb1513f6>进程 和 线程</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#事件循环" class="sidebar-link reco-side-事件循环" data-v-cb1513f6>事件循环</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#代码异常处理" class="sidebar-link reco-side-代码异常处理" data-v-cb1513f6>代码异常处理</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#throw-关键字" class="sidebar-link reco-side-throw-关键字" data-v-cb1513f6>throw 关键字</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#error-类型" class="sidebar-link reco-side-error-类型" data-v-cb1513f6>Error 类型</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#异常的处理" class="sidebar-link reco-side-异常的处理" data-v-cb1513f6>异常的处理</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#storage、正则表达式" class="sidebar-link reco-side-storage、正则表达式" data-v-cb1513f6>storage、正则表达式</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#storage-2" class="sidebar-link reco-side-storage-2" data-v-cb1513f6>storage</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#storage-常见的方法和属性" class="sidebar-link reco-side-storage-常见的方法和属性" data-v-cb1513f6>Storage 常见的方法和属性</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#正则表达式" class="sidebar-link reco-side-正则表达式" data-v-cb1513f6>正则表达式</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#防抖-和-节流-函数" class="sidebar-link reco-side-防抖-和-节流-函数" data-v-cb1513f6>防抖 和 节流 函数</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#认识防抖函数" class="sidebar-link reco-side-认识防抖函数" data-v-cb1513f6>认识防抖函数</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#认识节流函数" class="sidebar-link reco-side-认识节流函数" data-v-cb1513f6>认识节流函数</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#underscore-库的介绍" class="sidebar-link reco-side-underscore-库的介绍" data-v-cb1513f6>underscore 库的介绍</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#深拷贝-和-浅拷贝" class="sidebar-link reco-side-深拷贝-和-浅拷贝" data-v-cb1513f6>深拷贝 和 浅拷贝</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#自定义事件总线" class="sidebar-link reco-side-自定义事件总线" data-v-cb1513f6>自定义事件总线</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#js-网络编程" class="sidebar-link reco-side-js-网络编程" data-v-cb1513f6>JS 网络编程</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#前端数据请求方式" class="sidebar-link reco-side-前端数据请求方式" data-v-cb1513f6>前端数据请求方式</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#http-协议的解析" class="sidebar-link reco-side-http-协议的解析" data-v-cb1513f6>HTTP 协议的解析</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#xhr-的基本用法" class="sidebar-link reco-side-xhr-的基本用法" data-v-cb1513f6>XHR 的基本用法</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#xhr-的封装" class="sidebar-link reco-side-xhr-的封装" data-v-cb1513f6>XHR 的封装</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#fetch-的使用详解" class="sidebar-link reco-side-fetch-的使用详解" data-v-cb1513f6>Fetch 的使用详解</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/JS/new/#前端文件上传的流程" class="sidebar-link reco-side-前端文件上传的流程" data-v-cb1513f6>前端文件上传的流程</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="./assets/js/app.46d64a8d.js" defer></script><script src="./assets/js/3.4298b55b.js" defer></script><script src="./assets/js/1.610d1c6f.js" defer></script><script src="./assets/js/22.1584174a.js" defer></script>
  </body>
</html>
