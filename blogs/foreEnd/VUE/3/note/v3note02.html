<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue3笔记-02 | 前端学习笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="./images/favicon.ico">
    <meta name="description" content="前端学习笔记">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="./assets/css/0.styles.7b00b7c5.css" as="style"><link rel="preload" href="./assets/js/app.38d69943.js" as="script"><link rel="preload" href="./assets/js/3.f347c82f.js" as="script"><link rel="preload" href="./assets/js/1.d0ce8f0b.js" as="script"><link rel="preload" href="./assets/js/26.79ea497c.js" as="script"><link rel="prefetch" href="./assets/js/10.68fa8d98.js"><link rel="prefetch" href="./assets/js/11.edbb6342.js"><link rel="prefetch" href="./assets/js/12.ffac62be.js"><link rel="prefetch" href="./assets/js/13.6e2906c6.js"><link rel="prefetch" href="./assets/js/14.9fa397d1.js"><link rel="prefetch" href="./assets/js/15.00692b78.js"><link rel="prefetch" href="./assets/js/16.ba02a69d.js"><link rel="prefetch" href="./assets/js/17.97590ce1.js"><link rel="prefetch" href="./assets/js/18.bc7f0110.js"><link rel="prefetch" href="./assets/js/19.1460e094.js"><link rel="prefetch" href="./assets/js/20.bd6bfdfc.js"><link rel="prefetch" href="./assets/js/21.7752edc4.js"><link rel="prefetch" href="./assets/js/22.752410f4.js"><link rel="prefetch" href="./assets/js/23.a0483ef9.js"><link rel="prefetch" href="./assets/js/24.5cda4743.js"><link rel="prefetch" href="./assets/js/25.a39e5229.js"><link rel="prefetch" href="./assets/js/27.1e2ba75d.js"><link rel="prefetch" href="./assets/js/28.4de15af9.js"><link rel="prefetch" href="./assets/js/4.21ef34d6.js"><link rel="prefetch" href="./assets/js/5.cb6e59aa.js"><link rel="prefetch" href="./assets/js/6.5ddc16d2.js"><link rel="prefetch" href="./assets/js/7.70ac515b.js"><link rel="prefetch" href="./assets/js/8.37e304ac.js"><link rel="prefetch" href="./assets/js/9.95b736f0.js">
    <link rel="stylesheet" href="./assets/css/0.styles.7b00b7c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>前端学习笔记</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>前端学习笔记</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><img src="./images/avatar.jpg" alt="前端学习笔记" class="logo"> <span class="site-name">前端学习笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/./" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/CS/" class="nav-link"><i class="iconfont reco-tag"></i>
  CS
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./tag/JS/" class="nav-link"><i class="iconfont reco-tag"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/JQ/" class="nav-link"><i class="iconfont reco-tag"></i>
  JQ
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/VUE/2/" class="nav-link"><i class="iconfont reco-tag"></i>
  VUE2
</a></li><li class="dropdown-subitem"><a href="/./tag/vue3/" class="nav-link"><i class="iconfont reco-tag"></i>
  VUE3
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/Git/" class="nav-link"><i class="iconfont reco-tag"></i>
  Git
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/ElementUI/" class="nav-link"><i class="iconfont reco-tag"></i>
  ElementUI
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Vant/" class="nav-link"><i class="iconfont reco-tag"></i>
  Vant
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Bootstrap/" class="nav-link"><i class="iconfont reco-tag"></i>
  Bootstrap
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      后端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/" class="nav-link"><i class="iconfont reco-tag"></i>
  Node
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/koa/" class="nav-link"><i class="iconfont reco-tag"></i>
  Koa
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/express/" class="nav-link"><i class="iconfont reco-tag"></i>
  EXpress
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/database/mysql/" class="nav-link"><i class="iconfont reco-tag"></i>
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/./timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>15</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>10</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/./" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/CS/" class="nav-link"><i class="iconfont reco-tag"></i>
  CS
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./tag/JS/" class="nav-link"><i class="iconfont reco-tag"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/JQ/" class="nav-link"><i class="iconfont reco-tag"></i>
  JQ
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/VUE/2/" class="nav-link"><i class="iconfont reco-tag"></i>
  VUE2
</a></li><li class="dropdown-subitem"><a href="/./tag/vue3/" class="nav-link"><i class="iconfont reco-tag"></i>
  VUE3
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/Git/" class="nav-link"><i class="iconfont reco-tag"></i>
  Git
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/ElementUI/" class="nav-link"><i class="iconfont reco-tag"></i>
  ElementUI
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Vant/" class="nav-link"><i class="iconfont reco-tag"></i>
  Vant
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Bootstrap/" class="nav-link"><i class="iconfont reco-tag"></i>
  Bootstrap
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      后端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/" class="nav-link"><i class="iconfont reco-tag"></i>
  Node
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/koa/" class="nav-link"><i class="iconfont reco-tag"></i>
  Koa
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/express/" class="nav-link"><i class="iconfont reco-tag"></i>
  EXpress
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/database/mysql/" class="nav-link"><i class="iconfont reco-tag"></i>
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/./timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>vue3笔记-02</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">vue3笔记-02</h1> <div data-v-f875f3fc><!----> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>8/30/2022</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>vue3</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="一-邂逅vue3"><a href="#一-邂逅vue3" class="header-anchor">#</a> 一：邂逅Vue3</h2> <h3 id="_1-1-认识vue"><a href="#_1-1-认识vue" class="header-anchor">#</a> 1.1.认识Vue</h3> <p><strong>vue是一套用于构建用户界面的渐进式框架</strong></p> <p><font color="cornflowerblue"><strong>什么是渐进式框架</strong></font></p> <p>表示我们可以在项目中一点点来引入和使用Vue，而不一定需要全部使用Vue来开发整个项目</p> <h3 id="_1-2-vue3带来的变化"><a href="#_1-2-vue3带来的变化" class="header-anchor">#</a> 1.2.Vue3带来的变化</h3> <ul><li>由<font color="orange">Options API </font>到<font color="orange"> Composition API</font> <ul><li>Options API包括data、props、methods、computed、生命周期等等这些选项</li> <li>存在比较大的问题是<strong>多个逻辑可能是在不同的地方</strong> <ul><li>比如<strong>created中会使用某一个method 来修改data的数据，代码的内聚性非常的差</strong></li></ul></li> <li><font color="cornflowerblue">Composition API 可以将相关联的代码 放到同一处进行处理，而不需要多个Options之间的查找</font></li></ul></li></ul> <h3 id="_1-3-cdn引入"><a href="#_1-3-cdn引入" class="header-anchor">#</a> 1.3.CDN引入</h3> <p>什么是CDN呢？<font color="cornflowerblue">CDN称之为内容分发网络</font></p> <ul><li>它是指通过**<font color="orange">相互连接的网络系统</font>**，利用<font color="orange"><strong>最靠近每个用户的服务器</strong></font></li> <li>更块，更可靠地将<font color="orange"><strong>音乐、图片、视频、应用程序及其他文件</strong></font>发送给用户</li> <li>来提供**<font color="orange">高性能、可扩展性及低成本的网络内容传递给用户</font>**</li></ul> <img src="./images/vue3/note/02/01.jpg"> <p><strong>计算器的案例</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
 
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./js/vue.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        	  &lt;h2&gt;{{count}}&lt;/h2&gt;
        &lt;button @click=&quot;add&quot;&gt;加一&lt;/button&gt;
        &lt;button @click=&quot;sub&quot;&gt;减一&lt;/button&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="_1-4-template属性"><a href="#_1-4-template属性" class="header-anchor">#</a> 1.4.template属性</h3> <p><strong><font color="orange">template属性</font></strong>：表示的是Vue需要我们渲染的模板信息</p> <ul><li>目前我们看到它的里面<strong>有很多HTML标签</strong>，这些<strong>标签会替换掉我们挂载到的元素</strong>，类似于innerHTML;</li></ul> <p>但是这个<strong>模板的写法有点过于别扭了，并且编辑器编写没有任何提示和代码的高亮</strong></p> <p><font color="orange">vue提供了两种方式</font></p> <ul><li><p>方式一：<font color="cornflowerblue">使用script标签，并且标识它为类型为x-template</font></p> <ul><li><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x-template<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;add&quot;</span><span class="token operator">&gt;</span>加一<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;sub&quot;</span><span class="token operator">&gt;</span>减一<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
    Vue.createApp({
        template: '#tem',
        data() {
            return {
                count:0
            }
        }
     })
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul></li> <li><p>方式二：<font color="cornflowerblue">使用任意标签（通常使用template标签，因为不会被浏览器渲染），需要设置id</font></p> <ul><li><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>加一<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>减一<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
    Vue.createApp({
        template: '#tem',
        data() {
            return {
                count:0
            }
        },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul></li> <li><p><strong>在createApp对象中，我们需要传入template以 # 开头</strong></p> <ul><li><font color="orange">如果字符串是以#开始，那么<strong>它将被用作document.querySelector查找id的</strong>，并且使用匹配元素的innerHTML作为模板字符串</font></li></ul></li></ul> <h3 id="_1-5-data属性"><a href="#_1-5-data属性" class="header-anchor">#</a> 1.5.data属性</h3> <p>data属性是传入一个函数，并且该函数需要返回一个对象</p> <ul><li>在vue2的时候，也可以转入一个对象 （虽然官方推荐是一个函数）</li> <li>在vue3的时候，必须传入一个函数，否则就会直接在浏览器中报错</li></ul> <p>data中返回的对象会被**<font color="orange">Vue的响应式系统劫持</font><strong>，</strong><font color="orange">之后对该对象的修改或者访问都会在劫持中被处理</font>**</p> <ul><li>所以我们在template中通过 访问count，可以从对象中获取到数据</li> <li>所以我们修改count的值时，template中也会发生改变</li></ul> <h3 id="_1-6-methods属性"><a href="#_1-6-methods属性" class="header-anchor">#</a> 1.6.methods属性</h3> <p><strong>methods属性</strong>是一个对象，通常我们会在这个对象中定义很多的方法；</p> <ul><li>这些方法可以<font color="orange">被绑定到template模板</font>中；</li> <li>在该方法中，我们可以<font color="orange">使用this关键字来直接访问到data中返回的对象的属性</font></li></ul> <h2 id="二-vu3基础语法"><a href="#二-vu3基础语法" class="header-anchor">#</a> 二：Vu3基础语法</h2> <h3 id="_2-1-vscode代码的片段"><a href="#_2-1-vscode代码的片段" class="header-anchor">#</a> 2.1.VsCode代码的片段</h3> <ul><li>我们在前面练习Vue的过程中，有些代码片段是需要经常写的，我们再VSCode中我们可以生成一个代码片段，方 便我们快速生成。</li> <li>VSCode中的代码片段有固定的格式，所以我们一般会借助于一个在线工具来完。</li> <li>具体的步骤如下
<ul><li>第一步，复制自己需要生成代码片段的代码</li> <li>第二步，https://snippet-generator.app/在该网站中生成代码片段</li> <li>第三步，在VSCode中配置代码片段；（文件 --&gt;  首选项 --&gt; 用户片段--&gt;html.json）</li></ul></li></ul> <h3 id="_2-2-mustache双大括号语法"><a href="#_2-2-mustache双大括号语法" class="header-anchor">#</a> 2.2.Mustache双大括号语法</h3> <ul><li>如果我们希望把数据显示到模板（template）中，<font color="cornflowerblue">使用最多的语法是 “Mustache”语法 (双大括号) 的文本插值</font>。
<ul><li>并且我们前端提到过，<strong>data返回的对象是有添加到Vue的响应式系统中</strong></li> <li>当<font color="orange"><strong>data中的数据发生改变时</strong>，<strong>对应的内容也会发生更新</strong></font></li> <li>当然，Mustache中不仅仅可以是data中的属性，<font color="orange">也可以是一个JavaScript的表达式</font>。</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span> {{message}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span> //基本使用
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span> {{counter*2}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span> //Javascript表达式
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{ true ? message : count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span> //三元运算符
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2-3-v-once指令"><a href="#_2-3-v-once指令" class="header-anchor">#</a> 2.3.v-once指令</h3> <p><strong>v-once用于指定元素或者组件只渲染一次</strong></p> <ul><li>当数据发生改变时，<font color="red"><strong>元素或者组件以及其所有的子元素</strong></font>将视为<font color="red"><strong>静态内容</strong></font>并且跳过；</li> <li>该指令可以用于<font color="red"><strong>性能优化</strong></font></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>. <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-once</span><span class="token punctuation">&gt;</span></span>{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> //只显示 0  //加一按钮触发更新数据，这里不会渲染了
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>加一<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
data() {
    return {  count:0 }
},
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-4-v-pre"><a href="#_2-4-v-pre" class="header-anchor">#</a> 2.4.v-pre</h3> <p><strong>v-pre用于跳过元素和它的子元素的编译过程，显示原始的Mustache标签</strong></p> <ul><li><font color="orange">跳过不需要编译的节点</font>，加快编译的速度；</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-pre</span><span class="token punctuation">&gt;</span></span>{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  //这里不会显示数据 0 ， 直接渲染 {{count}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
           <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_2-5-v-cloak"><a href="#_2-5-v-cloak" class="header-anchor">#</a> 2.5.v-cloak</h3> <p><font color="orange">和 CSS 规则如 [v-cloak] { display: none } 一起用时，这个指令可以隐藏未编译的 Mustache 标签直到组件实 例准备完毕。</font></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">[v-cloak]</span><span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tem<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-cloak</span> <span class="token punctuation">&gt;</span></span>{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-6-v-bind"><a href="#_2-6-v-bind" class="header-anchor">#</a> 2.6.v-bind</h3> <p>v-bind用于<font color="orange">绑定一个或多个属性值</font>，或者<font color="orange">向另一个组件传递props值</font>，<font color="cornflowerblue">v-bind有一个对应的语法糖，也就是简写方式 ：</font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>href<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span> // 绑定a元素

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>className<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> //普通绑定样式

&lt;div :class={'active': isActive }&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  // 动态绑定

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getClassObj()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  //methods 中获取

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[why,nba]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  // 直接传入一个数组

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[why,nba, isActive ? <span class="token punctuation">'</span>active<span class="token punctuation">'</span> : <span class="token punctuation">'</span><span class="token punctuation">'</span> ]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> // 三元运算符

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class&quot;[why,nba,{'active':</span> <span class="token attr-name">isActive}]&quot;</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> // 数组中也可以使用对象语法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><font color="orange"><strong>动态绑定属性</strong></font></p> <p>在某些情况下，我们<strong>属性的名称</strong>可能也不是固定的，如果<strong>属性名称不是固定</strong>的，我们<font color="orange">可以使用 :[属性名]=“值” 的格式来定义</font>，这种绑定的方式，我们称之为<font color="orange">动态绑定属性</font>；</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:[name]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><font color="orange"><strong>绑定一个对象</strong></font></p> <p>如果我们希望将<strong>一个对象的所有属性</strong>，<strong>绑定到元素上的所有属性</strong>，应该怎么做呢？</p> <p>可以直接<font color="orange">使用 v-bind 绑定一个 对象</font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// info对象会被拆解成div的各个属性
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-7-绑定style介绍"><a href="#_2-7-绑定style介绍" class="header-anchor">#</a> 2.7.绑定style介绍</h3> <ul><li>我们可以利用v-bind:style来绑定一些CSS内联样式
<ul><li>这次因为某些样式我们需要根据数据动态来决定</li> <li>比如某段文字的颜色，大小等等</li></ul></li> <li>CSS property 名可以<font color="orange">用驼峰式 (camelCase) </font>或<font color="orange">短横线分隔 (kebab-case，记得用引号括起来) 来命名</font></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{color:<span class="token punctuation">'</span>red<span class="token punctuation">'</span>, fontSize:size+<span class="token punctuation">'</span>px<span class="token punctuation">'</span>}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> //传入一个对象，值会来自于data

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>styleObj<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  // 对象数据：直接在data中定义好对象在这里使用

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[styleObj1, styleObj2]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  // :style的数组语法可以将多个样式对象应用到同一个元素上
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2-8-v-on的用法"><a href="#_2-8-v-on的用法" class="header-anchor">#</a> 2.8.v-on的用法</h3> <p><strong>v-on的使用：</strong></p> <ul><li>缩写 ：@</li> <li>参数 ：event</li> <li>修饰符
<ul><li>stop   点击事件阻止向上冒泡 类似于调用了 event . stopPropagstion()</li> <li>prevent  阻止默认事件 event . preventDefault()</li> <li>capture  添加事件侦听器时使用captrue模式。</li> <li>self 只当事件是从侦听器绑定的元素本身触发时才触发回调。</li> <li>{keyAlias} - 仅当事件是从特定键触发时才触发回调。</li> <li>once  只会触发一次回调</li> <li>left 只当点击鼠标左键时触发</li> <li>right 只当点击鼠标右键时触发</li> <li>middle 只当点击鼠标中建时触发</li> <li>passive - {passive: true} 模式添加侦听器</li></ul></li></ul> <p>如果我们希望一个元素<font color="orange">绑定多个事件</font>，这个时候可以传一个对象</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ click : btnClick, mousemove:mouseMove}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>v-on参数传递</strong></p> <ul><li>当通过methods中定义方法，以供@click调用时，需要注意参数问题</li> <li>情况一：如果该方法不需要额外参数，那么方法后的()可以不添加。
<ul><li>但是注意：如果方法本身中有一个参数，那么会默认将原生事件event参数传递进去</li></ul></li> <li>情况二：如果需要同时传入某个参数，同时需要event时，可以通过$event传入事件。</li></ul> <h3 id="_2-9-条件渲染"><a href="#_2-9-条件渲染" class="header-anchor">#</a> 2.9.条件渲染</h3> <p>在某些情况下，我们需要根据当前的条件决定某些元素或组件是否渲染，这个时候我们就需要进行条件判断了。</p> <p><strong>vue提供了下面的指令来进行条件判断：</strong></p> <ul><li>v-if</li> <li>v-else</li> <li>v-else-if</li> <li>v-show</li></ul> <p><font color="orange"><strong>v-if、v-else、v-else-if</strong></font></p> <ul><li>v-if、v-else、v-else-if用于根据条件来渲染某一块的内容:
<ul><li>这些内容只有在条件为 true 时，才会被渲染出来；</li> <li>这三个指令与JavaScript的条件语句if、else、else if类似</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model.number</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>score<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>score<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>score&gt;=90<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>优秀<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>score&gt;=60<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>良好<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>不及格<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>v-if的渲染原理：</strong></p> <ul><li><font color="cornflowerblue">v-if时惰性的；</font></li> <li><font color="cornflowerblue">当条件为false时，其判断的内容完全不会被渲染 或者 会被销毁掉；</font></li> <li><font color="cornflowerblue">当条件为true时，才会真正渲染条件块中的内容</font></li></ul> <p><strong>template元素：</strong></p> <ul><li>因为v-if是一个指令，所以必须将其添加到一个元素上：
<ul><li>但是如果我们希望切换的是多个元素呢？</li> <li>此时<font color="cornflowerblue">我们渲染div</font>，但是我们<font color="cornflowerblue">并不希望div这种元素被渲染</font></li> <li>这个时候，我们可以选择使用<font color="cornflowerblue">template</font></li></ul></li> <li>template元素可以当做不可见的包裹元素，并且在v-if上使用，但是最终template不会被渲染出来：
<ul><li>有点类似于小程序中的block</li></ul></li></ul> <p><font color="orange"><strong>v-show</strong></font></p> <ul><li>v-show 和 v-if用法看起来是一致的，也是根据一个条件决定是否显示元素或者组件</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong><font color="orange">v-show 和 v-if 的区别</font></strong></p> <ul><li><p>首先，在用法上的区别：</p> <ul><li><font color="cornflowerblue">v-show 是不支持template;</font></li> <li><font color="cornflowerblue">v-show不可以 和 v-else 一起使用</font></li></ul></li> <li><p>其次，本质的区别：</p> <ul><li><font color="cornflowerblue">v-show元素无论是否需要显示到浏览器上，它的DOM实际都是有渲染的，只是通过CSS的display属性来进行 切换</font>；</li> <li><font color="cornflowerblue">v-if当条件为false时，其对应的元素压根不会被渲染到DOM中；</font></li></ul></li> <li><p>开发中如何进行选择呢？</p> <ul><li><font color="cornflowerblue">如果我们的元素需要在显示和隐藏之间频繁的切换，那么就使用v-show</font></li> <li><font color="cornflowerblue">如果不会频繁的发生切换，那么使用v-if</font></li></ul></li></ul> <h3 id="_2-2-1-列表渲染"><a href="#_2-2-1-列表渲染" class="header-anchor">#</a> 2.2.1.列表渲染</h3> <ul><li>在真实开发中，我们往往会从服务器拿到一组数据，并且需要对其进行渲染
<ul><li>这个时候我们可以使用<font color="orange">v-for</font>来完成；</li> <li>v-for类似于JavaScript的for循环，可以用于遍历一组数据</li></ul></li></ul> <p><font color="red"><strong>v-for基本使用</strong></font></p> <p>v-for的基本格式是 <font color="orange">item in 数组</font></p> <ul><li>数组通常是来自<font color="orange">data 或者 prop</font>，也可以是其他的数据·</li> <li>item 是我们给每项元素起的一个<font color="orange">别名</font>，这个别名可以自己来定义</li></ul> <p>我们知道，在遍历一个数组的时候会经常需要拿到数组的索引</p> <ul><li>如果我们需要索引，可以使用格式： <font color="orange">&quot;(item, index) in 数组&quot;</font>；</li> <li>注意上面的顺序：数组元素项<font color="orange">item是在前面的，索引项index是在后面的</font>；</li></ul> <p><font color="red"><strong>v-for支持的类型</strong></font></p> <ul><li><p>v-for也支持遍历对象，并且支持有一二三个参数：</p> <ul><li>一个参数： &quot;value in object&quot;;</li> <li>二个参数： &quot;(value, key) in object&quot;;</li> <li>三个参数： &quot;(value, key, index) in object&quot;</li></ul></li> <li><p><font color="cornflowerblue">v-for同时也支持数字的遍历</font></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in 10&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong><font color="orange">template元素</font></strong></p> <p>类似于v-if ，你可以使用 template 元素来循环渲染一段包含多个元素的内容：</p> <ul><li>我们使用template来对多个元素进行包裹，而不是使用div来完成</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>(value,key)</span> <span class="token attr-name">in</span> <span class="token attr-name">info</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>{{key}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>{{value}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-2-2-认识vnode"><a href="#_2-2-2-认识vnode" class="header-anchor">#</a> 2.2.2.认识VNode</h3> <ul><li><p>我们先来解释一下VNode的概念</p> <ul><li><font color="cornflowerblue">VNode的全称是Virtual Node，也就是虚拟节点</font></li> <li>事实上，<font color="orange">无论是组件还是元素，它们最终在Vue中表示出来的都是一个个VNode</font></li> <li>VNode的本质是一个JavaScript的对象</li></ul> <p>vue中语句</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span>30px<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span>red</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>vue语句会先编译为vnode，然后生成虚实DOM 再渲染为真实DOM显示浏览器上</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'div'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token keyword">class</span><span class="token operator">:</span><span class="token string">'title'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;font-size&quot;</span><span class="token operator">:</span><span class="token string">'30px'</span>
            <span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'red'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span><span class="token string">'哈哈哈'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><img src="./images/vue3/note/02/02.jpg"></li></ul> <p><strong>虚实DOM</strong></p> <p><font color="cornflowerblue">虚实DOM是一堆的vue语句转换为VNode生成的虚实DOM</font></p> <img src="./images/vue3/note/02/03.jpg"> <h3 id="_2-2-3-v-for中的key的作用"><a href="#_2-2-3-v-for中的key的作用" class="header-anchor">#</a> <strong>2.2.3.v-for中的key的作用</strong></h3> <p>在使用 v-for 进行列表渲染时，我们通常会给元素或者组件绑定一个key属性</p> <p>这个key属性有什么作用呢？我们看下官方的解释</p> <ul><li><font color="orange">key属性主要时用在Vue的deff算法，在新旧nodes对比时辨识VNodes</font></li> <li>如果<font color="orange">不使用Key</font>，Vue会使用一种最大限度减少动态元素并且<font color="orange">尽可能的尝试就地修改 / 复用相同类型元素</font>的算法</li> <li>而<font color="orange">使用Key时</font>，它<font color="orange">会基于Key的变化重新排列元素的顺序，并且会移除 / 销毁Key不存在的元素</font></li></ul> <p><strong>我们来通过插入F的案例中，区分有key和没有的区别</strong></p> <p>这个案例是当我点击按钮时会在中间插入一个f</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in str<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertF<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>插入 F<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">str</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">insertF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>str<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>我们可以确定的时，这次更新对于ul 和 button 是不需要进行更新，需要<font color="orange">更新的是我们的 li 列表</font></li> <li>那么Vue中对于列表的更新究竟是如何操作的？</li></ul> <p>Vue中对于列表的更新 <strong>事实上会对于有Key和没有Key会进行判断调用两个不同的方法</strong></p> <ul><li><font color="orange">有Key，那么就使用patchKeyedChildren方法；</font></li> <li><font color="orange">没有Key，那么就使用pathUnKeyedChildren方法；</font></li></ul> <p><font color="orange"><strong>没有key的过程如下</strong></font></p> <img src="./images/vue3/note/02/04.jpg"> <p>通过上面的流程执行图，可以看出，是很影响执行性能</p> <ul><li><strong><font color="cornflowerblue">c和d来说它们事实上并不需要有任何的改动</font></strong></li> <li><font color="cornflowerblue"><strong>但是因为我们的c被f所使用了，所有后续所有的内容都要一次进行改动，并且最后进行新增；</strong></font></li></ul> <p><strong><font color="orange">有key的执行过程如下</font></strong> <img src="./images/vue3/note/02/05.jpg"></p> <p><font color="cornflowerblue"><strong>第一步操作是从头开始进行遍历、比较</strong></font></p> <img src="./images/vue3/note/02/06.jpg"> <ul><li><strong>a 和 b 是一致的会继续进行比较</strong></li> <li><strong>c 和 f 因为Key不一致，所以就会break跳出循环</strong></li></ul> <p><font color="cornflowerblue"><strong>第二步操作是从尾部开始进行遍历、比较</strong></font></p> <img src="./images/vue3/note/02/07.jpg"> <ul><li><strong>从后面元素一 一对应的进行比较</strong></li></ul> <p><strong><font color="cornflowerblue">第三步是如果旧节点遍历完毕，但是依然有新的节点，那么旧新增节点</font></strong></p> <img src="./images/vue3/note/02/08.jpg"> <p><font color="cornflowerblue"><strong>第四步是如果新的节点遍历完毕，但是依然有旧的节点，那么就移除旧节点：</strong></font></p> <img src="./images/vue3/note/02/09.jpg"> <p><strong><font color="cornflowerblue">第五步是最特色的情况，中间还有很多未知的或者乱序的节点</font></strong></p> <img src="./images/vue3/note/02/10.jpg"> <ul><li>中间，先进行查找是否有相同的key，如果旧VNode的列表没有和新VNode相同的key情况下就进行移除</li> <li>如果新VNode列表，没有从旧的VNode列表中找到的话，就新增VNode</li></ul> <p><font color="orange"><strong>所以我们可以发现，Vue在进行diff算法的时候，会尽量利用我们的key来进行优化操作</strong></font></p> <ul><li><font color="cornflowerblue">在没有key的时候我们的效率是非常低效的</font></li> <li><font color="cornflowerblue">在进行插入或者重置顺序的时候，保持相同的key可以让diff算法更加的高效</font></li></ul> <h2 id="三-options-api"><a href="#三-options-api" class="header-anchor">#</a> 三：Options-API</h2> <h3 id="_3-1-计算属性computed"><a href="#_3-1-计算属性computed" class="header-anchor">#</a> 3.1.计算属性computed</h3> <p>什么是计算属性呢？</p> <ul><li>官方没有给出直接的概念解释，而是说：<strong><font color="orange">对于任何包含响应式数据的复杂逻辑，你都应该使用计算属性</font></strong></li> <li>计算属性将被混入到组件实例中，所有getter 和 setter 的 this 上下文自动地绑定为组件实例；</li></ul> <p>计算属性的用法：</p> <ul><li>选项：computed</li> <li>类型：{[key:string]:Function | get:Function , set:Function}</li></ul> <p>注意：<strong><font color="orange">计算属性看起来像是一个函数，但是我们在使用的时候不需要加()</font></strong>，这个后面讲setter 和 getter时会讲到；</p> <ul><li><font color="orange">我们会发现无论是直观上，还是效果上计算属性都是更好的选择</font>；</li> <li><font color="orange">并且<strong>计算属性是由缓存</strong>的</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template id<span class="token operator">=</span><span class="token string">&quot;tem&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;score&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span>resultComputed<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">score</span><span class="token operator">:</span><span class="token number">0</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
       <span class="token function">resultComputed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行了computed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>score<span class="token operator">&gt;=</span><span class="token number">90</span> <span class="token operator">?</span> <span class="token string">&quot;优秀&quot;</span> <span class="token operator">:</span> <span class="token string">' 继续努力 '</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><font color="orange"><strong>Computed VS Methods</strong></font></p> <ul><li>在上面的实现思路中，我们会发现计算属性和methdos的实现看起来是差别是不大的，而且我们多次提到<font color="orange">计算属性有缓存的</font>。</li> <li>接下来我们来看一下同一个计算多次使用，计算属性和methods的差异</li></ul> <img src="./images/vue3/note/02/11.jpg"> <p>这是什么原因呢？</p> <ul><li>这是因为计算属性会基于它们的<font color="orange">依赖关系进行缓存</font>。</li> <li>在<font color="orange">数据不会发生变化</font>时，计算属性时<font color="orange">不需要重复计算的</font></li> <li>但是如果<font color="orange">依赖的数据发生变化</font>，在使用时，计算属性依然会<font color="orange">重新进行计算</font></li></ul> <p><font color="orange"><strong>计算属性的setter 和 getter</strong></font></p> <ul><li>计算属性在大多数情况下，只需要一个<strong>getter方法</strong>即可，所以我们会将计算属性直接<strong>写成一个函数</strong>。</li> <li>但是，如果我们确实想<strong>设置计算属性的值</strong> <ul><li>这个时候我们可以给计算属性设置一个<strong>setter方法</strong></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">fullName</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> names <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Vue内部是如何对我们传入的是一个getter，还是说是一个包含setter和getter的对象进行处 理的呢？</p> <ul><li>事实上非常的简单，Vue源码内部只是做了一个逻辑判断而已</li></ul> <img src="./images/vue3/note/02/12.jpg"> <h3 id="_3-2-watch侦听器"><a href="#_3-2-watch侦听器" class="header-anchor">#</a> 3.2.watch侦听器</h3> <p><strong>什么时侦听器呢？</strong></p> <ul><li>开发中我们在data返回的对象中定义了数据，这个数据通过<font color="orange">插值语法等方式绑定到template中</font>；</li> <li>当数据变化时，template会自动进行更新来显示最新的数据；</li> <li>但是在某些情况下，我们希望在<font color="orange">代码逻辑中监听某个数据的变化</font>，这个时候就需要<font color="orange">用侦听器watch</font>来完成了</li></ul> <p>侦听器的用法如下</p> <ul><li>选项：watch</li> <li>类型：{ [key: string] : string | Function  | Object | Array }</li></ul> <p><font color="orange"><strong>侦听器的基本使用</strong></font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">SearchValue</span><span class="token punctuation">(</span><span class="token parameter">newData<span class="token punctuation">,</span>oldData</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'侦听到新的值：'</span> <span class="token operator">+</span> newData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'之前旧的值：'</span> <span class="token operator">+</span> oldData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><font color="orange"><strong>侦听器的配置选项</strong></font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">SearchValue</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newData<span class="token punctuation">,</span>oldData</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'侦听到新的值：'</span> <span class="token operator">+</span> newData<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'之前旧的值：'</span> <span class="token operator">+</span> oldData<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 深度监听</span>
            <span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">// 加载就进行监听</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><font color="cornflowerblue"><strong>deep</strong></font></p> <p><strong>watch只是在侦听info的引用变化，对于内部属性的变化是不会做出响应式的</strong></p> <ul><li>这个时候我们可以使用一个<font color="orange">选项deep进行更深层的侦听</font>；</li></ul> <p><font color="cornflowerblue"><strong>immediate</strong></font></p> <p><strong>watch 是希望一开始的就会立即执行一次</strong></p> <ul><li>这个时候我们使用<font color="orange">immediate选项</font></li> <li>这个时候<font color="orange">无论后面你数据是否变化，侦听的函数都会有限执行一次</font>；</li></ul> <p><font color="orange"><strong>侦听器watch的其他使用方式</strong></font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 这里监听info对象的name中的数据，可以深度监听</span>
<span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{</span>
 <span class="token string-property property">'info.name'</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newData<span class="token punctuation">,</span>oldData</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'侦听到新的值：'</span> <span class="token operator">+</span> newData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'之前旧的值：'</span> <span class="token operator">+</span> oldData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>   
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>还有另外一种方式就是使用$watch 的 API：</strong></p> <p>可以<strong>在create的声明周期中，使用this.$watchs来侦听</strong></p> <ul><li><font color="cornflowerblue">第一个参数是要侦听的源；</font></li> <li><font color="cornflowerblue">第二个参数是侦听的回调函数callback;</font></li> <li><font color="cornflowerblue">第三个参数是额外的其他选项，比如deep、immediate</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token literal-property property">depp</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">imediate</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-3-v-model的基本使用"><a href="#_3-3-v-model的基本使用" class="header-anchor">#</a> 3.3.v-model的基本使用</h3> <p>表单提交是开发中非常常见的功能，也是和用户交互的重要手段；</p> <ul><li>比如用户在登录、注册时需要提交账号密码</li> <li>比如用户在检索、创建、更新信息时，需要提交一些数据</li></ul> <p>这些都要求我们可以在**<font color="cornflowerblue">代码逻辑中获取到用户提交的数据</font><strong>，我们通常会使用</strong><font color="cornflowerblue">v-model指令</font>**来完成：</p> <ul><li><font color="cornflowerblue">v-model指令</font>可以在表单input、select元素上创建**<font color="cornflowerblue">双向数据绑定</font>**</li> <li>v-model本质上不过时语法糖，它负责<font color="orange">监听用户的输入事件更新数据</font></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">''</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong><font color="orange">v-model的原理</font></strong></p> <p>官方有说到，v-model的原理其实时背后有两个操作</p> <ul><li><font color="cornflowerblue">v-bind绑定value属性的值</font>;</li> <li><font color="cornflowerblue">v-on绑定input事件监听到函数中，函数会获取最新的值赋值到绑定的属性中</font>；</li></ul> <img src="./images/vue3/note/02/13.jpg"> <p><font color="orange"><strong>v-model修饰符</strong></font></p> <p><font color="red"><strong>lazy 修饰符</strong></font></p> <ul><li>默认情况下，v-model在进行双向绑定时，<strong>绑定的是input事件，那么会每次内容输入后就将最新的值和绑定属性进行同步</strong></li> <li>如果<font color="cornflowerblue">我们在v-model后跟上lazy修饰符，那么会将绑定事件切换为 change事件，只有在提交时，（比如回车才会）才会触发，接收响应值</font></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>text<span class="token punctuation">'</span></span> <span class="token attr-name">v-model.lazy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>message<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span> {{message}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><font color="red"><strong>number 修饰符</strong></font></p> <p>vue中v-model<strong>默认绑定的数据类型都是String类型</strong>，<strong>输入的时数字，最后保存的类型都是String类型</strong>，即使在我们<strong>设置为input的type为number 最后也是String类型</strong>；</p> <p>如果我们<strong>希望转换为数字的类型</strong>，那么可以使用<font color="cornflowerblue"> .number 修饰符 </font>：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model.number</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>score<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>  // 这样的接收的score的数据类型就是number
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>另外：在我们进行<font color="cornflowerblue">逻辑判断</font>时，如果是一个<font color="cornflowerblue">string类型</font>，在<font color="cornflowerblue">可以转化的情况下会进行隐式转换为Number</font> 然后就可以进行判断进行比较的：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> score <span class="token operator">=</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>score<span class="token operator">&gt;</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// vue 这里会隐式转换为Number 然后进行判断比较</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'优秀'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><font color="red"><strong>trim 修饰符</strong></font></p> <p><font color="cornflowerblue">如果要自动过滤用户输入的 首 和 尾 的空白字符，可以<strong>给v-model添加trim修饰符</strong></font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-4-组件化开发"><a href="#_3-4-组件化开发" class="header-anchor">#</a> 3.4.组件化开发</h3> <p>组件化的思想</p> <ul><li>如果我们<font color="cornflowerblue">将一个页面中所有的处理逻辑全部放在一起</font>，处理起来就会<font color="cornflowerblue">变得非常的复杂</font>，而且不<font color="cornflowerblue">利于后续的管理以及扩张</font>；</li> <li>但是如果，我们讲<font color="cornflowerblue">一个页面拆分成一个个小的功能块</font>，每个<font color="cornflowerblue">功能块完成属于自己这部分独立的功能</font>，那么之后整个页面的<font color="cornflowerblue">管理和维护就变得非常的容易</font>了；</li> <li>如果我们将一个个功能块拆分后，就可以像<font color="cornflowerblue">搭建积木一下来搭建我们的项目</font></li></ul> <p>前面我们的<strong>createApp函数传入一个对象App</strong>，这个<strong>对象其实本质就是一个组件</strong>，也是<strong>我们应用程序的根组件</strong>；</p> <p>组件化提供了一种抽象，让我们可以开发出<strong>一个个独立可复用的小组件</strong>来构造我们的应用；</p> <p>任何的应用都会被<strong>抽象成一颗组件树</strong></p> <img src="./images/vue3/note/02/14.jpg"> <p><font color="red"><strong>注册组件的方式</strong></font></p> <p>注册组件分为两种：</p> <ul><li><font color="orange">全局组件</font>：<font color="cornflowerblue">在任何其他的组件都可以使用的组件</font></li> <li><font color="orange">局部组件</font>：<font color="cornflowerblue">只有在注册的组件中才能使用的组件</font></li></ul> <p><font color="orange"><strong>注册全局组件</strong></font></p> <ul><li>全局组件需要使用我们<font color="cornflowerblue"><strong>全局创建的app来注册组件</strong></font>；</li> <li>通过<font color="cornflowerblue"><strong>compoent方法传入组件名称</strong></font>，组件对象即可注册一个全局组件了；</li> <li>之后，我们可以在App组件的template中直接使用这个全局组件</li></ul> <p><strong>组件的名称</strong></p> <ul><li>在通过app.component注册一个组件的时候，<font color="cornflowerblue">第一个参数是组件的名称，第二个是组件</font></li></ul> <p><font color="orange">方式一：使用kebab-case(短横线分隔符) </font> 推荐</p> <ul><li>当使用 kebab-case (短横线分隔命名) 定义一个组件时，你也必须在引用这个自定义元素时使用 kebab-case</li></ul> <p><font color="orange">方式二：使用PascalCase（驼峰标识符）</font></p> <ul><li>当使用 PascalCase (首字母大写命名) 定义一个组件时，你在引用这个自定义元素时两种命名法都可以使用。也 就是说  和  都是可接受的；</li></ul> <p><font color="orange"><strong>注册局部组件</strong></font></p> <ul><li>全局组件往往是在应用程序一开始<strong>就会全局组件完成</strong>，那么<strong>就意味着如果某些组件我们并没有用到，也会一起被注册</strong> <ul><li>比如我们注册了<strong>三个全局组件</strong>：ComponentA、ComponentB、ComponentC；</li> <li>在开发中我们只使用了ComponentA、ComponentB，<strong>如果ComponentC没有用到但是我们依然在全局进行 了注册，那么就意味着类似于webpack这种打包工具在打包我们的项目时，我们依然会对其进行打包</strong></li> <li>这样最终打包出的JavaScript包就会有关于<strong>ComponentC</strong>的内容，用户在下载对应的JavaScript时也会<strong>增加包 的大小</strong></li></ul></li> <li><strong>所以在开发中我们通常使用组件的时候采用的都是局部注册：</strong> <ul><li><strong>局部注册</strong>是在我们需要使用到的组件中，<font color="cornflowerblue">通过<strong>components属性选项</strong>来进行注册</font>；</li> <li>比如之前的App组件中，我们有data、computed、methods等选项了，<strong>事实上还可以有一个components选项</strong>；</li> <li>该<strong>components选项对应的是一个对象</strong>，对象<font color="cornflowerblue">中的键值对是 组件的名称: 组件对象</font>；</li></ul></li></ul> <h2 id="四-webpack"><a href="#四-webpack" class="header-anchor">#</a> 四：webpack</h2> <h3 id="_4-1-认识webpack"><a href="#_4-1-认识webpack" class="header-anchor">#</a> 4.1.认识webpack</h3> <p>事实上随着前端的快速发展，目前前端的开发已经变的越来越复杂了</p> <ul><li>比如开发过程中我们需要通过<font color="orange">模块化的方式</font>来开发</li> <li>比如也会使用一些<font color="orange">高级的特性来加快我们的开发效率或者安全性</font>，比如通过ES6、TypeScript开发脚本逻辑，通过sass、less等方式来编写css样式</li> <li>比如开发完成后我们需要<font color="orange">将代码进行压缩、合并以及其他相关的优化</font></li></ul> <p><font color="orange"><strong>webpack是一个静态的模块化打包工具，为现代的javascript应用程序；</strong></font></p> <p>我们来对上面进行拆解</p> <ul><li><font color="orange">打包bundler</font>：<strong>webpack可以将帮助我们进行打包，所以它是一个打包工具</strong></li> <li><font color="orange">静态的static</font>：这样表述的原因是我们最终可以将代码打包成最终的静态资源（部署到静态服务器）；</li> <li><font color="orange">模块化module</font>：webpack默认支持各种模块化开发，ES Module、 CommonJS、AMD等</li> <li><font color="orange">现代的modern</font>：开发的 webpack的出现和发展</li></ul> <img src="./images/vue3/note/02/15.jpg"> <p><strong>Vue项目加载的文件有那些？</strong></p> <ul><li><strong>JavaScript的打包</strong>：
<ul><li>将ES6转换成ES5的语法</li> <li>TypeScript的处理，将其转换为JavaScript</li></ul></li> <li><strong>Css的处理</strong>：
<ul><li>CSS的文件模块的加载、提取；</li> <li>Less、Sass等预处理器的处理</li></ul></li> <li><strong>资源文件Img、font</strong>：
<ul><li>图片img文件的加载；</li> <li>字体font文件的加载；</li></ul></li> <li><strong>HTML资源的处理</strong> <ul><li>打包HTML资源的文件；</li></ul></li> <li><strong>处理vue项目的SFC文件.vue文件</strong></li></ul> <h3 id="_4-2-webpack的使用"><a href="#_4-2-webpack的使用" class="header-anchor">#</a> 4.2.webpack的使用</h3> <p>webpack的运行是<font color="orange">依赖Node环境</font>的，所以电脑上要有node环境</p> <ul><li>安装Node.js，并且同时会安装npm；</li></ul> <p><font color="red"><strong>webpack的安装</strong></font></p> <p>webpack的安装目前分为两个：<font color="orange"><strong>webpack</strong>、<strong>webpack-cli</strong></font></p> <p><font color="red"><strong>那么它们是什么关系呢？</strong></font></p> <ul><li>执行webpack命令，会执行node_modules 下.bin目录下的webpack</li> <li>webpack在执行时是依赖webpack-cli的，如果没有安装就会报错；</li> <li>而webpack-cli中代码执行时，才是真正利用webpack进行编译和打包的过程</li> <li>所以在安装webpack时，我们需要同时安装webpack-cli（第三方的脚手架事实上是没有使用webpack-cli的，而是类似于自己的vue-service-cli的东西）</li></ul> <img src="./images/vue3/note/02/16.jpg"> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install webpack webpack-cli -g    // 全局安装
npm install webpack webpack-cli -d    // 局部安装
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><font color="red"><strong>webpack的默认的打包</strong></font></p> <ul><li><p><font color="orange">全局的webpack打包</font></p> <ul><li>在目录下直接执行 webpack 命令  <strong><font color="cornflowerblue">webpack</font></strong></li> <li><font color="cornflowerblue">生成一个 dist 文件，里面存放一个main.js文件，就是我们打包之后的文件</font></li></ul></li> <li><p><font color="orange">局部的webpack打包</font></p> <ul><li><p>创建package.json文件，用于管理项目的信息，库依赖等  <font color="cornflowerblue"><strong>npm init</strong></font>   或者  <font color="cornflowerblue"><strong>npm init -y</strong></font></p></li> <li><p>在安装局部的 <font color="cornflowerblue">webpack，npm install webpack webpack-cli -D</font></p></li> <li><p>使用局部的webpack   <font color="cornflowerblue">npx webpack</font>， 进行打包</p></li> <li><p>也<font color="cornflowerblue">可以package.json中创建script 脚本</font>，执行脚本打包即可</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>然后使用 <font color="cornflowerblue">npm run build</font> 进行打包</p></li></ul></li></ul> <p><font color="orange">webpack 默认打包的文件入口路径是 src/index.js</font></p> <p><font color="orange">webpack 默认 打包后的文件出口路径是  dist/main.js</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;dist/main.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token comment">// webpack打包后将index.html 直接引入打包后dist下的main.js的文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4-3-webpack的依赖图"><a href="#_4-3-webpack的依赖图" class="header-anchor">#</a> 4.3.webpack的依赖图</h3> <ul><li>webpack事实上处理应用程序时，<font color="orange">它会根据命令或者配置文件找到入口文件</font>；</li> <li>从<font color="cornflowerblue">入口开始，会生成一个依赖关系图</font>，这个<strong>依赖关系图</strong>会包含应用程序中所需的所有模块（比如 JS文件、css文件、图片、字体等）</li> <li>然后<strong>遍历图结构，打包一个个模块</strong>（<font color="orange">根据文件不同使用不同的loader来解析</font>）</li></ul> <img src="./images/vue3/note/02/07.jpg"> <h3 id="_4-4-webpack的配置文件"><a href="#_4-4-webpack的配置文件" class="header-anchor">#</a> 4.4.webpack的配置文件</h3> <ul><li>在通常情况下，webpack需要打包的项目是非常复杂的，并且我们需要一系列的配置来满足要求，默认配置必然是不可以的。</li> <li>我们可以在<font color="orange">根目录下创建一个webpack.config.js文件，来作为webpak的配置文件</font></li></ul> <p><strong>配置webpack的打包的入口和出口</strong></p> <p>方法一</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npx webpack --entry ./src/main.js --outpah-path ./bulid
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>方法二</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在webpack.config.js 配置</span>
<span class="token keyword">const</span> path <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span> 
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./src/main.js'</span><span class="token punctuation">,</span> <span class="token comment">// 入口地址</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'bundle.js'</span><span class="token punctuation">,</span> <span class="token comment">// 打包后的文件名</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'./dist'</span><span class="token punctuation">)</span> <span class="token comment">// 绝对地址</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>指定配置文件</strong></p> <p>但是如果我们的配置文件并不是webpack.config.js的名字，而是其他的名字呢？</p> <ul><li>比如我们将webpack.config.js修改成了wk.config.js</li> <li>这个时候我们可以通过 --config 来指定对应的配置文件;</li></ul> <p>在package.json文件中修改</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
	<span class="token string-property property">&quot;bulid&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack --config wk.config.js&quot;</span>	
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>执行 npm run bulid 打包就行了</p> <h3 id="_4-5-webpack的loader"><a href="#_4-5-webpack的loader" class="header-anchor">#</a> 4.5.webpack的loader</h3> <h4 id="_4-5-1-css-loader"><a href="#_4-5-1-css-loader" class="header-anchor">#</a> 4.5.1.css-loader</h4> <p><font color="red"><strong>样式的配置</strong></font></p> <p><font color="orange"><strong>webpack css的样式的处理</strong></font></p> <p><font color="cornflowerblue">如果没有安装对应的loader和配置的话，webpack就会报错的</font></p> <ul><li><p>webpack 加载css样式的，需要一个loader 来加载这个css文件，但是<strong>loader</strong>是什么呢？</p> <ul><li><font color="orange">loader 可以用于对模块的源代码进行转换</font></li> <li>我们可以<font color="orange">将css文件也看成一个模块</font>，我们是<font color="orange">通过import来记载这个模块</font>的</li> <li>webpack并不知道如何进行加载，所以必须对应loader来完成</li></ul></li> <li><p>这个加载css文件 需要<font color="orange"><strong>css-loader</strong></font>进行加载</p></li></ul> <p>css-loader的安装 <font color="cornflowerblue"><strong>npm install css-loader -D</strong></font></p> <p><font color="cornflowerblue"><strong>css-loader的使用的方案</strong></font></p> <p><strong>方式一：内联方式</strong></p> <ul><li><p>在引入的样式前加上使用loader，并且使用 ! 分割</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;css-loader!../css/style.css&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p><strong>方式二：配置方式</strong></p> <p>配置方式表示的意思是在我们的webpack.config.js文件中写明配置信息：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./src/main.js'</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
    	<span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    	<span class="token literal-property property">path</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'./dist'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">// 模块</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span> <span class="token comment">// rule是一个对象，对象中设置多个属性</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// test属性用于文件进行匹配的，通常会设置成正则表达式</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'css-loader'</span> <span class="token comment">// 写法一</span>
                <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span> <span class="token comment">//写法二</span>
        	    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>  <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'css-loader'</span> <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// use 是一个对象，可以通过对象的属性来设置一些其他属性</span>
	<span class="token comment">// loader: 必须有一个loader属性，对应的值是一个字符串</span>
	<span class="token comment">// options: 可选的属性，值是一个字符串或者对象，值会被传入到loader中；</span>
	<span class="token comment">// query：目前已经使用options来替代</span>
<span class="token literal-property property">传递字符串（如：use</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">]</span><span class="token function">）是loader属性的简写方式</span><span class="token punctuation">(</span>如：use<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'style.loader'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="_4-5-2-style-loader"><a href="#_4-5-2-style-loader" class="header-anchor">#</a> 4.5.2.style-loader</h4> <p><font color="cornflowerblue"><strong>style-loader使用方案</strong></font></p> <ul><li>我们已经可以通过css-loader来加载css文件了
<ul><li>但是你会发现这个css在我们的<font color="orange">代码中并没有生效（页面没效果）</font></li></ul></li> <li>这是为什么呢？
<ul><li>因为css-loader只是负责将.css文件进行解析，并不会将解析的css插入到页面中</li> <li>如果我们希望再完成<strong>插入style的操作</strong>，那么我们还需要另外一个loader，<font color="orange">就是style-loader</font></li></ul></li> <li>安装style-loader
<ul><li>npm install style-loader -D</li></ul></li></ul> <p><strong>配置 style-loader</strong></p> <ul><li><p>在配置文件中，添加style-loader;</p></li> <li><p>注意：因为loader的执行顺序是从右到左（或者说从下到上，或者说从后前的），所以我们需要将style-loader写到css-loader的前面；</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'style-loader'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'css-loader'</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>重新执行编译npm run bulid 可以发现打包后的css已经生效了</p></li></ul></li></ul> <h4 id="_4-5-3-less-loader"><a href="#_4-5-3-less-loader" class="header-anchor">#</a> 4.5.3.less-loader</h4> <p><font color="cornflowerblue"><strong>如何处理Less文件？</strong></font></p> <ul><li><p>在我们开发中，我们可能会使用less、sass、stylus的预处理器来编写css样式，效率会更高。</p></li> <li><div class="language-less line-numbers-mode"><pre class="language-less"><code><span class="token variable">@fontSize<span class="token punctuation">:</span></span>30px<span class="token punctuation">;</span>
<span class="token variable">@fontWeight<span class="token punctuation">:</span></span>700<span class="token punctuation">;</span>
<span class="token selector">.content</span><span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span><span class="token variable">@fontSize</span><span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span><span class="token variable">@fontWeight</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <p><strong>Less工具处理</strong></p> <p>我们可以使用less工具来完成它的编译转换</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install less -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行如下命令可以手动转换将 less 文件转换为 css 文件</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npx lessc ./src/css/title.less title.css
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>less-loader处理</strong></p> <p>在项目中我们会编写大量的css，它们如何可以自动转换呢？</p> <ul><li><p>这个时候我们就<font color="orange">可以使用less-loader</font>，来<font color="orange">自动使用less工具转换less到css</font>；</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install less-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>配置 webpack.config.js</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">text</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
     <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
         <span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'style-loader'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'css-loader'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'less-loader'</span><span class="token punctuation">}</span>
     <span class="token punctuation">]</span>
<span class="token punctuation">}</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>执行 <strong>npm run bulid</strong>    less就可以自动转换为css ，并且页面也会生效了</p></li></ul> <h3 id="_4-6-认识postcss工具"><a href="#_4-6-认识postcss工具" class="header-anchor">#</a> 4.6.认识PostCSS工具</h3> <ul><li>什么是PostCSS呢？
<ul><li><font color="cornflowerblue">PostCSS是一个通过JavaScript来转换样式工具；</font></li> <li>这个工具可以帮助我们<font color="cornflowerblue">进行一些CSS的转换和适配，比如自动添加浏览器前缀、css样式的重置</font></li> <li>但是<font color="cornflowerblue">实现这些功能，我们需要借助于PostCSS对应的插件</font>；</li></ul></li> <li>如何使用PostCSS呢？主要就是两个步骤
<ul><li>第一步：查找PostCSS在构建工具的实现这些功能，我们需要借助于PostCSS对应的插件</li> <li>第二部：选择可以添加你需要的PostCSS相关的插件</li></ul></li></ul> <h4 id="_4-6-1-命令行中使用postcss"><a href="#_4-6-1-命令行中使用postcss" class="header-anchor">#</a> 4.6.1.命令行中使用postcss</h4> <ul><li><p>当然，我们能不能也直接在终端使用PostCss呢？</p> <ul><li><p>也是可以的，但是我们需要单独安装一个工具postcss-cli;</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install postcss postcss-cli -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <p>例如，我们现在将样式前添加前缀的css，则需要使用 postcss中的<font color="cornflowerblue">autoprefixer的插件</font></p> <p><font color="orange"><strong>插件autoprefixer</strong></font></p> <p>因为我们需要添加前缀，所以要安装autoprefixer</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install autoprefixer -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>直接使用postcss工具，并且制定使用autoprefixer</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npx postcss --use autoprefixer -o end.css ./src/css/style.css

// --use  要使用postcss下的autoprefixer的插件
//  end.css 需要添加前缀的文件
// ./src/css/style.css 添加前缀后的文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_4-6-2-webpack中使用postcss"><a href="#_4-6-2-webpack中使用postcss" class="header-anchor">#</a> 4.6.2.webpack中使用postcss</h4> <p>在<font color="cornflowerblue">webpack中使用postcss就是使用postcss-loader来处理的</font>；</p> <ul><li><p>我们来安装postcss-loader</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install postcss-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>进行loder的配置，<font color="cornflowerblue">可以在webpack.config.js中配置，由于配置的内容比较多，所以也可以在postcss.config.js中配置</font>，将内容抽出。</p></li></ul> <h5 id="_4-6-2-1-autoprefixer插件"><a href="#_4-6-2-1-autoprefixer插件" class="header-anchor">#</a> 4.6.2.1.autoprefixer插件</h5> <p>将需要添加前缀css样式上添加，所以要安装autoprefixer</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install autoprefixer -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在webpack中配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">text</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
           <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
                <span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'style-loader'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span><span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'css-loader'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                        <span class="token literal-property property">postcssOptions</span><span class="token operator">:</span><span class="token punctuation">{</span>
                            <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
                                <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span>
                            <span class="token punctuation">]</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
    		<span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>第二种写法</strong></p> <p>webpack的配置</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>rules:[
           {
                test: /\.css$/,  // 写法一
                // loader:&quot;css-loader&quot;  // 写法二
                // use:[&quot;style-loader&quot;,&quot;css-loader&quot;]  //写法三
                use:[
                    {loader:'style-loader'},
                    {loader:'css-loader'},
                    {loader:'postcss-loader'},
                ]
           },
        ]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>postcss.config.js的文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><font color="cornflowerblue">将之前的webpak的postcss的配置抽离到postcss.config.js文件中，postcss会自动查找到postcss.config.js文件的配置</font></p> <img src="./images/vue3/note/02/18.jpg"> <h5 id="_4-6-2-2-postcss-preset-env"><a href="#_4-6-2-2-postcss-preset-env" class="header-anchor">#</a> 4.6.2.2.postcss-preset-env</h5> <ul><li><p>事实上，<strong>在配置postcss-loader时，我们配置插件并不需要使用autoprefixer</strong></p></li> <li><p>我们可以使用另外一个插件：postcss.preset-env</p> <ul><li>postcss-preset-env也是一个postcss的插件</li> <li><font color="cornflowerblue">它可以帮助我们将一些现代的css特性，转成大多数浏览器认识的css，并且会根据目标浏览器或者运行时环境 添加所需的polyfill</font></li> <li><font color="cornflowerblue">也包括会自动帮助我们添加autoprefixer（所以相当于已经内置了autoprefixer）；</font></li></ul></li> <li><p>首先，我们<strong>需要安装postcss-preset-env</strong></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install postcss-preset-env -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>配置文件中直接替换之前的 autoprefixer 即可</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><img src="./images/vue3/note/02/19.jpg"> <h3 id="_4-7-webpack-加载图片"><a href="#_4-7-webpack-加载图片" class="header-anchor">#</a> 4.7.webpack 加载图片</h3> <p><font color="orange"><strong>webpack 5 版本以下的操作</strong></font></p> <h4 id="_4-7-1-file-loader"><a href="#_4-7-1-file-loader" class="header-anchor">#</a> 4.7.1.file-loader</h4> <p>要处理jpg、png等格式的图片，我们也需要有对应的loader：<font color="cornflowerblue"><strong>file-loader</strong></font></p> <ul><li>file-loader的作用就是帮助我们处理 <font color="cornflowerblue">import 或 require 方式</font> 引入一个资源文件，并且会将它放到我们输出的文 件夹中；</li></ul> <p>安装<font color="cornflowerblue"><strong>file-loader</strong></font></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install file-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><font color="cornflowerblue">在webpack.config.js文件中配置处理图片的Rule:</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|png)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'file-loader'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token comment">// 设置图片的名称</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'img/[name].[hash:8].[ext]'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><font color="orange"><strong>文件的命名的规则</strong></font></p> <ul><li><p>有时候我们处理后的文件名称按照一定的规则进行显示：</p> <ul><li>比如保留原来的文件名，扩展名，同时为了防止重复，包含一个hash值等；</li></ul></li> <li><p>webpack给我们提供了大量的<font color="cornflowerblue">placeHolders来显示不同的内容</font></p></li> <li><p>这里介绍几个最常用的placeholder：</p> <ul><li><font color="cornflowerblue"><strong>[ext]</strong>   处理文件的扩展名</font></li> <li><font color="cornflowerblue"><strong>[name]</strong>  处理文件的名称</font></li> <li><font color="cornflowerblue"><strong>[hash]</strong></font> 文件的内容，使用MD4的散列函数处理，生成的一个128位的<font color="cornflowerblue">hash的值(32位十六进制)</font>；</li> <li><font color="cornflowerblue"><strong>[hash:length]</strong></font> <font color="cornflowerblue">设置hash的长度，默认32个字符太长了</font></li> <li><strong><font color="cornflowerblue">[contentHash]</font></strong> <font color="cornflowerblue">在file-loader中[hash]结果是一致的(在webpack的一些其他地方不一样)</font></li> <li><font color="cornflowerblue"><strong>[path]</strong>  文件相对于webpack配置文件的路径；</font></li></ul></li></ul> <p><font color="orange"><strong>设置文件的存放的路径</strong></font></p> <ul><li>当然，我们刚才通过 img/ 已经设置了文件夹，这个也是vue 、react脚手架中最常见的设置方式。
<ul><li>其实按照这种设置方式就可以了；</li> <li>当然我们也可以通过outputPath来设置输出文件夹；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif|svg)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;[name].[hash:8].[ext]&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">outputPath</span><span class="token operator">:</span><span class="token string">&quot;img&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_4-7-2-url-loader"><a href="#_4-7-2-url-loader" class="header-anchor">#</a> 4.7.2.url-loader</h4> <ul><li><p>但是开发中我们往往是<font color="cornflowerblue">小的图片需要转换</font>，但是<font color="cornflowerblue">大的图片直接使用图片</font></p> <ul><li>这是因为<font color="cornflowerblue">小的图片转换base64之后可以和页面一起被请求</font>，**<font color="cornflowerblue">减少不必要的请求</font>**过程</li> <li>而<font color="cornflowerblue">大的图片也进行转换，反而会影响页面的请求速度</font>；</li></ul></li> <li><p>那么，我们如何可以限制那些大小的图片转换和不转换呢？</p> <ul><li><p>url-loader有一个<font color="orange">options属性limit</font>，可以用于设置转换的限制；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span>
   <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|png)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
   <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
       <span class="token punctuation">{</span>
           <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'url-loader'</span><span class="token punctuation">,</span>
           <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
               <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'img/[name].[hash:8].[ext]'</span><span class="token punctuation">,</span>
               <span class="token literal-property property">limit</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">*</span><span class="token number">1024</span>
           <span class="token punctuation">}</span>  
       <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul></li></ul> <h4 id="_4-7-3-asset-module-type"><a href="#_4-7-3-asset-module-type" class="header-anchor">#</a> 4.7.3.asset module type</h4> <p>在webpack 5 开始，我们可以直接使用<font color="cornflowerblue">资源模块类型（asset module type）</font>,来替代上面 这些 （raw-loader、url-loader、file-loader）;</p> <p>资源模块类型 ( <font color="cornflowerblue">asset module type</font> )，通过添加4种新的模块类型，来替换所有这些loader；</p> <ul><li><font color="orange">asset / resource  </font>发送一个单独的文件并导出 URL 。之前通过使用file-loader实现；</li> <li><font color="orange">asset / inline</font> 导出一个资源的 data URL，之前通过使用 url-loader实现；</li> <li><font color="orange">asset / source </font>导出资源的源代码，之前通过使用 raw - loader实现；</li> <li><font color="orange">asset </font> 在导出一个data URL 和发送一个单独的文件之间自动选择，之前通过使用url - loader，并且配置资源体积限制实现；</li></ul> <p><strong><font color="orange">加载图片，我们可以使用下面方式</font></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|png)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span>
    <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'asset'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><font color="orange"><strong>自定义文件输出的名称</strong></font></p> <p><font color="cornflowerblue">方式一 </font>   在rule中 ，添加一个generator 属性，并且设置filename</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|png)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'asset'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">generator</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'img/[name].[hash:8] [ext]'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><font color="cornflowerblue">方式二   </font>    修改output，添加assetModulefilename属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'js/bundle.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname__<span class="token punctuation">,</span><span class="token string">'./dest'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span><span class="token string">'img/[name].[hash:8] [ext]'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong><font color="orange">设置图片的大小判断是否转换为base64格式显示</font></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|png)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span>
        <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'asset'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">generator</span><span class="token operator">:</span><span class="token punctuation">{</span>
        	<span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'img/[name].[hash:8] [ext]'</span>
    	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    	<span class="token literal-property property">parser</span><span class="token operator">:</span><span class="token punctuation">{</span>
    		<span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span><span class="token punctuation">{</span>
    			<span class="token literal-property property">maxSize</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">*</span><span class="token number">1024</span>  <span class="token comment">// 图片小于10kb 的转换为 base64</span>
   			 <span class="token punctuation">}</span>
   		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_4-8-加载字体文件"><a href="#_4-8-加载字体文件" class="header-anchor">#</a> 4.8.加载字体文件</h3> <ul><li>如果我们需要使用**<font color="cornflowerblue">某些特殊的字体或者字体图标</font>**，那么我们会引入很多<font color="cornflowerblue"><strong>字体相关的文件</strong></font>，这些文件的处理也是一样的</li></ul> <p>字体打包会报错，因为<font color="cornflowerblue">无法正确的处理 eot、ttf、woff 等文件</font>；</p> <ul><li><p><strong>webpack版本为5之前的选择使用file-loader来处理</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(eot|ttf|woff)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span> <span class="token punctuation">,</span>
         <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
             <span class="token punctuation">{</span>
                 <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'file-loader'</span><span class="token punctuation">,</span>
                 <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                     <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'img/[name].[hash:6].[ext]'</span>
                 <span class="token punctuation">}</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>**webpack版本5之后的选择使用 <font color="cornflowerblue"> asset/resource</font> ** 来处理</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff2?|eot|ttf)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
         <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'assets/resource'</span><span class="token punctuation">,</span>
         <span class="token literal-property property">generator</span><span class="token operator">:</span><span class="token punctuation">{</span>
             <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'font/[name].[hash:6] [ext]'</span>
         <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul> <h3 id="_4-9-webpack-的-plugin-插件"><a href="#_4-9-webpack-的-plugin-插件" class="header-anchor">#</a> 4.9.webpack 的 Plugin ( 插件 )</h3> <ul><li>loader是用于<font color="cornflowerblue">特定的模块类型</font>进行转换</li> <li>Plugin可以用来<font color="cornflowerblue">执行更加广泛的任务</font>，比如打包优化，资源管理，环境变量注入等；</li></ul> <h4 id="_4-9-1-cleanwebpackplugin"><a href="#_4-9-1-cleanwebpackplugin" class="header-anchor">#</a> <strong>4.9.1.CleanWebpackPlugin</strong></h4> <ul><li><p>前面我们演示的过程中，<font color="cornflowerblue">每次修改一些配置，重新打包时，都需要手机删除dist文件夹</font>；</p> <ul><li>我们可以借助于一个插件来帮助我们完成，这个插件就是**<font color="cornflowerblue">CleanwebpackPlugin</font>**;</li></ul></li> <li><p>首先，我们先安装这个插件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm install clean<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">-</span><span class="token constant">D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>之后在插件中配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>CleanWebpackPlugin<span class="token punctuation">}</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h4 id="_4-9-2-htmlwebpackplugin"><a href="#_4-9-2-htmlwebpackplugin" class="header-anchor">#</a> 4.9.2.HtmlWebpackPlugin</h4> <ul><li>我们的HTML文件时编写在根目录下的，而最终打包的<font color="cornflowerblue">dist文件夹中是没有index.html文件</font>的。</li> <li>在<font color="cornflowerblue">进行项目部署</font>的时，必然也是<font color="cornflowerblue">需要有对应的入口文件index.html</font></li> <li>所以我们也需要对<font color="cornflowerblue">index.html进行打包处理</font>；</li></ul> <p>对HTML进行打包处理我们可以使用另外一个插件：<font color="cornflowerblue">HtmlWebpackPlugin</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm install html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">-</span><span class="token constant">D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>expors <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><font color="orange"><strong>生成 index.html 分析</strong></font></p> <p>我们会发现，现在自动在dist文件夹中，生成一个index.html的文件：</p> <ul><li><p>该文件中也<font color="cornflowerblue">自动添加了我们打包的 bundle.js 文件</font></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Webpack App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width,initial-scale=1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>defer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>js/bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>这个文件是如何生成的呢？</p> <ul><li>默认情况下是根据 <font color="cornflowerblue">ejs的一个模板</font>来生成的；</li> <li>在html-webpack-plugin的源码中，<font color="cornflowerblue">有一个default_index.ejs模块</font></li></ul></li></ul> <p><strong><font color="orange">自定义HTML模块</font></strong></p> <ul><li><p><strong>如果我们想在<font color="cornflowerblue">自己的模块中加入一些比较特别的内容</font></strong>：</p> <ul><li>比如在<font color="cornflowerblue">开发vue或者react项目时</font>，我们需要一个可以<font color="cornflowerblue">挂载后续组件的根标签</font> <div id="app"></div></li></ul> <p>这里在文件目录中<strong>src下新建的public文件里面的index.html 设置为自定义HTML模块</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width,initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;%= BASE_URL %&gt;favicon.ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>&lt;%= htmlWebpackPlugin.options.title %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><font color="orange">需要对 HtmlWebpackPlugin 进行配置指向 这个自定义的HTML文件</font></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
	<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/public/index.html'</span><span class="token punctuation">,</span>
         <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'webpack 测试项目'</span> <span class="token comment">// 这个title是改变页面的title , </span>
          <span class="token comment">//会通过  htmlwebpackPlugin.option.title来获取的值</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在运行代码时候会报错，因为在自定义模板的里面有这样的<font color="cornflowerblue">语法&lt;% 变量 %&gt;</font>，找不到BASE_URL变量，这个是<font color="cornflowerblue">EJS模块填充数据的方式</font>，这里就<font color="orange">使用webpack中 DefinePlugin 插件</font></p> <h4 id="_4-9-3-defineplugin"><a href="#_4-9-3-defineplugin" class="header-anchor">#</a> <strong><font color="orange">4.9.3.DefinePlugin</font></strong></h4> <p><strong>DefinePlugin允许在编译时创建配置的全局常量，是一个webpack内置的插件(不需要单独安装)</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> DefinePlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token constant">BASE_URL</span><span class="token operator">:</span><span class="token string">&quot;'./'&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这个时候，<font color="cornflowerblue">编译 template 就可以正确的编译了，会读取到BASE_URL的值</font>；</p> <h4 id="_4-9-4-copywebpackplugin"><a href="#_4-9-4-copywebpackplugin" class="header-anchor">#</a> 4.9.4.copyWebpackPlugin</h4> <ul><li><p>在vue的打包过程中，如果我们<font color="cornflowerblue">将一些文件放到public的目录下</font>，那么这个<font color="cornflowerblue">目录会被复制到dist文件夹</font>中。</p> <ul><li>这个复制的功能，我们可以使用 <strong>CopyWebpackPlugin</strong>来完成</li></ul></li> <li><p>安装CopyWebpackPlugin插件：</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install copy-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>接下来配置CopyWebpackPlugin 即可</p> <ul><li><font color="orange"><strong>patterns</strong></font>   复制的规则中设置</li> <li><font color="orange"><strong>from</strong></font>   设置从哪一个文件开始复制</li> <li><strong><font color="orange">to</font></strong>   复制到的位置，可以忽略，会默认复制到打包的目录下</li> <li><strong><font color="orange">globOptions</font></strong>   设置一些额外的选项，其中可以编写需要忽略的文件
<ul><li><font color="orange"><strong>ignore</strong></font>  设置忽略的文件的路径</li></ul></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">patterns</span><span class="token operator">:</span><span class="token punctuation">[</span>
           <span class="token punctuation">{</span>
                <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token string">&quot; ./src/public&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">globOptions</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">ignore</span><span class="token operator">:</span><span class="token punctuation">[</span>
                        <span class="token string">&quot;**/index.html&quot;</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
           <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_4-10-mode配置"><a href="#_4-10-mode配置" class="header-anchor">#</a> 4.10.Mode配置</h3> <p><font color="cornflowerblue">Mode配置选项，可以告知webpack使用响应模式的内置优化</font></p> <p>Mode的配置选项： <font color="orange">development</font>   和   <font color="orange">production  </font></p> <ul><li><p><strong>development     开发环境</strong></p> <ul><li><p>devtool :  'source-map'   //  默认 <font color="orange">eval</font>   或者  <font color="orange">source-map   </font></p> <p><font color="cornflowerblue">可以如果JS报错的情况下，可以快速找到错误的位置和行号</font></p></li></ul></li> <li><p><strong>production     生产环境</strong></p></li></ul> <h3 id="_4-11-babel"><a href="#_4-11-babel" class="header-anchor">#</a> 4.11.Babel</h3> <p><font color="orange"><strong>为什么需要babel？</strong></font></p> <ul><li><p>事实上，在开发中我们很少直接去接触babel，但是babel对于前端开发来说，目前是不可缺少的一部分：</p> <ul><li>开发中，我们想要<font color="cornflowerblue">使用ES6+的语法</font>，想要<font color="cornflowerblue">使用TypeScript</font>，<font color="cornflowerblue">开发React项目</font>，它们都是<font color="cornflowerblue">离不开Babel</font>的；</li> <li>所以，<font color="cornflowerblue">学习Babel</font>对于我们<font color="cornflowerblue">理解代码从编写到线上的转变过程至关重要</font></li></ul></li> <li><p><strong>那么，Babel到底是什么呢？</strong></p> <ul><li><p>Babel是一个<font color="cornflowerblue">工具链</font>，主要用于<font color="cornflowerblue">旧浏览器</font>或者环境中<font color="cornflowerblue">将ECMAScript 2015+代码转换为向后兼容版本的 JavaScript</font>；</p></li> <li><p>包括：语法转换、源代码转换等</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Babel转换后</span>

<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></li></ul> <h4 id="babel命令行的使用"><a href="#babel命令行的使用" class="header-anchor">#</a> <font color="orange"><strong>Babel命令行的使用</strong></font></h4> <p>babel本身可以作为一个<font color="cornflowerblue">独立的工具</font>（和postcss一样），不和webpack等构建工具配置来单独使用。</p> <ul><li><p>如果我们希望在命令行尝试使用babel，需要安装如下库</p></li> <li><p><font color="cornflowerblue"><strong>@babel/core</strong></font> <strong>babel的核心代码，必须安装</strong></p></li> <li><p><strong><font color="cornflowerblue">@babel/cli</font>   可以让我们在命令行使用babel</strong></p></li></ul> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install @babel/core @babel/cli -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong><font color="orange">在命令行中使用 babel 来处理我们的源代码</font></strong></p> <ul><li><p>处理指定的文件</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npx babel src --out-dir dist

npx babel src --out-file dist.js

// src 是指源文件的目录
//  --out-dir  指定要输出的文件夹 dist
//  --out-file  指定要输出的文件名 dist.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="插件的使用"><a href="#插件的使用" class="header-anchor">#</a> 插件的使用</h4></li></ul> <p>比如我们需要<font color="cornflowerblue">转换箭头函数</font>，那么我们就<font color="cornflowerblue">可以使用箭头函数转换相关的插件</font></p> <ul><li><div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install @babel/plugin-transform-arrow-functions -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npx babel ./es6.js --out-file dist.js --plugins=@babel/plugin-transfrom-arrow-functions
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p><font color="cornflowerblue">将cosnt 转化 var 也是需要安装对应的插件</font></p> <ul><li><p>需要使用 <strong>plugin-transform-block-scoping</strong>  来完成功能</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install @babel/plugin-transform-block-scoping -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npx babel src --out-dir dist --plugins=@babel/plugins-tranform-block-scoping,@babel/plugin-transform-arrow-functions
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h4 id="babel的预设preset"><a href="#babel的预设preset" class="header-anchor">#</a> Babel的预设preset</h4> <ul><li><p>但是如果要转换的内容过多，一个个设置是比较麻烦的，我们可以使用预设（preset）</p></li> <li><p><font color="cornflowerblue">安装@babel/preset-env </font>预设</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install @babel/perset-env -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>可以直接执行如下命令</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npx babel src -out-dir dist --present=@babel/perset-env
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h4 id="babel的底层原理"><a href="#babel的底层原理" class="header-anchor">#</a> Babel的底层原理</h4> <ul><li>babel是如何做到将我们的一段代码(ES6)转成另外一段代码（ES5）的呢？
<ul><li>就是**<font color="cornflowerblue">编译器</font>**，事实上我们可以将babel看成就是一个编译器</li> <li>Babel编译器的作用就是<font color="cornflowerblue">将我们的源代码</font>，转换成浏览器<font color="cornflowerblue">可以直接识别的另外一段源代码</font>。</li></ul></li> <li><strong>Babel也拥有编译器的工作流程</strong> <ul><li><font color="cornflowerblue">解析阶段</font></li> <li><font color="cornflowerblue">转换阶段</font></li> <li><font color="cornflowerblue">生成阶段</font></li></ul></li></ul> <p><strong>Babel编译器执行原理</strong></p> <img src="./images/vue3/note/02/20.jpg"> <h4 id="babel-loader"><a href="#babel-loader" class="header-anchor">#</a> <strong>babel-loader</strong></h4> <ul><li><p>在实际开发中，我们通常会在构建工具中通过配置babel来对其进行使用，比如webpack中。</p></li> <li><p>那么我们就需要去安装相关的依赖</p> <ul><li><p>如果之前已经安装了 @babel/core，那么这里不需要再次安装了；</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install babel-loader @babel/core -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>我们可以webpack.config.js里文件配置，在加载JS文件时，使用我们的babel</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token comment">//  一个一个安装对应转换的插件</span>
                    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
                        <span class="token string">&quot;@babel/plugin-transform-block-scoping&quot;</span>
                        <span class="token string">&quot;@babel/plugin-transform-arrow-functions&quot;</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ul></li></ul> <h4 id="babel-preset"><a href="#babel-preset" class="header-anchor">#</a> babel-preset</h4> <p>如果我们一个个去安装使用插件，那么需要手动来管理大量的babel插件，我们<font color="cornflowerblue">可以直接给webpack提供一个 preset</font>，webpack会根据我们的<font color="cornflowerblue">预设来加载对应的插件列表，并且将其传递给babel</font></p> <ul><li><p>比如常见的预设有三个：</p> <ul><li>env</li> <li>react</li> <li>TypeScript</li></ul></li> <li><p>安装 preset-env</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install @babel/preset-en
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>webpack.config.js的配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
     <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
         <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
             <span class="token literal-property property">persets</span><span class="token operator">:</span><span class="token punctuation">[</span>
                 <span class="token punctuation">[</span><span class="token string">&quot;@babel/perset-env&quot;</span><span class="token punctuation">]</span>
             <span class="token punctuation">]</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul> <h4 id="babel的配置文件"><a href="#babel的配置文件" class="header-anchor">#</a> <strong>Babel的配置文件</strong></h4> <ul><li><p>像之前一样，我们可以将babel的配置信息放到一个独立的文件中，babel给我们提供了两种配置文件的编写：</p> <ul><li><font color="cornflowerblue">babelrc.json (或者 .babelrc 、.js 、 .cjs   、 .mjs)  文件</font></li> <li><font color="cornflowerblue">babel.config.json  ( 或者 .js  、 .cjs   、  .mjs )  文件</font></li></ul></li> <li><p>它们两个有什么区别呢？目前很多的项目都采用了多包管理方式 ( babel 本身 、 element-plus、 umi等 )</p> <ul><li>babelrc.json  早期使用较多的配置方式，但是对于配置Monorepos项目是比较麻烦的；</li> <li><font color="cornflowerblue"><strong>babel.config.json</strong> (babe7以上版本的推荐)  可以直接作用于Monorepos项目的子包，更加推荐</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">persets</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token string">&quot;@babel/perset-env&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h3 id="_4-12-vue源码打包"><a href="#_4-12-vue源码打包" class="header-anchor">#</a> 4.12.Vue源码打包</h3> <p>vue文件打包 需要加载 vue-loader</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install vue-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在webpack的模板规则中进行配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'vue-loader'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="vue-打包后不同版本的解析"><a href="#vue-打包后不同版本的解析" class="header-anchor">#</a> <strong>Vue 打包后不同版本的解析</strong></h4> <ul><li><font color="orange">vue(.runtime).global(.prod).js</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
   <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;...&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>通过浏览器中的直接使用的</li> <li>我们之前通过CDN引入和下载的Vue就是这个版本</li> <li>会暴露一个全局的Vue来使用；</li> <li><font color="orange">vue(.runtime).esm-browser(.prod).js</font> <ul><li>用于通过原生 ES 模块导入使用 (在浏览器中通过</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;model&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>来使用</p> <ul><li><font color="orange"> vue(.runtime).esm-bundler.js</font> <ul><li>用于 webpack，rollup 和 parcel 等构建工具；</li> <li>构建工具中默认是vue.runtime.esm-bundler.js</li> <li>如果我们需要解析模板template，那么需要手动指定vue.esm-bundler.js；</li></ul></li> <li><font color="orange">vue.cjs (.prod).js</font> <ul><li>服务器端渲染使用；</li> <li>通过require()在Node.js中使用</li></ul></li></ul> <h4 id="vue-compiler-sfc"><a href="#vue-compiler-sfc" class="header-anchor">#</a> <strong>@vue/compiler-sfc</strong></h4> <p>打包依然会报错，这是<font color="cornflowerblue">因为我们必须添加@vue/compiler-sfc来对template进行解析</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install @vue/compiler-sfc -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>另外我们需要配置对应的Vue插件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>VueLoaderPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vue-loader/dist/index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4-13-devserver-和-vuecli"><a href="#_4-13-devserver-和-vuecli" class="header-anchor">#</a> 4.13.devServer 和 VueCli</h3> <p><strong>为什么要搭建本地服务器？</strong></p> <ul><li>目前我们开发的代码，为了运行需要两个操作：
<ul><li>操作一：<font color="cornflowerblue">npm run build</font> 编译相关代码</li> <li>操作二：通过 <font color="cornflowerblue">live server</font>  或者直接通过浏览器，打开index.html代码，查看效果</li></ul></li> <li>这个过程经常操作会影响我们的开发效率，我们希望可以做到，当<strong>文件发生变化</strong>时，可以<strong>自动的完成 编译 和 展示</strong>；</li> <li><strong>为了完成自动编译，webpack提供了几种可选的方式</strong>：
<ul><li>webpack wath mode；</li> <li>webpack-dev-server  （常用）；</li> <li>webpack-dev-middleware</li></ul></li></ul> <h4 id="webpack-watch"><a href="#webpack-watch" class="header-anchor">#</a> webpack watch</h4> <ul><li><p>webpack給我们提供了watch模式</p> <ul><li>在该模式下，webpack依赖图中的所有文件，只要有一个<font color="cornflowerblue">发生了更新</font>，那么代码将<font color="cornflowerblue">被重新编译</font>；</li> <li>我们<font color="cornflowerblue">不需要手动</font>去运行 npm run build 指令了；</li></ul></li> <li><p>如何开启watch呢？两种方式：</p> <ul><li><p>方式一：在导出的配置中，添加 watch: true；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token boolean">true</span> 
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>方式二：在启动webpack的命令中，添加<font color="cornflowerblue"> --watch的标识</font>；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// package.json</span>

<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li></ul> <h4 id="webpack-dev-server"><a href="#webpack-dev-server" class="header-anchor">#</a> webpack - dev - server</h4> <ul><li><p>上面的方式<strong>可以监听到文件的变化</strong>，但是事实上它本身世<strong>没有自动刷新浏览器的功能</strong>呢的：</p> <ul><li>当然，目前我们可以在VSCode中使用live-server来完成这样的功能；</li> <li>但是，我们希望在<font color="cornflowerblue">不使用live-server</font>的情况下，可以具备<font color="cornflowerblue">live reloading（实时重新加载）</font>的功能；</li></ul></li> <li><p><strong>安装 webpack-dev-server</strong></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install webpack-dev-server -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><strong>在webpack.config.js 文件 中 进行配置</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
   	<span class="token literal-property property">target</span><span class="token operator">:</span><span class="token string">'web'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><strong>在package.json 文件中 进行配置</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">&quot;scripts&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">serve</span><span class="token operator">:</span> <span class="token string">&quot;webpack serve&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <p><font color="cornflowerblue">dev server 中运行找不到文件，可以设置位置查找文件</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
<span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">contentBase</span><span class="token operator">:</span><span class="token string">'/build'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>webpack-dev-server 在编译之后 <font color="cornflowerblue">不会写入到任何输出dist打包文件</font>，而是将 <font color="cornflowerblue">打包文件保留在内存</font>中
<ul><li>事实上webpack-dev-server 使用了一库叫memfs ( memory-fs webpack 自己写的 )</li></ul></li></ul> <h4 id="认识模块热替换-hmr"><a href="#认识模块热替换-hmr" class="header-anchor">#</a> 认识模块热替换（HMR）</h4> <ul><li><strong>什么是HMR呢？</strong> <ul><li>HMR的全称是 <font color="cornflowerblue">Hot Module Replacement</font> ，翻译为<font color="cornflowerblue">模块热替换</font>；</li> <li>模块热替换是指在 <font color="cornflowerblue">应用程序运行过程中，替换、添加、删除模块，而<strong>无需重新刷新整个页面</strong></font></li></ul></li> <li><strong>HMR通过如下几种方式，来提高开发的速度：</strong> <ul><li><font color="cornflowerblue">不重新加载整个页面</font>，这样可以<font color="cornflowerblue">保留某些应用程序的状态不丢失</font></li> <li>只更新<font color="cornflowerblue">需要变化的内容，节省开发的时间</font>；</li> <li>修改了<strong>css、js源代码</strong>，会<strong>立即在浏览器更新</strong>，相当于直接在浏览器的devtools中直接修改样式；</li></ul></li> <li><strong>如何使用HMR呢？</strong> <ul><li>默认情况下，<strong>webpack-dev-server已经支持HMR</strong>，我们<strong>只需要开启即可</strong>；</li> <li>在不开启HMR的情况下，当我们修改了源代码之后，整个页面会自动刷新，使用的是live reloading；</li></ul></li></ul> <p><strong><font color="orange">开启HMR</font></strong></p> <ul><li><p><strong>修改webpack的配置</strong>：</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span><span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li> <li><p>但是你会发现，<strong>当我们修改了某一个模块的代码时，依然是刷新的整个页面</strong></p> <ul><li><p>这是因为，我们需要去<font color="cornflowerblue">指定哪些模块发生更新时</font>，进行HMR；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span><span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>host<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'/util.js'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'util更新了'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li></ul> <p><font color="orange"><strong>框架的HMR</strong></font></p> <p>有一个问题：在开发其他项目时，<strong>我们是否需要经常手动去写入 module.hot.accpet相关的API呢？</strong></p> <ul><li>比如<strong>开发Vue</strong>、<strong>React项目</strong>，我们修改了组件，，希望进行热更新，这个时候应该如何去操作呢？
<ul><li>事实上社区已经针对这些有很成熟的解决方案了；</li> <li>比如vue开发中，我们使用<font color="cornflowerblue">vue-loader</font>，此loader支持vue组件的HMR，提供开箱即用的体验</li> <li>比如react开发中，有<font color="cornflowerblue">React Hot Loader</font>，实时调整react组件（目前React官方已经弃用了，改成使用reactrefresh）；</li></ul></li></ul> <p><font color="orange"><strong>HMR的原理</strong></font></p> <ul><li>那么HMR的原理是什么呢？如何可以做到只更新一个模块中的内容呢？
<ul><li>webpack-dev-server会创建两个服务：<font color="cornflowerblue">提供静态资源的服务（express）和 Socket服务（net.Socket）</font>；</li> <li>express server<font color="cornflowerblue">负责直接提供静态资源的服务</font>（<strong>打包后的资源直接被浏览器请求和解析</strong>）；</li></ul></li> <li>HMR Socket Server ， 是一个socket的长连接
<ul><li>长连接有一个最好的<font color="cornflowerblue">好处是建立连接后双方可以通信</font>（服务器可以直接发送文件到客户端）；</li> <li>当服务器监<strong>听到对应的模块发生变化</strong>时，会生成<font color="cornflowerblue">两个文件.json（manifest文件）和.js文件（update chunk）</font>；</li> <li>通过长连接，可以直接<font color="cornflowerblue">将这两个文件主动发送给客户端</font>（浏览器）</li> <li>浏览器<strong>拿到两个新的文件</strong>后，通过<font color="cornflowerblue">HMR runtime机制，加载这两个文件，并且针对修改的模块进行更新</font>；</li></ul></li></ul> <img src="./images/vue3/note/02/21.jpg"> <h3 id="_4-14-hsot、port、open、compress"><a href="#_4-14-hsot、port、open、compress" class="header-anchor">#</a> 4.14. hsot、port、open、compress</h3> <ul><li><font color="cornflowerblue">port设置监听的端口</font>，默认情况下是8080</li> <li><font color="cornflowerblue">open是否打开浏览器</font>：
<ul><li>默认值是false，设置为true会打开浏览器</li></ul></li> <li><font color="cornflowerblue">compress是否为静态文件开启gzip compression</font>：
<ul><li>默认值是false，可以设置为true；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span><span class="token string">'192.168.0.160'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span><span class="token number">7777</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-15-proxy"><a href="#_4-15-proxy" class="header-anchor">#</a> 4.15. Proxy</h3> <ul><li><p><strong>proxy 是我们开发中非常常用的一个配置选项，它的目的设置代理来解决跨域访问的问题</strong></p> <ul><li>比如我们的<font color="cornflowerblue">一个api请求是 http://localhost:8888</font>，但是<font color="cornflowerblue">本地启动服务器的域名是 http://localhost:8000，</font> <strong>这个时候发送网络请求就会出现跨域的问题；</strong></li> <li>那么我们可以将<strong>请求先发送到一个代理服务器，代理服务器和API服务器没有跨域的问题，就可以解决我们的跨域问题了</strong>；</li></ul></li> <li><p><strong>我们可以进行如下的设置</strong></p> <ul><li><font color="cornflowerblue">target</font>：表示的是代理到目标地址，比如 /api-hy/moment会被代理到 http://localhost:8888/apihy/moment；</li> <li><font color="cornflowerblue">pathRewrite</font> :  默认情况下，我们的 <font color="cornflowerblue">/api-hy 也会被写入到URL中，如果希望删除，可以使用pathRewrite</font>；</li> <li><font color="cornflowerblue">secure </font>:  默认情况下不接收转发到https的服务器上，如果希望支持，可以设置为false；</li> <li><font color="cornflowerblue">changeOrigin</font> :  它表示是否更新代理后请求的headers中host地址；</li></ul></li></ul> <h2 id="五-vuecli和vite"><a href="#五-vuecli和vite" class="header-anchor">#</a> 五：VueCLI和Vite</h2> <h3 id="_5-1-vuecli-安装-和-使用"><a href="#_5-1-vuecli-安装-和-使用" class="header-anchor">#</a> 5.1.VueCLI 安装 和 使用</h3> <ul><li><p><strong>什么是Vue脚手架？</strong></p> <ul><li>我们前面学习了如何通过webpack配置Vue的开发环境，但是在真实开发中我们<strong>不可能每一个项目从头来完成所有的webpack配置</strong>，这样显示<strong>开发的效率会大大的降低</strong></li> <li>所以在真实开发中，我们通常会使用脚手架来创建一个项目，Vue的项目我们使用的就是Vue的脚手架；</li> <li>脚手架其实是建筑工程中的一个概念，在我们软件工程中也会将一些帮助我们<font color="cornflowerblue">搭建项目的工具称之为脚手架</font>；</li></ul></li> <li><p><strong>Vue的脚手架就是Vue CLI</strong></p> <ul><li>CLI是Command-Line Interface, 翻译为命令行界面；</li> <li>我们可以通过CLI选择项目的配置和创建出我们的项目；</li> <li>Vue CLI已经内置了webpack相关的配置，我们不需要从零来配置；</li></ul></li> <li><p><strong>安装或者升级VueCLI</strong></p> <ul><li><p>我们是进行<font color="cornflowerblue">全局安装</font>，这样在任何时候都可以通过vue的命令来创建项目；</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install @vue/cli -g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><font color="cornflowerblue">升级Vue CLI </font>，如果是比较旧的版本，可以通过下面的命令来升级</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm update @vue/cli -g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <p><font color="red"><strong>vue 命令来创建项目</strong></font></p> <ul><li><p>通过Vue的命令来创建项目</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>vue create 项目的名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <img src="./images/vue3/note/02/22.jpg"> <ul><li><p>项目的目录结构</p> <img src="./images/vue3/note/02/23.jpg"></li></ul> <p><font color="red"><strong>Vue CLI的运行原理</strong></font></p> <img src="./images/vue3/note/02/24.jpg">
### 5.2.认识 Vite
<ul><li>Webpack 是目前整个前端使用最多的构建工具，但是除了webpack之后也有其他的一些构建工具
<ul><li>比如rollup、parcel、gulp、<strong>vite</strong> 等等</li></ul></li> <li>什么是vite呢？ 官方的定位：<font color="cornflowerblue">下一代前端开发与构建工具</font>；
<ul><li>我们知道在实际开发中，我们编写的代码往往是不能被浏览器直接识别的，比如ES6、TypeScript、Vue文件等</li> <li>所以我们必须通过构建工具来对代码进行转换、编译，类似的工具有webpack、rollup、parcel；</li> <li>但是随着项目越来越大，需要处理的JavaScript呈指数级增长，模块越来越多；</li> <li>构建工具需要很长的时间才能开启服务器，HMR也需要几秒钟才能在浏览器反应出来</li></ul></li> <li>Vite (法语意为 &quot;快速的&quot;，发音 /vit/) <font color="cornflowerblue">是一种新型前端构建工具，能够显著提升前端开发体验</font>。</li></ul> <p><font color="red">如果我们不借助于其他工具，直接使用ES Module来开发有什么问题？</font></p> <ul><li>首先，我们会发现在使用loadash时，加载了上百个模块的js代码，对于浏览器发送请求是巨大的消耗</li> <li>其次，我们的代码中如果有TypeScript、less、vue等代码时，浏览器并不能直接识别</li></ul> <h3 id="_5-3-vite的安装和使用"><a href="#_5-3-vite的安装和使用" class="header-anchor">#</a> 5.3.Vite的安装和使用</h3> <ul><li><p>注意：<font color="cornflowerblue">Vite本身也是依赖Node的，所以也需要安装好Node环境</font></p> <ul><li>并且Vite要求Node版本是大于12版本的</li></ul></li> <li><p>首先，我们安装一下vite工具</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install vite -g  // 全局安装
npm install vite -D  // 局部安装
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>通过vite来启动项目</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npx vite
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="_5-4-vite对css的支持"><a href="#_5-4-vite对css的支持" class="header-anchor">#</a> 5.4.Vite对css的支持</h3> <ul><li><p><font color="cornflowerblue">vite可以直接支持css的处理</font></p> <ul><li>直接导入css即可</li></ul></li> <li><p>vite可以直接支持css预处理器，比如less</p> <ul><li><p>直接导入less</p></li> <li><p>之后安装less编译器就可以直接执行less</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install less -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>vite直接支持postcss的转换</p> <ul><li><p><font color="cornflowerblue">只需要安装postcss，并且配置postcss.config.js的配置文件即可</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install postcss postcss-preset-env -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><font color="cornflowerblue">在postcss.config.js文件中进行配置文件即可</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>		
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">div</span><span class="token punctuation">{</span>
  <span class="token property">-webkit-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
     <span class="token property">-moz-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token property">-ms-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
          <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-5-vite对typescript的支持"><a href="#_5-5-vite对typescript的支持" class="header-anchor">#</a> 5.5.Vite对TypeScript的支持</h3> <ul><li><font color="cornflowerblue">vite对TypeScript是原生支持的，它会直接使用<strong>ESBuild</strong>来完成编译</font>：
<ul><li>只需要直接导入即可</li></ul></li> <li>如果我们查看浏览器中的请求，会发现请求的依然是ts的代码
<ul><li>这是<font color="cornflowerblue">因为vite中的服务器Connect会对我们的请求进行转发</font>；</li> <li>获取ts编译后的代码，给浏览器返回，浏览器可以直接进行解析</li></ul></li> <li>注意：在vite2中，已经不再使用Koa了，而是使用Connect来搭建的服务器</li></ul> <p><strong><font color="red">ESBuild的构建速度</font></strong></p> <ul><li>ESBuild的构建速度和其他构建工具速度对比</li></ul> <img src="./images/vue3/note/02/25.jpg"> <ul><li><strong>ESBuild为什么这么快呢？</strong> <ul><li>使用<font color="cornflowerblue">Go语言编写的，可以直接转换为机器代码，而无需经过字节码</font>；</li> <li>ESBuild 可以<font color="cornflowerblue">充分利用CPU的多内核</font>，尽可能让它们饱和运行；</li> <li>ESBuild的所有内容都是<font color="cornflowerblue">从零开始编写</font>的，而<font color="cornflowerblue">不是使用第三方</font>，所以从一开始就可以考虑各种性能问题；</li></ul></li></ul> <h3 id="_5-6-vite对vue的支持"><a href="#_5-6-vite对vue的支持" class="header-anchor">#</a> 5.6.Vite对vue的支持</h3> <p><strong>vite对vue提供第一优先级支持</strong></p> <ul><li><strong><font color="cornflowerblue">Vue3 单文件组件支持：  @/vitejs/plugin-vue</font></strong></li> <li>Vue3 JSX支持 ： @/vitejs/plugin-vue-jsx</li> <li>Vue2 支持：undefind/vite-plugin-vue2</li></ul> <p><strong>1、安装支持vue组件</strong></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install @vitejs/plugin-vue -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>2、在vite.config.js文件中配置</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plguin-vue'</span>

module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_5-7-vite打包项目"><a href="#_5-7-vite打包项目" class="header-anchor">#</a> 5.7.vite打包项目</h3> <p>我们可以<strong>直接通过vite build 来完成当前项目的打包工具</strong>：</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npx vite build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们可以通过preview的方式，开启一个本地服务来预览vite打包后的效果</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npx vite preview
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><font color="red">执行相关的命令的时候，可以在package.json中配置</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// package.json文件</span>

<span class="token string-property property">&quot;script&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;serve&quot;</span><span class="token operator">:</span><span class="token string">'vite'</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span><span class="token string">'vite build'</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;preview&quot;</span><span class="token operator">:</span><span class="token string">'vite preview'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这样也就可以  <strong>npm run preview</strong>  这样的命令也可以进行执行相关命令</p> <h3 id="_5-8-vite脚手架工具"><a href="#_5-8-vite脚手架工具" class="header-anchor">#</a> 5.8.vite脚手架工具</h3> <ul><li><p>在开发中，我们<font color="cornflowerblue">不可能所有的项目都使用vite从零去搭建</font>，比如一个react项目、Vue项目；</p> <ul><li>这个时候vite还给我们提供了对应的脚手架工具；</li></ul></li> <li><p>所以Vite实际上是有两个工具的：</p> <ul><li><font color="cornflowerblue">vite : 相当于是一个构件工具</font>，类似于webpack、rollup</li> <li>@vitejs/create-app : 类似vue-cli、create-react-app</li></ul></li> <li><p>如何使用vite脚手架工具呢？</p> <ul><li>安装vite脚手架</li></ul> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install @vitejs/create-app -g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>创建项目</li></ul> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>create-app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h2 id="六-vue组件化开发"><a href="#六-vue组件化开发" class="header-anchor">#</a> 六：Vue组件化开发</h2> <p><font color="red"><strong>vscode的提供vue开发的相关开发的插件</strong></font></p> <ul><li><strong>Vue Language Features (Volar)</strong></li> <li><strong>Vetur</strong></li> <li><strong>Vue 3 Snippets</strong></li> <li><strong>Vue VSCode Snippets</strong></li></ul> <h3 id="_6-1-认识组件的嵌套和通信"><a href="#_6-1-认识组件的嵌套和通信" class="header-anchor">#</a> 6.1.认识组件的嵌套和通信</h3> <ul><li>前面我们是将所有的逻辑放到一个App.vue中：
<ul><li>在之前的案例中，我们只是<font color="cornflowerblue">创建了一个组件App</font>；</li> <li>如果我们一个应用程序<font color="cornflowerblue">将所有的逻辑都放在一个组件中，那么这个组件就会变成非常的臃肿和难以维护</font></li> <li>所以组件化的核心思想应该是对<font color="cornflowerblue">组件进行拆分</font>，拆分<font color="cornflowerblue">成一个小小的组件</font>；</li> <li>再<font color="cornflowerblue">将这些组件组合嵌套在一起</font>，最终形成<font color="cornflowerblue">我们的应用程序</font>；</li></ul></li></ul> <p><strong>组件的拆分</strong></p> <img src="./images/vue3/note/02/26.jpg"> <p>按照如上的拆分方式后，我们开发对应的逻辑只需要去对应的组件编写就可</p> <p><font color="red"><strong>组件的通信</strong></font></p> <ul><li>在开发过程中，我们会经常遇到需要<strong>组件之间相互进行通信</strong>：
<ul><li>比如<font color="cornflowerblue">App可能使用了多个Header</font>，每个地方的Header展示的<font color="cornflowerblue">内容不同</font>，那么我们就需要使用者<font color="cornflowerblue">传递给Header一些数据</font>，让其进行展示</li></ul></li></ul> <p><strong>父子组件之间通信的方式</strong></p> <ul><li>父组件传递給子组件：通过props属性；</li> <li>子组件传递給父组件：通过$emit触发事件；</li></ul> <img src="./images/vue3/note/02/27.jpg"> <h4 id="父组件传递給子组件"><a href="#父组件传递給子组件" class="header-anchor">#</a> 父组件传递給子组件</h4> <ul><li><p>在开发中很常见的就是<font color="cornflowerblue"><strong>父子组件之间通信</strong></font>，比如父组件有一些数据，需要子组件来进行展示：</p> <ul><li>这个时候我们可以<font color="cornflowerblue"><strong>通过props来完成组件之间的通信</strong></font></li></ul></li> <li><p>什么是props呢？</p> <ul><li>Props是你可以在**<font color="cornflowerblue">组件上注册一些自定义的属性</font>**；</li> <li><font color="cornflowerblue"><strong>父组件给这些属性赋值，子组件通过属性的名称获取到对应的值</strong></font>；</li></ul></li> <li><p>props有两种常见的用法：</p> <ul><li><p><font color="cornflowerblue"><strong>方式一：字符串数组</strong></font>，数组中的字符串就是自定义属性的名称</p> <img src="./images/vue3/note/02/28.jpg"></li> <li><p><font color="cornflowerblue"><strong>方式二：对象类型</strong></font>，对象类型我们可以在指定属性名称同时，指定它需要的传递类型，是否必须，默认值等等</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">headerData</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span>Object<span class="token punctuation">,</span>
        <span class="token literal-property property">required</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 数组 和 对象 和 函数 需要这样写法</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>当使用对象语法的时候，我们可以对传入的内容限制更多：
<ul><li>比如指定传入的数据的类型：<font color="cornflowerblue"><strong>type</strong></font></li> <li>比如指定传入的是否必传数据： <font color="cornflowerblue"><strong>required</strong></font></li> <li>比如指定的数据没有传入的时候的默认值：<strong><font color="cornflowerblue">default</font></strong></li></ul></li></ul></li></ul></li></ul> <p><strong>细节：Prop 的大小写命名</strong></p> <ul><li>HTML 中的<font color="cornflowerblue"> 属性名是大小写不敏感的</font>，所以浏览器会<font color="cornflowerblue">把所有大写字符解释为小写字符</font>；</li> <li>这意味着当你使用 DOM 中的模板时，<font color="cornflowerblue">camelCase (驼峰命名法) 的 prop 名需要使用其等价的 kebab-case (短 横线分隔命名) 命名</font></li></ul> <p><strong><font color="red">非Prop的Attribute</font></strong></p> <ul><li><p><strong>什么是非Prop的Attribute呢？</strong></p> <ul><li>当我们<font color="cornflowerblue">传递给一个组件某个属性</font>，但是<font color="cornflowerblue">该属性并没有定义对应的props或者emits时</font>，就称之为 <font color="cornflowerblue">非Prop的 Attribute</font></li> <li>常见的包括 <font color="cornflowerblue">class、style、id属性</font></li></ul></li> <li><p><strong>Attribute继承</strong></p> <ul><li><p>当组件有<strong>单个根节点时</strong>，<strong>非Prop的Attribute将自动添加到根节点的Attribute中</strong></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue 文件

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:headerData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Header</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// Header.vue 组件
// 当头部Header文件组件只有一个根元素，会自动继承父元素的非props的属性
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header cs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li> <li><p><strong>禁用 Attribute 继承和多根节点</strong></p> <ul><li><p>如果我们<font color="cornflowerblue">不希望组件的根元素继承非props</font>，可以在组件中<font color="cornflowerblue"><strong>设置 inheritAttrs : false</strong></font></p></li> <li><p>如果我们希望在子组件的根元素里面的标签元素使用到父元素的非props的属性</p> <ul><li>我们<font color="cornflowerblue">可以通过**$attrs**来访问所有的非props的属性</font></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        头部
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span>  <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs.class<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{headerData}}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">inheritAttrs</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 禁止根元素继承父组件的非props</span>
   <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul></li></ul> <h4 id="子组件传递给父组件"><a href="#子组件传递给父组件" class="header-anchor">#</a> 子组件传递给父组件</h4> <p><font color="red"><strong>自定义事件的流程</strong></font></p> <p>内部其实时监听两个按钮的点击，点击之后通过 $emit的方式发出去事件</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tab-change</span> <span class="token attr-name">:tabList</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:tabIndex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabIndex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@tabChangeIndex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabChangeIndex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tab-change</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token function">tabChangeIndex</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>tabIndex <span class="token operator">=</span> index
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// TabChange.vue
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TabChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tabActive(index)<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item,index) in tabList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">emits</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'tabChangeIndex'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token function">tabActive</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'tabChangeIndex'</span><span class="token punctuation">,</span>index<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="非父子组件的通信"><a href="#非父子组件的通信" class="header-anchor">#</a> 非父子组件的通信</h4> <p><strong>主要使用到的是Provide/Inject</strong></p> <ul><li>Provide / Inject用<strong>于非父子组件之间共享数据</strong> <ul><li>比如有<font color="cornflowerblue">一些深度嵌套的组件，子组件想要获取父组件的部分内容</font></li></ul></li> <li>对于这种情况下，我们可以使用 Provide 和 Inject ：
<ul><li>无论层级结构有多深，父组件都可以作为其所有子组件的<font color="cornflowerblue">依赖提供者</font></li> <li>父组件有一个 <font color="cornflowerblue"><strong>provide 选项</strong></font> 来提供数据</li> <li>子组件有一个 <font color="cornflowerblue"><strong>inject 选项</strong></font> 来开始使用这些数据；</li></ul></li> <li>实际上，你可以将依赖注入看作是“<strong>long range props</strong>”
<ul><li>父组件不需要知道哪些子组件使用它 provide 的 property</li> <li>子组件不需要知道 inject 的 property 来自哪里</li></ul></li></ul> <img src="./images/vue3/note/02/29.jpg"> <p><strong>Provide和Inject 基本使用</strong></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue 文件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">provide</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lys'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
 </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue 下组件中的  Header.vue组件中下的  HeaderLeft文件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerLeft<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{name}}   //  lys
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">inject</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>Provide 和 Inject 函数的写法</strong></p> <ul><li>如果Provide中提供的<strong>一些数据是来自data</strong>，那么我们可能会<strong>想要通过this来获取</strong>：</li> <li>如果 Provide 这里用this，<strong>这时候的this是undefinde</strong> 就会报错，所以这个时候就要用函数的写法了</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
         <span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>处理Provide 和 Inject 传递 响应式数据</strong></p> <ul><li>我们先来验证一个结果：<strong>如果我们修改了this.name的内容，那么使用length的子组件会不会是响应式的？</strong></li> <li>我们会发现对应的子组件中是<strong>没有反应的</strong>：
<ul><li>这是因为当我们修改了name之后，之前在provide中引入的 this.name本身并不是响应式的；</li></ul></li> <li><strong>那么怎么样可以让我们的数据变成响应式的呢？</strong> <ul><li>非常的简单，我们可以使用响应式的一些API来完成这些功能，比如说computed函数；</li> <li>当然，这个computed是vue3的新特性</li></ul></li> <li><strong>注意：我们在使用 abc 的时候需要获取其中的value</strong> <ul><li>这是因为<font color="cornflowerblue">computed返回的是一个ref对象</font>，需要取出其中的<font color="cornflowerblue">value来使用</font>；</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>//  app.vue 文件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">abc</span><span class="token operator">:</span><span class="token function">computed</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nameData<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>

     <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>  <span class="token literal-property property">nameData</span><span class="token operator">:</span><span class="token string">'lys'</span>  <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>

     <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function">setName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>nameData <span class="token operator">=</span> <span class="token string">&quot;coderLys&quot;</span>  <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// headerLeft.vue 文件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerLeft<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{abc.value}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">inject</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="全局事件总线-mitt-库"><a href="#全局事件总线-mitt-库" class="header-anchor">#</a> <font color="red">全局事件总线 mitt 库</font></h4> <ul><li><p>首先，我们需要先安装这个库：</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install mitt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>其次，我们可以封装一个工具eventBus.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> mitt <span class="token keyword">from</span> <span class="token string">'mitt'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">mitt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>这样就可以在不同的组件中传递数据了</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// 发送数据
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> eventBus <span class="token keyword">from</span> <span class="token string">'./util/eventBus'</span>
  <span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./Home.vue'</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function">sendOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        eventBus<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'lys'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lys'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span> Home <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// 接受数据
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 <span class="token keyword">import</span> eventBus <span class="token keyword">from</span> <span class="token string">'./util/eventBus'</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
      <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        eventBus<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'lys'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name:'lys' , age:18 }</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul> <h3 id="_6-2-认识插槽slot"><a href="#_6-2-认识插槽slot" class="header-anchor">#</a> 6.2.认识插槽Slot</h3> <ul><li>在开发中，我们会经常封装一个个可复用的组件：
<ul><li>前面我们会<font color="cornflowerblue">通过props传递</font>给组件一些数据，让组件来进行展示；</li> <li>但是为了让这个组件具备<font color="cornflowerblue">更强的通用性，我们不能将组件中的内容限制为固定的div、span</font>等等这些元素；</li></ul></li></ul> <p><strong>如何使用插槽slot？</strong></p> <ul><li>插槽的使用过程其实是<font color="cornflowerblue">抽取共性、预留不同</font>；</li> <li>我们会将<font color="cornflowerblue">共同的元素、内容依然在组件内</font>进行封装；</li> <li>同时会将<font color="cornflowerblue">不同的元素使用slot作为占位</font>，让外部决定到底显示什么样的元素</li></ul> <h4 id="插槽的使用"><a href="#插槽的使用" class="header-anchor">#</a> <strong>插槽的使用</strong></h4> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>left</span><span class="token punctuation">&gt;</span></span>  // v-slot: 显示 具名插槽的name
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>返回按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#content</span><span class="token punctuation">&gt;</span></span>   // v-slot:  可以简写为   #
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>中间标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>right</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>菜单<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Header</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// Header.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>  // 具名插槽
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>  // 默认插槽，如果没有给具名插槽，那么就显示 默认插槽内容 123
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span> // 不带 name 的slot，会带有隐含的名字 default
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="动态插槽名"><a href="#动态插槽名" class="header-anchor">#</a> <strong>动态插槽名</strong></h4> <ul><li><strong>什么是动态插槽名呢？</strong> <ul><li>目前我们使用的插槽名称都是固定的；</li> <li>比如 v-slot:left、v-slot:center等等；</li> <li>我们可以通过<font color="cornflowerblue"> v-slot:[dynamicSlotName]</font> 方式动态绑定一个名称；</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span> <span class="token attr-name">:slotName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>[slotName]</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>返回按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Header</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Header <span class="token keyword">from</span> <span class="token string">&quot;./component/Header.vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
      <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">slotName</span><span class="token operator">:</span><span class="token string">'left'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>
        Header
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// Header.vue

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'slotName'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="作用域插槽"><a href="#作用域插槽" class="header-anchor">#</a> <strong>作用域插槽</strong></h4> <ul><li><strong>在Vue中有渲染作用域的概念：</strong> <ul><li>父级模板里的所有内容都是在<font color="cornflowerblue">父级作用域中编译的</font>；</li> <li>子模板里的所有内容都是在<font color="cornflowerblue">子作用域中编译的</font>；</li></ul></li></ul> <img src="./images/vue3/note/02/30.jpg">
**认识作用域插槽**
<ul><li>但是有时候我们希望<font color="cornflowerblue">插槽可以访问到子组件中的内容</font>是非常重要的：
<ul><li>当一个组件被用来渲染一个数组元素时，我们使用插槽，并且希望插槽中没有显示每项的内容；</li> <li>这个Vue给我们提供了作用域插槽；</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>home-content</span> <span class="token attr-name">:names</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>names<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotProps<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> // 这里就获取到了 子组件的slot插槽上的传递的值
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>{{slotProps.item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>home-content</span><span class="token punctuation">&gt;</span></span>

	// 如果homeContent组件只有一个默认插槽时，组件的标签可以被当做插槽的模板来使用，这样，我们就可以将 v-slot 直
接用在组件上 （代码如下）
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>home-content</span> <span class="token attr-name">:names</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>names<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotProps<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>{{slotProps.item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>home-content</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> HomeContent <span class="token keyword">from</span> <span class="token string">&quot;./HomeContent.vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">names</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;why&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;kobe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;james&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curry&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>
      HomeContent
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// homeContent 组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>homeContent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in names<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">names</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span>Array<span class="token punctuation">,</span>
        <span class="token function-variable function">default</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="组件的插槽数据的传递"><a href="#组件的插槽数据的传递" class="header-anchor">#</a> 组件的插槽数据的传递</h4> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>myTable</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#enable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">:type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope.row.enable == <span class="token punctuation">'</span>1<span class="token punctuation">'</span> ? <span class="token punctuation">'</span>primary<span class="token punctuation">'</span> : <span class="token punctuation">'</span>danger<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ scope.row.enable ? '启动' : '禁用' }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>myTable</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// myTbale组件

 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in tableAttr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.slotName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:row</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope.row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ scope.row[item.prop] }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_6-3-动态组件实现"><a href="#_6-3-动态组件实现" class="header-anchor">#</a> 6.3.动态组件实现</h3> <p>动态组件是使用<font color="cornflowerblue">component组件</font>，通过通过一个特殊的属性<font color="cornflowerblue"><strong>is</strong></font>来实现</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{active:item==itemActive}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeBtn(item)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in navS<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> {{item}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemActive<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'./page/About.vue'</span>
  <span class="token keyword">import</span> CateGory <span class="token keyword">from</span> <span class="token string">'./page/CateGory.vue'</span>
  <span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./page/Home.vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">navS</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'home'</span><span class="token punctuation">,</span><span class="token string">'About'</span><span class="token punctuation">,</span><span class="token string">'cateGory'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">itemActive</span><span class="token operator">:</span><span class="token string">'Home'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function">activeBtn</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>itemActive <span class="token operator">=</span> item
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>
      About<span class="token punctuation">,</span>
      CateGory<span class="token punctuation">,</span>
      Home
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><strong>动态组建的传值</strong></p> <ul><li>如果是动态组件我们可以给它们传值和监听事件吗？
<ul><li>也是一样的</li> <li>只是我们需要将<font color="cornflowerblue">属性和监听事件放到component上</font>来使用；</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemActive<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>18<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@pageClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="认识keep-alive"><a href="#认识keep-alive" class="header-anchor">#</a> <font color="red"><strong>认识keep-alive</strong></font></h4> <ul><li>我们先对之前的案例中About组件进行改造，在其中增加了一个按钮，点击可以递增的功能</li> <li>比如我们将counter点到10，那么在切换到home再切换回来about时，<font color="cornflowerblue">about组件会被销毁掉，再次回来时会重新创建组件</font></li> <li>但是，在开发中某些情况我们希望<font color="cornflowerblue">继续保持组件的状态，而不是销毁掉</font>，这个时候我们就<font color="cornflowerblue">可以使用一个内置组件：<strong>keep-alive</strong></font></li></ul> <p><strong>keep-alive属性</strong></p> <ul><li><font color="orange">include </font> (string | RegExp | Array)  <font color="orange">只有名称匹配的组件会被缓存</font></li> <li><font color="orange">exclude</font> (string | RegExp | Array)  <font color="orange">任何名称匹配的组件都不会被缓存</font></li> <li><font color="orange">max</font>  (number | string)  <font color="orange">最多可以缓存多少组件实例</font>，一旦<font color="orange">达到这个数字</font>，那么<font color="orange">缓存组件中最近没有被访问的实例会被销毁</font></li></ul> <p>注意  ：<font color="cornflowerblue"><strong>以上 keep-alive 属性的匹配查找组件的name的选项</strong></font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{active:item==itemActive}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeBtn(item)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in navS<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> {{item}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CateGory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemActive<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="缓存组件的生命周期"><a href="#缓存组件的生命周期" class="header-anchor">#</a> <strong>缓存组件的生命周期</strong></h4> <ul><li>对于缓存的组件来说，再次进入时，我们是<font color="cornflowerblue">不会执行created或者mounted等生命周期函数</font>的；
<ul><li>但是有时候我们确实希望监听到何时重新进入到了组件，何时离开了组件</li> <li>这个时候我们可以使用**<font color="cornflowerblue">activated 和 deactivated</font>** 这两个生命周期钩子函数来监听；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;about activated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">deactivated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;about deactivated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_6-4-组件代码分包"><a href="#_6-4-组件代码分包" class="header-anchor">#</a> 6.4.组件代码分包</h3> <h4 id="webpack的进行分包"><a href="#webpack的进行分包" class="header-anchor">#</a> <strong><font color="orange">webpack的进行分包</font></strong></h4> <ul><li><strong>默认的打包过程</strong> <ul><li>默认情况下，在构建整个组件树的过程中，因为组件和组件之间是<font color="cornflowerblue">通过模块化直接依赖</font>的，那么webpack在打包时就<font color="cornflowerblue">会将组件模块打包到一起（比如一个app.js文件中）</font>；</li> <li>这个时候随着<font color="cornflowerblue">项目的不断庞大</font>，<font color="cornflowerblue">app.js文件的内容过大</font>，会造成<font color="cornflowerblue">首屏的渲染速度变慢</font>；</li></ul></li> <li><strong>打包时，代码的分包</strong> <ul><li>所以，对于一些<font color="cornflowerblue">不需要立即使用的组件</font>，我们可以<font color="cornflowerblue">单独对它们进行拆分</font>，<font color="cornflowerblue">拆分成一些小的代码块chunk.js</font>；</li> <li>这些chunk.js会在需要时<font color="cornflowerblue">从服务器加载下来</font>，并且<font color="cornflowerblue">运行代码</font>，显示对应的内容；</li></ul></li></ul> <p><strong>那么webpack中如何可以对代码进行分包呢？</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// import sum from &quot;./util/sum.js&quot;;  这样导入js文件，打包后是不进行分包的</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./util/sum.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>  <span class="token comment">// 这样导入 js 文件是可以进行分包的</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="vue中实现异步组件"><a href="#vue中实现异步组件" class="header-anchor">#</a> <font color="orange">Vue中实现异步组件</font></h4> <p>如果我们的项目过大了，对于某些组件我们希望<font color="cornflowerblue">通过异步的方式来进行加载（<strong>目的是可以对其进行分包处理</strong>）</font>，那么Vue中给我们提供了一个函数：<font color="cornflowerblue">defineAsyncComponent</font>。</p> <ul><li><p><strong>defineAsyncComponent接受两种类型参数</strong></p> <ul><li><font color="red">第一种写法</font>  工厂函数，该工厂函数需要返回一个Promise对象</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span>defineAsyncComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    comst AsyncHome <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./AsyncHome.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
   	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>
            AsyncHome
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>这里和 <font color="cornflowerblue">Suspense</font> 一起来使用比较好</strong></p> <ul><li><font color="cornflowerblue">Suspense是一个内置的全局组件，盖组件有两个插槽</font> <ul><li>default : 如果default 可以显示，那么显示 default 的内容；</li> <li>fallback：如果defalut无法显示，那么会显示fallback插槽的内容；</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>suspense</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Home</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Home</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Loader</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Loader</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>suspense</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li><p><font color="red">第二种写法</font>，接受一个对象类型，对异步函数进行配置</p> <img src="./images/vue3/note/02/31.jpg"></li></ul></li></ul> <h3 id="_6-5-vue的dom的获取"><a href="#_6-5-vue的dom的获取" class="header-anchor">#</a> 6.5.Vue的DOM的获取</h3> <h4 id="refs的使用"><a href="#refs的使用" class="header-anchor">#</a> <strong><font color="orange">$refs的使用</font></strong></h4> <ul><li>某些情况下，我们在组件中想要直接<font color="cornflowerblue">获取到元素对象或者子组件实例</font> <ul><li>在Vue开发中我们是不推荐进行DOM操作的；</li> <li>p这个时候，我们可以给元素或者组件绑定一个ref的属性</li></ul></li> <li><font color="cornflowerblue">组件实例有一个$refs属性</font> <ul><li>它一个对象Object，<font color="cornflowerblue">持有注册过 ref 的所有 DOM 元素和组件实例</font>。</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Home</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Home</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>$refs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./page/Home.vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// console.log(this.$refs.sp);   // 获取到了span的元素  &lt;span&gt; $refs &lt;/span&gt;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>hm<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 可以获取到组件的 data 的数据</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>
      Home
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="parent-和-root"><a href="#parent-和-root" class="header-anchor">#</a> <font color="orange"><strong>$parent 和 $root</strong></font></h4> <ul><li><p><strong>$parent</strong> <font color="cornflowerblue">可以通过来访问父元素</font></p> <ul><li><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">)</span> <span class="token comment">// 父组件的元素</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>message<span class="token punctuation">)</span>  <span class="token comment">//同时也可以获取到父元素的data数据</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li> <li><p><strong>$root</strong> <font color="cornflowerblue">可以查找到根元素</font></p> <ul><li><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$root<span class="token punctuation">)</span> <span class="token comment">// 获取组件的根元素</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li></ul> <h3 id="_6-6-认识生命周期"><a href="#_6-6-认识生命周期" class="header-anchor">#</a> 6.6.认识生命周期</h3> <p><strong>什么是生命周期呢？</strong></p> <ul><li>每个组件都可能会经历从<font color="cornflowerblue">创建、挂载、更新、卸载</font>等一系列的过程</li> <li>在这个过程中的<font color="cornflowerblue">某一个阶段</font>，用于可能会想要<font color="cornflowerblue">添加一些属于自己的代码逻辑</font>（比如组件创建完后就请求一些服务器数据）</li></ul> <p><strong>生命周期函数</strong></p> <ul><li>生命周期函数是<font color="cornflowerblue">一些钩子函数</font>，在<font color="cornflowerblue">某个时间会被Vue源码内部进行回调</font></li></ul> <p><strong>生命周期的流程图</strong></p> <img src="./images/vue3/note/02/32.jpg"> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>beforeCreate(){
  console.log('此时，无法通过vM访问到data中数据,methods中的方法');
},
created(){
  console.log('此时，可以通过vw访问到data和methods中的方法');
},

beforeMount(){
  console.log('此时Dom操作，还是不可以操作的');
},
mounted(){
  console.log('此时对Dom可以进行操作');
},

beforeUpdate(){
  console.log('数据将要更新的钩子函数，数据是新的，但页面的数据是旧的，页面尚未和数据保持同步');
},
updated(){
  console.log('进行数据更新，更新完成页面的数据的更新');
},

beforeUnmount() {
  console.log('当前处于可用状态，马上将要组件的销毁过程');
},
unmounted(){
  console.log('进行销毁');
    }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="_6-7-组件的v-model"><a href="#_6-7-组件的v-model" class="header-anchor">#</a> 6.7.组件的v-model</h3> <ul><li><p><strong>前面我们在<font color="cornflowerblue">input</font>中可以使用<font color="cornflowerblue">v-model</font>来完成双向绑定</strong></p> <ul><li>这个时候往往会非常方便，因为v-model默认帮助我们完成了两件事；</li> <li><font color="cornflowerblue">v-bind:value的数据绑定</font>和<font color="cornflowerblue">@input的事件监听</font>；</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputValue<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputValue<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputValue=$event.target.value<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">inputValue</span><span class="token operator">:</span><span class="token string">''</span>
      <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul> <p><font color="orange"><strong>组件v-model的实现</strong></font></p> <ul><li><p>在组件中的 v-model 的数据绑定 ，其实是实现 props 和 自定义事件的绑定</p> <ul><li>将组件绑定 名叫<font color="cornflowerblue"> model-value</font> 的props上</li> <li>将组件绑定自定义 <font color="cornflowerblue">update:model-value</font> 事件抛出</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>app.vue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Home</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Home</span><span class="token punctuation">&gt;</span></span> // v-model的缩写
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Home</span> <span class="token attr-name">:model-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>model-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message = $event<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Home</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 <span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./page/Home.vue'</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">''</span> <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span> Home  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">modelValue</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span>String <span class="token operator">||</span> Number<span class="token punctuation">,</span>
          <span class="token keyword">default</span><span class="token operator">:</span><span class="token string">''</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">emits</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'update:model-value'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token comment">// 组件内部双向绑定的做法，需要使用计算属性的setter和getter来完成</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:model-value'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modelValue   <span class="token punctuation">}</span> 
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></li></ul> <p><strong><font color="orange">组件的v-model实现绑定多个属性值</font></strong></p> <ul><li><p>我们现在通过v-model是直接绑定了一个属性，如果我们希望绑定多个属性呢？</p> <ul><li>也就是我们希望在<font color="cornflowerblue">一个组件上使用多个v-model</font>实现呢</li> <li>我们知道，<font color="cornflowerblue">默认情况</font>下的v-model其实是绑定 <font color="cornflowerblue">model-Value</font> 属性  和 <font color="cornflowerblue">@update:model-vlaue</font> 事件</li> <li>如果我们希望绑定更多，可以给<font color="cornflowerblue">v-model传入一个参数</font>，那么这个参数的名称就是我们<font color="cornflowerblue">绑定属性的名称</font>；</li></ul></li> <li><p>注意：这里我是绑定两个属性的</p> <ul><li><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Home</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-model:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>&lt;/Home
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p><strong>v-model:title相当于做了两件事</strong>：</p> <ul><li><font color="cornflowerblue"><strong>绑定 title属性</strong></font>；</li> <li><font color="cornflowerblue"><strong>监听 update:title的事件</strong></font></li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Home</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-model:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Home</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 <span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./page/Home.vue'</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>  <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>  <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">''</span>   <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// Home.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>titleValue<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span>String <span class="token operator">||</span> Number<span class="token punctuation">,</span>
          <span class="token keyword">default</span><span class="token operator">:</span><span class="token string">''</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token literal-property property">emits</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'update:title'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">titleValue</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:title'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="_6-8-vue3过渡动画"><a href="#_6-8-vue3过渡动画" class="header-anchor">#</a> 6.8.Vue3过渡动画</h3> <ul><li>在开发，我们想要给一个组件的<font color="cornflowerblue">显示和消失添加某种过渡动画</font>，可以很好的增加用户体验：
<ul><li>Vue中为我们提供<font color="cornflowerblue">一些内置组件和对应的API来完成动画</font>，利用它们我们可以<font color="cornflowerblue">方便的实现过渡动画效果</font>；</li></ul></li></ul> <h4 id="vue的transition的动画"><a href="#vue的transition的动画" class="header-anchor">#</a> <strong>Vue的transition的动画</strong></h4> <ul><li><p>vue<font color="cornflowerblue">提供了 transition 的封装组件</font>可以给任何元素和组件添加进入/离开过渡：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  hello word   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><font color="cornflowerblue">transition组件提供了钩子函数，帮助监听动画执行阶段</font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	  &lt;transition @before-enter=&quot;beforeEnter&quot;
                @enter=&quot;enter&quot;
                @after-enter=&quot;afterEnter&quot;
                @before-leave=&quot;beforeLeave&quot;
                @leave=&quot;leave&quot;
                @afterLeave=&quot;afterLeave&quot;
                :css=&quot;false&quot;  // 会跳过 CSS 的检测，除了性能略高之外，这可以避免过渡过程中 CSS 规则的影响
      &gt;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">beforeEnter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 设置过渡进入之前的组件状态</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;beforeEnter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 设置过渡进入完成时的组件状态</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;enter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">afterEnter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 设置过渡进入完成之后的组件状态</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;afterEnter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">beforeLeave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 设置过渡离开之前的组件状态</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;beforeLeave&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">leave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// 设置过渡离开完成时地组件状态</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;leave&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">afterLeave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 设置过渡离开完成之后的组件状态</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;afterLeave&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><strong>Transition组件的原理</strong></p></li> <li><p>当插入或删除包含在 transition 组件中的元素时，Vue 将会做以下处理</p> <ul><li>1.自动<font color="cornflowerblue">嗅探目标元素是否应用了CSS过渡或者动画</font>，如果<font color="cornflowerblue">有</font>，那么在恰当的时机<font color="cornflowerblue">添加/删除 CSS类名</font>；</li> <li>2.如果 transition 组件提供了JavaScript钩子函数，这些钩子函数将在恰当的时机被调用；</li> <li>3.如果<font color="cornflowerblue">没有找到</font>JavaScript钩子并且也没有<font color="cornflowerblue">检测到CSS过渡/动画</font>，DOM<font color="cornflowerblue">插入、删除操作将会立即执行</font>；</li></ul></li></ul> <p><strong>过渡动画Class</strong></p> <ul><li>事实上Vue就是帮助我们这些<font color="cornflowerblue">class之间来回切换完成的动画</font> <ul><li><font color="orange"><strong>v-enter-from</strong></font>   定义进入过渡的开始状态。在元素被插入之前生效</li> <li><font color="orange"><strong>v-enter-active</strong></font>  可以被用来定义进入过渡的过程时间，延迟和曲线函数。</li> <li><font color="orange"><strong>v-enter-to</strong></font>  定义进入过渡的结束状态，在过渡/动画完成之后移除。</li> <li><strong><font color="orange">v-leave-from</font></strong>  定义离开过渡的开始状态。在离开过渡被触发时立刻生效</li> <li><strong><font color="orange">v-leave-active</font></strong>  可以被用来定义离开过渡的过程时间，延迟和曲线函数。</li> <li><strong><font color="orange">v-leave-to</font></strong>    离开过渡结束状态，在过渡/动画完成之后移除</li></ul></li></ul> <img src="./images/vue3/note/02/33.jpg"> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  hello word   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textChange<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin-top</span><span class="token punctuation">:</span>30px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>显示/隐藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
      <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">text</span><span class="token operator">:</span><span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">textChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>text
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.txt-enter-from,
  .txt-leave-to</span><span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.txt-enter-active,
  .txt-leave-active</span><span class="token punctuation">{</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 2s<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.txt-enter-to,
  .txt-leave-from</span><span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p><strong>class 的 name命名规则如下</strong></p> <ul><li>如果我们使用的<font color="cornflowerblue">是一个没有name的 transition </font>，那么所有的<font color="cornflowerblue">class是以 v- 作为默认前缀</font></li> <li>如果<font color="orange">我们添加了一个name属性，比如 transtion name=&quot;why&quot;/，那么所有的class会以 why- 开头；</font></li></ul> <p>前面我们是<font color="cornflowerblue">通过transition来实现的动画效果</font>，另外我们也可以<font color="cornflowerblue">通过animation来实现</font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lys<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello word<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow = !isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>动画切换<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.lys-enter-active</span><span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> dh 1.5s <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.lys-leave-active</span><span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> dh 1.5s reverse<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@keyframes</span> dh</span> <span class="token punctuation">{</span>
  <span class="token selector">0%</span><span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">50%</span><span class="token punctuation">{</span>
     <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.4<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">100%</span><span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="同时设置过渡和动画"><a href="#同时设置过渡和动画" class="header-anchor">#</a> <font color="red"><strong>同时设置过渡和动画</strong></font></h4> <ul><li>Vue为了<font color="cornflowerblue">知道过渡的完成</font>，内部是在<strong>监听<font color="cornflowerblue"> transitionend</font> 或 <font color="cornflowerblue">animationend</font></strong>，到底使用哪一个取决于元素应用的</li> <li><strong>但是如果我们同时使用了过渡和动画呢？</strong> <ul><li>这个情况下可能<font color="cornflowerblue">某一个动画执行结束时，另外一个动画还没有结束</font>，</li> <li>这种情况下，我们可以<font color="cornflowerblue">设置 type 属性为 animation 或者 transition 来明确的告知Vue监听的类型</font></li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lys<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>animation<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello word<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="显示的指定动画时间"><a href="#显示的指定动画时间" class="header-anchor">#</a> <font color="red"><strong>显示的指定动画时间</strong></font></h4> <ul><li><p>可以用来指定<font color="cornflowerblue">过渡的时间</font>，通过<font color="cornflowerblue">duration属性</font></p></li> <li><p>duration 可以设置两种类型的值</p> <ul><li><p><font color="orange">number类型</font>：同时设置进入和离开的过渡时间</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lys<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>animation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:duration</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2000<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello word<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><font color="orange">object类型</font>：分别设置进入和离开的过渡时间</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lys<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>animation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:duration</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{enter:800,leave:1000}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello word<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <h4 id="过渡的模式mode"><a href="#过渡的模式mode" class="header-anchor">#</a> <strong><font color="red">过渡的模式mode</font></strong></h4> <ul><li><p>我们来看当前的动画在两个元素之间切换的时候存在的问题</p></li> <li><p>动画情况下<font color="cornflowerblue">进入和离开动画</font>是同时发生的</p></li> <li><p>是如果我们<font color="cornflowerblue">不希望同时执行进入和离开动画</font>，那么我们需要设置<font color="cornflowerblue">transition的过渡模式</font></p> <ul><li><font color="orange">in-out</font> ： 新元素先进行过渡，完成之后当前元素过渡离开；</li> <li><font color="orange">out-in</font>：当前元素先进行过渡，完成之后新元素过渡进入；</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lys<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>out-in<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello word<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>你好呀<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="appear初次渲染"><a href="#appear初次渲染" class="header-anchor">#</a> <strong><font color="red">appear初次渲染</font></strong></h4> <ul><li>默认情况下，首次<font color="cornflowerblue">渲染的时候是没有动画</font>的，如果我们<font color="cornflowerblue">希望给他添加上去动画</font>，那么就可以增加<font color="cornflowerblue">另外一个属性 <strong>appear</strong></font></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lys<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>out-in<span class="token punctuation">&quot;</span></span> <span class="token attr-name">appear</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello word<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>你好呀<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="第三方-animate-css-动画库"><a href="#第三方-animate-css-动画库" class="header-anchor">#</a> <font color="red"><strong>第三方 animate.css 动画库</strong></font></h4> <ul><li><p>如果我们手动一个个来编写这些动画，那么效率是比较低的，所以在开发中我们可能会引用一些第三方库的动画库，比如animate.css。</p></li> <li><p>什么是animate.css呢？</p> <ul><li>Animate.css是一个已经<strong>准备好的、跨平台的动画库</strong>为我们的web项目，对于强调、主页、滑动、注意力引导非常有用</li></ul></li></ul> <p><strong>animate.css库的使用</strong></p> <ul><li><p><font color="cornflowerblue">安装 animate.css</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install animate.css
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><font color="cornflowerblue">在main.js中导入animate.css</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'animate.css'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>接下来在使用的时候，我们有两种用法：</p> <ul><li><p>用法一：<font color="cornflowerblue">直接使用 animate库中定义 keyframes 动画</font>；</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lys<span class="token punctuation">&quot;</span></span> <span class="token attr-name">appear</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello word<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">.lys-enter-active</span><span class="token punctuation">{</span>
      <span class="token property">animation</span><span class="token punctuation">:</span> lightSpeedInLeft 1s
    <span class="token punctuation">}</span>
    <span class="token selector">.lys-leave-active</span><span class="token punctuation">{</span>
      <span class="token property">animation</span><span class="token punctuation">:</span> lightSpeedInRight 1s reverse<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p>用法二：<font color="cornflowerblue">直接使用animate库提供我们的类</font>；</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lys<span class="token punctuation">&quot;</span></span> <span class="token attr-name">appear</span>
        <span class="token attr-name">enter-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>animate__animated animate__lightSpeedInLeft<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">leave-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>animate__animated animate__lightSpeedInRight<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello word<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.animate__lightSpeedInRight</span><span class="token punctuation">{</span>
  <span class="token property">animation-direction</span><span class="token punctuation">:</span> reverse<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>自定义过渡 class ，可以通过以下 属性 来自定义过渡类名</strong></p> <ul><li>enter-from-class</li> <li>enter-active-class</li> <li>enter-to-class</li> <li>leave-from-class</li> <li>leave-active-class</li> <li>leave-to-class</li></ul></li></ul></li></ul> <h4 id="第三方-gsap-动画库"><a href="#第三方-gsap-动画库" class="header-anchor">#</a> <strong>第三方 gsap 动画库</strong></h4> <p><font color="red">认识gsap库</font></p> <ul><li>某些情况下我们希望通过<strong>JavaScript来实现一些动画效果</strong>，这个时候我们可以选择使用 <strong>gsap</strong> 库来完成。</li> <li>它可以通过<font color="cornflowerblue">JavaScript为CSS属性、SVG、Canvas</font>等设置动画，并且是浏览器兼容的；</li></ul> <p>结合gsap库来完成动画效果：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow = !isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>显示/隐藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">@enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enter<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>leave<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> Hello world <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> gsap <span class="token keyword">from</span> <span class="token string">&quot;gsap&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>   <span class="token literal-property property">isShow</span><span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function">enter</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>done</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        gsap<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span><span class="token punctuation">{</span>
          <span class="token literal-property property">scale</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token literal-property property">x</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span>
          <span class="token literal-property property">onComplete</span><span class="token operator">:</span>done
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">leave</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>done</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        gsap<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span><span class="token punctuation">{</span>
          <span class="token literal-property property">scale</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token literal-property property">x</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span>
          <span class="token literal-property property">onComplete</span><span class="token operator">:</span>done
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.title</span><span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p><font color="orange"><strong>gsap动画效果（数字递增动画）</strong></font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>counter<span class="token punctuation">&quot;</span></span> <span class="token attr-name">step</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{showNumber.toFixed(0)}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> gsap <span class="token keyword">from</span> <span class="token string">&quot;gsap&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">counter</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span>
        <span class="token literal-property property">showNumber</span><span class="token operator">:</span><span class="token number">0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">counter</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          gsap<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">duration</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">showNumber</span><span class="token operator">:</span>newValue<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="tranistion-group"><a href="#tranistion-group" class="header-anchor">#</a> <strong>tranistion-group</strong></h4> <ul><li><p>目前为止，过渡动画我们只要是<strong>针对单个元素或者组件的</strong></p> <ul><li>要么<font color="cornflowerblue">是单个节点</font></li> <li>要么是<font color="cornflowerblue">同一时间渲染多个节点中的一个</font>；</li></ul></li> <li><p>那么如果希望<font color="cornflowerblue">渲染的是一个列表</font>，并且该列表中添加删除数据也希望有动画执行呢？</p> <ul><li>p这个时候我们要<font color="cornflowerblue">使用 <strong><span></span></strong> 组件</font>来完成；</li></ul></li> <li><p>使用<span></span> 有如下的特点：</p> <ul><li>默认情况下，它<strong>不会渲染一个元素的包裹器，但是你可以指定一个元素<font color="cornflowerblue">并以 tag 属性 进行渲染</font>；</strong></li> <li>内部元素总是<font color="cornflowerblue">需要提供唯一的 key 属性的值</font></li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition-group</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ul<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lys<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in numbers<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> {{item}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition-group</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addCounter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>添加数字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>delCounter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除数字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>resetCounter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>数字洗牌<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
      <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
           <span class="token literal-property property">numbers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
           <span class="token literal-property property">numCounter</span><span class="token operator">:</span> <span class="token number">10</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">addCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>numbers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>randomCounter<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>numCounter<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">delCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>numbers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>randomCounter<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">resetCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>numbers <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>numbers<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">randomCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numbers<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">ul</span><span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">li</span><span class="token punctuation">{</span>
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 10px 12px<span class="token punctuation">;</span>
 <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token selector">p button</span><span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.lys-enter-from,
.lys-leave-to</span><span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>30px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.lys-enter-active,
.lys-leave-active</span><span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all .5s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.lys-leave-active</span><span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.lys-move</span><span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span>transform .5s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><p><font color="red">列表过渡的移动动画</font></p> <ul><li>在上面的案例中<strong>虽然新增的或者删除的节点是有动画</strong>的，但是<strong>对于哪些其他需要移动的节点是没有动画</strong>的：
<ul><li>我们可以通过使用一个<font color="cornflowerblue">新增的 v-move 的class来完成动画</font>；</li> <li>它会<font color="cornflowerblue">在元素改变位置的过程中应用</font></li> <li>像之前的名字一样，我们可以<font color="cornflowerblue">通过name来自定义前缀</font>；</li></ul></li></ul> <h3 id="_6-9-mixin的使用"><a href="#_6-9-mixin的使用" class="header-anchor">#</a> 6.9.Mixin的使用</h3> <ul><li>目前我们是使用组件化的方式在开发整个Vue的应用程序，但是<strong>组件和组件之间有时候会存在相同的代码逻辑</strong>，我们希望对<strong>相同的代码逻辑进行抽取</strong>。</li> <li>在Vue2和Vue3中都支持的一种方式就是<strong>使用Mixin来完成</strong> <ul><li>Mixin提供了一种非常灵活的方式，来<font color="cornflowerblue">分发Vue组件中的可复用功能</font></li> <li>一个Mixin对象可以包含<font color="cornflowerblue">任何组件选项</font>；</li> <li>当组件使用Mixin对象时，所有<font color="cornflowerblue">Mixin对象的选项将被 混合 进入该组件本身的选项</font>中；</li></ul></li></ul> <h4 id="mixin的基本使用"><a href="#mixin的基本使用" class="header-anchor">#</a> <font color="red">Mixin的基本使用</font></h4> <img src="./images/vue3/note/02/34.jpg"> <h4 id="mixin的合并规则"><a href="#mixin的合并规则" class="header-anchor">#</a> <strong><font color="red">Mixin的合并规则</font></strong></h4> <ul><li>如果Mixin对象中的选项和组件对象中的选项发生了冲突
<ul><li><strong>情况一：如果是data函数的返回值对象</strong> <ul><li>返回值对象默认情况下会<font color="cornflowerblue">进行合并</font>；</li> <li>如果data返回值对象的属性发生了冲突，那么会<font color="cornflowerblue">保留组件自身的数据</font>；</li></ul></li> <li><strong>情况二：如何生命周期钩子函数</strong> <ul><li>生命周期的钩子函数<font color="cornflowerblue">会被合并到数组中，<strong>都会被调用</strong></font>；</li></ul></li> <li><strong>情况三：值为对象的选项，例如 methods、components 和 directives，将被合并为同一个对象</strong> <ul><li>比如都有<font color="cornflowerblue">methods选项</font>，并且都定义了方法，那么<font color="cornflowerblue">它们都会生效</font>；</li> <li>但是如果<font color="cornflowerblue">对象的key相同</font>，那么<font color="cornflowerblue">会取组件对象的键值对</font></li></ul></li></ul></li></ul> <p><font color="red"><strong>全局混入Mixin</strong></font></p> <ul><li>如果组件中的某些选项，是所有的组件都需要拥有的，那么这个时候我们可以使用<font color="cornflowerblue">全局的mixin</font>：
<ul><li>全局的Mixin可以使用<font color="cornflowerblue"> 应用app的方法 mixin</font> 来完成注册；</li> <li>一旦注册，那么<font color="cornflowerblue">全局混入的选项将会影响每一个组件；</font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createApp<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./01.Mixin的学习使用/app.vue'</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">csaaa</span><span class="token operator">:</span><span class="token string">'123123'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">cs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'213'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'created生命周期'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span>#app<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_6-10-extends"><a href="#_6-10-extends" class="header-anchor">#</a> 6.10.extends</h3> <ul><li>另外一个类始于Mixin的方式是<strong>通过extends属性</strong> <ul><li>允许声明扩展另外一个组件，<strong>类似于Mixins</strong></li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// extends.vue 文件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token string">'777'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function">cs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'cs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue 文件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span> {{count}} // 777
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>  // console.log('cs')
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> Extends <span class="token keyword">from</span> <span class="token string">&quot;./extends/extends.vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token keyword">extends</span><span class="token operator">:</span>Extends  <span class="token comment">// 继承该文件的数据和方法</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在开发中extends用的非常少，在vue2中比较<font color="cornflowerblue">推荐大家使用Mixin</font>，而在<font color="cornflowerblue">vue3中推荐使用 Composition API</font></p> <h2 id="七-composition-api"><a href="#七-composition-api" class="header-anchor">#</a> 七：Composition_API</h2> <p><font color="orange">Options API的弊端</font></p> <ul><li><p>在Vue2中，我们编写组件的方式是Options API</p> <ul><li>Options API的一大特点就是在<font color="cornflowerblue">对应的属性</font>中<font color="cornflowerblue">编写对应的功能模块</font>，比如 data定义数据、methods定义方法、computed中定义计算属性、watch监听属性改变，也包括生命周期钩子</li></ul></li> <li><p>Options API 这个有很大弊端</p> <ul><li>当我们实现某一个功能时，这个功能<font color="cornflowerblue">对应的代码逻辑会被拆分到各个属性</font>中；</li></ul> <img src="./images/vue3/note/02/35.jpg"></li> <li><p>如果我们能将<font color="cornflowerblue">同一个逻辑关注点相关代码收集在一起</font>会更好</p> <p>这就是<font color="cornflowerblue">Composition API想要做的事情</font>，以及可以帮助我们完成的事情，也有人把Vue CompositionAPI  简称为<strong>VCA</strong></p></li></ul> <h3 id="_7-1-setup函数"><a href="#_7-1-setup函数" class="header-anchor">#</a> 7.1.setup函数</h3> <p><strong><font color="red">setup函数的参数</font></strong></p> <ul><li><p>setup主要有<strong>两个参数</strong></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>setup(props,context){}
setup(props,{attrs,slots,emit}){}  // 解构后的
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>第一个参数：<font color="orange">props</font> <ul><li>props它其实就是<font color="cornflowerblue">父组件传递过来的属性会被放到props对象中</font>，我们在<strong>setup中如果需要</strong>使用，那么就要<strong>通过props参数获取</strong> （不可以通过this去获取，setup中this等于undefined）</li> <li><font color="cornflowerblue">template模板中依然可以正常去使用props中属性</font></li></ul></li> <li>第二个参数：<font color="orange">context</font>  (里面包含三个属性)
<ul><li><strong><font color="cornflowerblue">attrs ：所有非prop的属性</font></strong> 例如（class、id 、自定义属性 等）</li> <li><strong><font color="cornflowerblue">slots ：父组件传递过来的插槽</font></strong></li> <li><font color="cornflowerblue">emit ：当我们组件内部需要发出事件时会用到emit</font>（因为我们<strong>不能访问this，所以不可以通过 this.$emit发出事件</strong>）；</li></ul></li></ul></li></ul> <p><strong><font color="red">setup函数的返回值</font></strong></p> <ul><li>setup 是一个函数，那么它也可以有返回值，它的返回值用来做什么呢？
<ul><li>setup的返回值可以<font color="cornflowerblue">在模块 template中被使用</font>；</li></ul></li></ul> <h4 id="reactive-api"><a href="#reactive-api" class="header-anchor">#</a> <font color="red"><strong>Reactive API</strong></font></h4> <ul><li><p>如果想为在setup中<font color="cornflowerblue">定义的数据提供响应式的特性</font>，那么我们可以<strong>使用reactive的函数</strong>：</p></li> <li><p>那么这是什么么原因呢？为什么就可以变成响应式的呢？</p> <ul><li>是因为当我们<font color="cornflowerblue">使用reactive函数处理我们的数据之后</font>，数据<font color="cornflowerblue">再次被使用</font>时就会<font color="cornflowerblue">进行依赖收集</font></li> <li>当<font color="cornflowerblue">数据发生改变</font>时，所有<font color="cornflowerblue">收集到的依赖</font>都是<font color="cornflowerblue">进行对应的响应式操作</font>（更新界面）</li> <li>事件上，之前<font color="cornflowerblue">vue2中data选项</font>，也时在<font color="cornflowerblue">内部交给了reactive函数进行实现响应式对象</font>的</li></ul> <p>reactive API 对<font color="orange">传入的类型时有限制</font>的，它要求我们必须<font color="orange">传入的是一个对象或者数组类型</font>，</p> <p>如果我们传入一个<strong>基本数据类型（String、Number、Boolean）会报一个警告</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'lys'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>user<span class="token punctuation">,</span>updataAge<span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <p><font color="orange"><strong>Reactive判断的API</strong></font></p> <ul><li><p><strong><font color="orange">isProxy</font></strong>  :  检查<strong>对象</strong><font color="cornflowerblue">是否是由reactive 或 readonly创建的proxy</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span>isProxy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">'coderlys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isProxy</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p><font color="orange"><strong>isReactive</strong></font>  ： 检查对象<font color="cornflowerblue">是否是由 reactive创建的响应式代理</font></p> <div class="language- extra-class"><pre><code>   ​    如果&lt;font color='cornflowerblue'&gt;该代理是 readonly 建的&lt;/font&gt;，但&lt;font color='cornflowerblue'&gt;包裹了由 reactive 创建的另一个代理&lt;/font&gt;，它也会**返回 true**
</code></pre></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span>isReactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">'coderlys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li> <li><p><font color="orange"><strong>isReadonly</strong></font> ：检查对象<font color="cornflowerblue">是否是由 readonly 创建的只读代理</font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span>isReadonly<span class="token punctuation">,</span>readonly <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">'coderlys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> isReadonlyInfo <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span> <span class="token comment">// 设置只读代理</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReadonly</span><span class="token punctuation">(</span>isReadonlyInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//  true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p><strong><font color="orange">toRaw</font></strong> ： 返回 <font color="cornflowerblue">reactive 或 readonly 代理的原始对象 </font> （<strong>不建议</strong>保留对原始对象的持久引用。请谨慎使用）</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRaw<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">'coderlys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toRaw</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// {userName: 'coderlys', age: 18}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p><font color="orange"><strong>shallowReactive</strong></font> ：创建一个响应式代理，它跟踪其自身property的响应性，但<font color="cornflowerblue">不执行嵌套对象的深层响应式转换 (深层还是原生对象)</font></p></li> <li><p><font color="orange"><strong>shallowReadonly</strong></font> ：创建一个proxy，使其自身的 property 为只读，<font color="cornflowerblue">但不执行嵌套对象的深度只读转换</font>（深层还是可读、可写的）</p></li></ul> <h4 id="ref-api"><a href="#ref-api" class="header-anchor">#</a> <font color="red"><strong>Ref API</strong></font></h4> <ul><li>ref会返回一个可变的响应式对象，该对象作为一个响应式的引用</li> <li>这里<strong>注意两个注意事项</strong> <ul><li>在<font color="orange">模板中引入ref的值</font>时，<font color="orange">Vue会自动帮助我们进行解包</font>操作，所以我们并<font color="orange">不需要在模板中通过 ref.value </font>的方式 来使用</li> <li>但是在<font color="orange"> setup 函数内部</font>，它依然<font color="orange">是一个 ref引用</font>， 所以对其进行操作时，我们依然<font color="orange">需要使用 ref.value的</font>方式；</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
        姓名： {{name}}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>setName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改姓名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
   <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'lys'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            name<span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token string">&quot;codeLys&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>setName<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong><font color="orange">ref其他的API</font></strong></p> <ul><li><p><strong><font color="orange">unref</font></strong> ：如果我们想要<strong>获取一个ref引用中的value</strong>，那么也可以<strong>通过unref方法</strong></p> <ul><li><font color="cornflowerblue">如果参数是一个 ref，则返回内部值，否则返回参数本身；</font></li> <li>这是<font color="cornflowerblue"><strong>val = isRef(val) ? val.value : val</strong></font>的语法糖函数；</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> unref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> userName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'coderLys'</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unref</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// coderLys</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// RefImpl {__v_isShallow: false, dep: undefined, _value: 'coderLys'}</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>userName<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p><strong><font color="orange">isRef</font></strong></p> <ul><li>判断值<font color="cornflowerblue">是否是一个ref对象</font></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
   <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> isRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> userName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'coderLys'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">18</span>
             console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// true</span>
             console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
           <span class="token keyword">return</span> <span class="token punctuation">{</span>userName<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p><strong><font color="orange">shallowRef</font></strong></p> <ul><li>创建一个<font color="cornflowerblue">浅层的ref对象</font>，但需要使用<font color="orange">triggerRef触发才能实现ref响应式</font></li></ul></li> <li><p><strong><font color="orange">triggerRef</font></strong></p> <ul><li><font color="cornflowerblue">手动触发和 shallowRef 相关联的副作用</font></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> shallowRef<span class="token punctuation">,</span> triggerRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;coderlys&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> <span class="token function-variable function">changeInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    info<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name<span class="token operator">=</span> <span class="token string">'lys'</span><span class="token punctuation">;</span>
                    <span class="token function">triggerRef</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>  <span class="token comment">// 这样才会触发响应式，更改数据变化</span>
                <span class="token punctuation">}</span>
           <span class="token keyword">return</span> <span class="token punctuation">{</span>changeInfo<span class="token punctuation">,</span>info<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul> <h4 id="ref获取damo元素"><a href="#ref获取damo元素" class="header-anchor">#</a> <font color="red"><strong>ref获取Damo元素</strong></font></h4> <p>定义一个ref对象，绑定到元素或者组件上ref属性即可</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>refTitle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 标题 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
&lt;&gt;
import {ref} from 'vue'
export default {
  setup(){
        const refTitle = ref(null);  
          console.log(refTitle.value) // '此时打印出来的是Null,因为setup是很早执行的，template的元素还没渲染就执行了，所以打印 null，一般在生命周期里，或者监听器watchEffact中进行'
        return {
            refTitle
        }
    }
}
&lt;/&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="认识readonly"><a href="#认识readonly" class="header-anchor">#</a> <font color="red"><strong>认识readonly</strong></font></h4> <ul><li><font color="orange">readonly会返回原生对象的只读代理</font>（proxy的set方法被劫持）<font color="cornflowerblue">不能对齐进行修改</font></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        {{userNameReadonly}}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>setName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> readonly <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> userName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'coderLys'</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> userNameReadonly <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span>
            <span class="token keyword">const</span> <span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">//    userNameReadonly.value = '123'   报警告 并无法修改数据</span>
                  userName<span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token string">'123'</span>   <span class="token comment">// 这样可以改变数据</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>userName<span class="token punctuation">,</span>userNameReadonly<span class="token punctuation">,</span>setName<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li><p>在readonly的使用过程中，有如下规则：</p> <ul><li>readonly <font color="cornflowerblue">返回的对象都是不允许修改的</font></li> <li>但是经过readonly处理的<font color="cornflowerblue">原来的对象是允许被修改</font>的</li></ul></li> <li><p>其实本质上<font color="cornflowerblue">就是readonly返回对象的setter方法被劫持了</font></p></li> <li><p><strong>那么这个readonly有什么用呢？</strong></p> <ul><li><p>在我们<font color="cornflowerblue">传递给其他组件数据</font>时，往往希望<font color="cornflowerblue">其他组件使用我们传递的内容，但是不允许它们修改</font>时，就可以<font color="cornflowerblue">使用 readonly</font>了</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Home</span> <span class="token attr-name">:info</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>readonlyInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Home</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">,</span>readonly<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./home.vue&quot;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>
          Home
      <span class="token punctuation">}</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          cosnt info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'why'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token keyword">const</span> readonlyInfo <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>
          
          <span class="token keyword">return</span> <span class="token punctuation">{</span> readonlyInfo <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li></ul></li></ul> <h4 id="torefs"><a href="#torefs" class="header-anchor">#</a> <font color="red"><strong>toRefs</strong></font></h4> <p>如果我们使用<font color="cornflowerblue">ES6的解构语法</font>，对<font color="cornflowerblue">reactive返回的对象进行解构获取值</font>，那么之后无论是<font color="cornflowerblue">修改结构后的变量</font>，还是<font color="cornflowerblue">修改reactive 返回的userInfo对象</font>，数据都<font color="cornflowerblue">不再是响应式</font>的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">'coderlys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">let</span> <span class="token punctuation">{</span> userName <span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> userInfo
            <span class="token keyword">const</span> <span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                userName <span class="token operator">=</span> <span class="token string">'coder'</span>  <span class="token comment">// 这样修改的话，数据不是响应式的</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Vue为我们提供了一个<font color="cornflowerblue"><strong>toRefs的函数，可以将reactive返回的对象中的属性都转成ref</strong></font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">,</span>toRefs<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">'coderlys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">let</span> <span class="token punctuation">{</span>userName<span class="token punctuation">,</span>age<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span>  <span class="token comment">// 使用 toRefs函数 解构出来属性会转成 ref </span>
            <span class="token keyword">const</span> <span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                userName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'coder'</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>userName<span class="token punctuation">,</span>age<span class="token punctuation">,</span>setName<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>这种做法相当于<font color="cornflowerblue">已经在userInfo.userName和ref.value之间建立了 链接</font>，任何一个<font color="cornflowerblue">修改都会引起另外一个变化</font>；</li></ul> <h4 id="toref"><a href="#toref" class="header-anchor">#</a> <strong><font color="red">toRef</font></strong></h4> <p>如果我们只希望<font color="orange">转换一个reactive对象中的属性为ref</font>，那么可以<font color="orange">使用toRef的方法</font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">,</span> toRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">'coderlys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">let</span> userName <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">,</span><span class="token string">'userName'</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> <span class="token function-variable function">setUserName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                userName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'coder'</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>userName<span class="token punctuation">,</span>setUserName<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="customref"><a href="#customref" class="header-anchor">#</a> <font color="red"><strong>customRef</strong></font></h4> <ul><li>创建一个**<font color="cornflowerblue">自定义的ref</font>，**并<font color="cornflowerblue"><strong>对其依赖项跟踪和更新触发</strong></font>进行<font color="cornflowerblue"><strong>显示控制</strong></font> <ul><li>它需要一个<font color="orange">工厂函数</font>，该<font color="orange">函数接受 track 和 trigger函数 作为参数</font></li> <li>并且应该<font color="cornflowerblue">返回一个带get和set对象</font>；</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputText<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{inputText}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDebouncedRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./hooks/customRef.js&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> inputText <span class="token operator">=</span> <span class="token function">useDebouncedRef</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> inputText <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
import {customRef} from 'vue'
export function useDebouncedRef(value){
    let timer = null
    return customRef((track,trigger)=&gt;{
        return {
            get(){
                track()  // 跟踪
                return value
            },
            set(newValue){
              clearTimeout(timer)   // 使用防抖的效果
              timer= setTimeout(() =&gt; {
                value = newValue
                trigger() // 触发
               }, 1000);
            }   
        }
    })
}   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="computed"><a href="#computed" class="header-anchor">#</a> <font color="red"><strong>computed</strong></font></h4> <ul><li><p>如何使用computed?</p> <ul><li><p>方式一：<font color="cornflowerblue">接收一个getter函数，并为getter函数返回的值</font>，返回一个不变的 ref 对象</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> number1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> number2 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">Number</span><span class="token punctuation">(</span>number1<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">Number</span><span class="token punctuation">(</span>number2<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>number1<span class="token punctuation">,</span>number2<span class="token punctuation">,</span>sum<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>方式二：接收一个<font color="cornflowerblue">具有get和set的对象</font>，返回一个可变的（可读写的）ref对象</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> number1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> number2 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token function-variable function">get</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token function">Number</span><span class="token punctuation">(</span>number1<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">Number</span><span class="token punctuation">(</span>number2<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token function-variable function">set</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>number1<span class="token punctuation">,</span>number2<span class="token punctuation">,</span>sum<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul></li></ul> <h4 id="watcheffect"><a href="#watcheffect" class="header-anchor">#</a> <font color="red"><strong>watchEffect</strong></font></h4> <p>侦听响应式数据变化</p> <ul><li>watchEffect传入的函数<font color="cornflowerblue">会立即执行一次</font>，并且在<font color="cornflowerblue">执行的过程中会收集依赖</font></li> <li>只有收集<font color="cornflowerblue">依赖发生变化</font>时，<font color="cornflowerblue">watchEffect传入函数才会再次执行</font></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// 基本的使用
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>姓名 : {{userInfo.userName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>年龄 ：{{userInfo.age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>setUserName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">,</span>watchEffect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">'coderlyd'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> <span class="token function-variable function">setUserName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                userInfo<span class="token punctuation">.</span>userName <span class="token operator">=</span> <span class="token string">'coder'</span>
            <span class="token punctuation">}</span>
            <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span>userName<span class="token operator">+</span><span class="token string">'值的监听'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>userInfo<span class="token punctuation">,</span>setUserName<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><strong><font color="orange">watchEffect的停止侦听</font></strong></p> <ul><li>如果在发生某些情况下，我们<font color="cornflowerblue">希望停止侦听</font>，这个时候我们可以<font color="cornflowerblue">获取watchEffect的返回值函数，调用该函数即可</font></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
   <span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">,</span>watchEffect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
      <span class="token keyword">const</span> stopWatchEffect <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> <span class="token function-variable function">setAge</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        userInfo<span class="token punctuation">.</span>age<span class="token operator">++</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span>age<span class="token operator">&gt;=</span><span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">stopWatchEffect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 停止对watchEffect的监听</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><font color="orange"><strong>watchEffect清除副作用</strong></font></p> <ul><li>比如在开发中我们需要在侦听函数中执行网络请求，但是在网络请求还没有达到的时候，我们停止了侦听器， 或者侦听器侦听函数被再次执行了。</li> <li>那么上一次的网络请求应该被取消掉，这个时候我们就可以清除上一次的副作用；</li> <li>在我们给watchEffect传入的函数被回调时，其实可以获取到一个参数：onInvalidate
<ul><li>当<font color="cornflowerblue">副作用即将重新执行 或者 侦听器被停止 时会执行该函数传入的回调函数</font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">onInvaildate</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'触发监听函数'</span><span class="token operator">+</span>userInfo<span class="token punctuation">.</span>userName<span class="token operator">+</span>userInfo<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'网络请求'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span>

        <span class="token function">onInvaildate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>  <span class="token comment">// 每次触发侦听都会进入该函数，如果不断的侦听，每次触发侦听，会关闭上一次的网络请求</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><font color="orange"><strong>watchEffect的执行时机</strong></font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>titleRef<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>     
        <span class="token keyword">const</span> titleRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
             console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>titleRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 打印两次，一次为null，一次为div的dome元素</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>titleRef<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>我们会发现打印结果打印了两次：
<ul><li>这是因为setup函数在执行时就会立即执行传入的副作用函数，这个时候DOM并没有挂载，所以打印为null；</li> <li>而当DOM挂载时，会给title的ref对象赋值新的值，副作用函数会再次执行，打印出来对应的元素</li></ul></li></ul> <p><font color="cornflowerblue">调整watchEffect的执行时机</font></p> <ul><li><p>如果我们希望在第一次的时候就打印出来对应的元素呢？</p> <ul><li><font color="cornflowerblue">watchEffect函数的第二个参数对象 </font> 的 flush
<ul><li><font color="orange">默认值 pre ： 它会在元素挂载 或者 更新 之前执行；</font></li> <li><font color="orange"><strong>post ：会在元素挂载之后执行</strong></font></li> <li>sync ： 这将强制效果始终同步触发。然而，这是低效的，应该很少需要</li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>titleRef<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>哈啊哈哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">,</span> watchEffect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>     
            <span class="token keyword">const</span> titleRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>titleRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//直接打印的是 div Dmo元素</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                <span class="token literal-property property">flush</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>titleRef<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ul> <h4 id="watch"><a href="#watch" class="header-anchor">#</a> <font color="red"><strong>watch</strong></font></h4> <p>监听数据的变化改变</p> <ul><li>与watchEffect的比较，watch允许我们：
<ul><li><font color="cornflowerblue">懒执行副作用（第一次不会直接执行）</font></li> <li>监听的<font color="cornflowerblue">值发生改变，就会触发侦听器的执行</font>；</li> <li><font color="cornflowerblue">可以访问侦听的变化前后的值</font></li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// 基本使用
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> userName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'coderlys'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> <span class="token function-variable function">setUserName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                userName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'coder'</span>
            <span class="token punctuation">}</span>
            <span class="token function">watch</span><span class="token punctuation">(</span>userName<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'新的值'</span><span class="token operator">+</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 新的值 coder</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'旧的值'</span><span class="token operator">+</span>oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 旧的值  coderlys</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>userName<span class="token punctuation">,</span>setUserName<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token keyword">let</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'coderlys'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> <span class="token function-variable function">setUserName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                userInfo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'coder'</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 侦听reactive中的属性</span>
            <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>userInfo<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>userInfo<span class="token punctuation">,</span>setUserName<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p><font color="orange"><strong>侦听多个数据</strong></font></p> <ul><li><p>侦听器可以使用数组同时侦听多个源</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'lys'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> <span class="token function-variable function">setUserName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                name<span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token string">'coderlys'</span>
            <span class="token punctuation">}</span>
            <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>name<span class="token punctuation">,</span>age<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ['coderlys', 18]</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ['lys', 18]</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>setUserName<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ul> <p><strong><font color="orange">侦听响应式对象</font></strong></p> <p>如果我们希望侦听一个数组或者对象，那么可以使用一个getter函数，并且对可响应对象进行解构</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">,</span>watch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> userName <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">,</span><span class="token string">'g'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                userName<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'h'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token operator">...</span>userName<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'b', 'c', 'd', 'e', 'f', 'g']</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>userName<span class="token punctuation">,</span>add<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><font color="orange"><strong>watch的选项</strong></font></p> <ul><li>watch函数的第三个参数对象的选项
<ul><li><font color="orange"><strong>deep : true深度监听</strong></font></li> <li><font color="orange"><strong>immediate ：true立即执行</strong></font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
   <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>state<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
       <span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="生命周期钩子"><a href="#生命周期钩子" class="header-anchor">#</a> <strong><font color="red">生命周期钩子</font></strong></h4> <p>setup中如何使用生命周期函数呢？</p> <img src="./images/vue3/note/02/36.jpg"> <h4 id="provide函数和inject函数"><a href="#provide函数和inject函数" class="header-anchor">#</a> <font color="red"><strong>Provide函数和Inject函数</strong></font></h4> <p>在Composition APi中使用provide 和 Inject 的选项</p> <ul><li><font color="cornflowerblue">Provide 的发出数据的使用，可以传入两个参数</font> <ul><li><font color="orange">name ：提供的属性名称</font></li> <li><font color="orange">value ：提供的属性值</font></li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> provide <span class="token punctuation">,</span> ref <span class="token punctuation">,</span> readonly<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./page/Home.vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span> Home <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> userName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'coderlys'</span><span class="token punctuation">)</span>
      <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'userName'</span><span class="token punctuation">,</span> userName<span class="token punctuation">)</span> <span class="token comment">// 传入的是响应式数据 ，</span>
       <span class="token comment">// 如果想其他组件不可以修改userName的值的话,那就使用到了只读readonly了。 </span>
       <span class="token comment">// provide('userName',readonly(userName))  这样传入的值，其他组件就不可以对该属性进行修改了</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li><font color="cornflowerblue">Inject 的注入接受需要的内容，可以传入需要的属性名称</font> <ul><li><font color="orange">name : 传递过来的name</font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'userName'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="setup的代码抽离-进行hooks的抽取"><a href="#setup的代码抽离-进行hooks的抽取" class="header-anchor">#</a> setup的代码抽离，进行hooks的抽取</h4> <p><font color="orange"><strong>useCounter</strong></font></p> <p><font color="cornflowerblue">计数器的案例</font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue文件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>当前计数：{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>计数 * 2： {{countSum}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>decrement<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> useCounter <span class="token keyword">from</span> <span class="token string">'./hooks/useCounter.js'</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span>count<span class="token punctuation">,</span>countSum<span class="token punctuation">,</span>increment<span class="token punctuation">,</span>decrement<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>count<span class="token punctuation">,</span>countSum<span class="token punctuation">,</span>increment<span class="token punctuation">,</span>decrement<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
// hooks文件夹 中的 useCounter.js
import { computed, ref } from &quot;vue&quot;;
export default function () {
  let count = ref(0);
  const countSum = computed(()=&gt;{
    return count.value*2
  })
  const increment = ()=&gt;{
    count.value++
  }
  const decrement = ()=&gt;{
    count.value--
  }
  return {count,countSum,increment,decrement}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p><font color="orange"><strong>useTitle</strong></font></p> <p><font color="cornflowerblue">编写修改页面的title</font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> useTitle <span class="token keyword">from</span> <span class="token string">'./hooks/useTitle.js'</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token string">'666'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
// hooks文件夹中 useTitle.js'
import { ref , watch} from &quot;vue&quot;;
export default function (titleValue) {
  let title = ref(titleValue)
  watch(title,(newValue)=&gt;{
    document.title = newValue;
  },{
    immediate:true
  })
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong><font color="orange">useScrollPosition</font></strong></p> <p><font color="cornflowerblue">监听界面滚动位置Hook</font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> useScrollPosition <span class="token keyword">from</span> <span class="token string">&quot;./hooks/useScrollPosition.js&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token constant">SX</span><span class="token punctuation">,</span><span class="token constant">SY</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useScrollPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token constant">SX</span><span class="token punctuation">,</span><span class="token constant">SY</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
// useScrollPosition.js

import { ref } from 'vue'
export default function (){
  let SX = ref(0) 
  let SY = ref(0)
  document.addEventListener('scroll',()=&gt;{
    SX.value = window.scrollX.toFixed(0);
    SY.value = window.scrollY.toFixed(0);
  })
  return {SX,SY}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong><font color="orange">useLocalStorage</font></strong></p> <p>完成一个使用localStorage存储获取数据的Hook</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// app.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> useLocalStorage <span class="token keyword">from</span> <span class="token string">&quot;./hooks/useLocalStorage&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> 
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">useLocalStorage</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'coderlys'</span><span class="token punctuation">)</span>  <span class="token comment">//设置值</span>
        <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">useLocalStorage</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token comment">// 获取值</span>
        name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'lys'</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
// useLocalStorage.js
import {ref,watch} from 'vue'
export default function(key,value){
  let data = ref(value);
  if(value){
   window.localStorage.setItem(key,JSON.stringify(value))
  }else{
    data.value = JSON.parse(window.localStorage.getItem(key))
  }
  watch(data,(newValue)=&gt;{
    window.localStorage.setItem(key,JSON.stringify(newValue))
  })
  return data
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_7-2-vuerouter路由使用"><a href="#_7-2-vuerouter路由使用" class="header-anchor">#</a> 7.2.vueRouter路由使用</h3> <p><strong><font color="red">URL的hash</font></strong></p> <ul><li>URL的<strong>hash也就是锚点(#)</strong>, <strong>本质上是改变window.location的href属性</strong></li> <li>我们可以<strong>通过直接赋值location.hash来改变href, 但是页面不发生刷新；</strong></li></ul> <p><font color="orange">hash的优势就是兼容性更好</font>，在<strong>老版IE中都可以运行</strong>，但是<font color="orange">缺陷是有一个#</font>，显得不像一个真实的路径</p> <p><strong><font color="red">HTML5 的 History</font></strong></p> <p><font color="cornflowerblue">history接口是HTML5新增的, 它有l六种模式改变URL而不刷新页面</font></p> <ul><li>replaceState：替换原来的路径；</li> <li>pushState：使用新的路径；</li> <li>popState：路径的回退；</li> <li>go：向前或向后改变路径；</li> <li>forward：向前改变路径；</li> <li>back：向后改变路径；</li></ul> <h4 id="认识-vue-router"><a href="#认识-vue-router" class="header-anchor">#</a> <font color="red"><strong>认识 vue-router</strong></font></h4> <p>Vue Router 是Vue.js的官方路由，目前Vue路由最新的版本是4.x版本</p> <ul><li><p>vue-router是基于路由和组件的</p> <ul><li>路由用于设定访问路径, 将路径和组件映射起来.</li> <li>在vue-router的单页面应用中, 页面的路径的改变就是组件的切换</li></ul></li> <li><p>安装Vue Router</p> <ul><li><div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install vue-router@4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <p><strong><font color="red">路由的使用步骤</font></strong></p> <ul><li>使用vue-router的步骤:
<ul><li>第一步：创建路由组件的组件；</li> <li>第二步：配置路由映射: 组件和路径映射关系的routes数组；</li> <li>第三步：通过createRouter创建路由对象，并且传入routes和history模式；</li> <li>第四步：使用路由: 通过router-link</li></ul></li></ul> <img src="./images/vue3/note/02/37.jpg"> <h4 id="重定向redirect"><a href="#重定向redirect" class="header-anchor">#</a> <font color="red"><strong>重定向redirect</strong></font></h4> <ul><li><p>是我们的实现中, 默认没有显示首页组件, 必须让用户点击才可以，<font color="cornflowerblue">默认url路径为 / </font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>  <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span>  <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">'/home'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// 进入页面默认url为 / ，所以使用redirect重定向为首页的path路径 直接跳到首页 </span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>  <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Home.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
 <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li></ul> <h4 id="跳转的模式-history"><a href="#跳转的模式-history" class="header-anchor">#</a> <strong><font color="red">跳转的模式 history</font></strong></h4> <ul><li><p>选择的模式是history模式</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span>createWebHashHistory<span class="token punctuation">,</span>createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">,</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span><span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//  createWebHashHistory 为 hash 模式 为#</span>
                <span class="token comment">//  createWebHistory  为 history 模式</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li></ul> <h4 id="router-link"><a href="#router-link" class="header-anchor">#</a> <strong><font color="red">router-link</font></strong></h4> <p>router-link事实上有很多属性可以配置:</p> <ul><li><font color="orange">to属性</font>：
<ul><li>是一个字符串，或者是一个对象</li></ul></li> <li><font color="orange">replace属性</font>：
<ul><li>设置 replace 属性的话，当点击时，会调用 router.replace()，而不是 router.push()；</li></ul></li> <li><font color="orange">active-class属性</font>：
<ul><li>设置激活a元素后应用的class，默认是router-link-active</li></ul></li> <li><font color="orange">exact-active-class属性</font>：
<ul><li>链接精准激活时，应用于渲染的  的 class，默认是router-link-exact-active；</li></ul></li></ul> <h4 id="路由懒加载"><a href="#路由懒加载" class="header-anchor">#</a> <font color="red">路由懒加载</font></h4> <ul><li><p>当打包构建应用时，JavaScript 包会变得非常大，<font color="cornflowerblue">影响页面加载</font></p> <ul><li>如果我们能把<font color="cornflowerblue">不同路由对应的组件分割成不同的代码块</font>，然后当<font color="cornflowerblue">路由被访问的时候才加载对应组件，这样就会更加高效</font>；</li> <li>也可以<font color="cornflowerblue">提高首屏的渲染效率</font>；</li></ul></li> <li><p>其实这里还是我们前面讲到过的<font color="cornflowerblue">webpack的分包知识</font>，而Vue Router默认就支持<font color="cornflowerblue">动态来导入组件</font>：</p> <ul><li>这是因为component可以传入一个组件，也可以接收一个函数，该函数 需要<font color="cornflowerblue">放回一个Promise</font>；</li> <li>而<font color="cornflowerblue">import函数就是返回一个Promise</font></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>  <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">'/home'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>  <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Home.vue'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span>  <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:'about-chunk' */</span><span class="token string">'../components/About.vue'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token comment">// /* webpackChunkName:'about-chunk' */  这个是分包的命名的设置</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><img src="./images/vue3/note/02/38.jpg"> <h4 id="动态路由基本匹配"><a href="#动态路由基本匹配" class="header-anchor">#</a> <strong><font color="red">动态路由基本匹配</font></strong></h4> <ul><li>我们可能有一个 User 组件，它应该对所有用户进行渲染，但是用户的userName是不同的；</li> <li>在Vue Router中，我们可以在<font color="cornflowerblue">路径中使用一个动态字段</font>来实现，我们<font color="cornflowerblue">称之为 路径参数</font>；</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/user/:userName'</span><span class="token punctuation">,</span><span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/User.vue'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>在router-link中进行如下跳转</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;/user/+userName&quot;</span><span class="token operator">&gt;</span>我的<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> userName <span class="token operator">=</span>  <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'lys'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> userName <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><font color="red"><strong>获取动态路由的值</strong></font></p> <p>在对应组件里，如何获取对应路由的值呢？</p> <ul><li><p><font color="orange">template中，直接通过 $route.params 获取值</font>；</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    {{$route.params.userName}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><font color="orange">created中，created是vue2的生命周期里 有this，可以通过 this.$route.params 获取值</font>；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><font color="orange">在vue3的setup中，我们要使用 vue-router库给我们提供的一个hook useRoute；</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h4 id="not-found"><a href="#not-found" class="header-anchor">#</a> <font color="red"><strong>Not Found</strong></font></h4> <ul><li><p>对于哪些没有匹配到的路由，我们通常会匹配到固定的某个页面</p> <ul><li><p>比如<font color="cornflowerblue">NotFound的错误页面</font>中，这个时候<font color="cornflowerblue">我们可编写一个动态路由用于匹配所有的页面</font>；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/:pathMatch(.*)'</span><span class="token punctuation">,</span><span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/NotFound.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>我们可以通过 $route.params.pathMatch获取到传入的参数</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code> {{$route.params.pathMatch}}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h4 id="路由的嵌套"><a href="#路由的嵌套" class="header-anchor">#</a> <font color="red"><strong>路由的嵌套</strong></font></h4> <ul><li><p>什么是路由的嵌套呢？</p> <ul><li>就是在组件页面本身，也可能会在多个组件之间来回切换</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>// home组件的代码
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span> Home页面
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/news<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>新闻<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/goods<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>商品<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Home.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">'/home/news'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'news'</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Home_news.vue'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'goods'</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Home_goods.vue'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul> <p><font color="red"><strong>代码的页面的跳转</strong></font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goPath(<span class="token punctuation">'</span>/home<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goPath(<span class="token punctuation">'</span>/about<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>关于<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goPath(<span class="token punctuation">'</span>/user/lys<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
methods:{  // vue2的实现
  goPath(path){
    this.$router.push(path)
  }
},
import { useRouter } from &quot;vue-router&quot;;
setup(){  // vue3 中setup的实现方法
  let router = useRouter()
  const goPath = (path)=&gt;{
    router.push(path)
  }
  return {goPath}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong><font color="red">query方式的参数传递</font></strong></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>router.push({
      path:path,
      query:{name:'lys',age:18}
    })
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在<font color="cornflowerblue">界面中通过 $route.query 来获取参数</font>：</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code> {{$route.query}}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="页面的前进后退"><a href="#页面的前进后退" class="header-anchor">#</a> <strong><font color="red">页面的前进后退</font></strong></h4> <ul><li><font color="orange">router.go(1)</font>   向前移动一条记录</li> <li><font color="orange">router.go(-1) </font>  返回一条记录</li> <li><font color="orange">router.go(3) </font>   前进3条记录</li> <li><font color="orange">router.back()</font>   相当于router.go(-1)</li> <li><font color="orange">router.forward() </font>  相当于 router.go(1)</li></ul> <h4 id="router-link的v-slot"><a href="#router-link的v-slot" class="header-anchor">#</a> <font color="red"><strong>router-link的v-slot</strong></font></h4> <ul><li>在<font color="cornflowerblue">vue-router3.x的时候，router-link有一个tag属性</font>，可以决定router-link到底渲染成什么元素：
<ul><li>但是在<font color="cornflowerblue">vue-router4.x开始，该属性被移除了</font></li> <li>而给我们提供了更加具有<font color="cornflowerblue">灵活性的v-slot的方式来定制渲染</font>的内容</li></ul></li> <li>v-slot如何使用？
<ul><li>直接<font color="orange">写在router-link的元素里面，自定义元素</font>，如果不写，那么自定义的内容会被包裹在一个 a 元素中；</li> <li>其次，使用<font color="orange">v-slot来作用域插槽来获取内部传给我们的值</font>：
<ul><li><strong>href ：解析后的URL</strong></li> <li><strong>route：解析后的规范化的route对象</strong></li> <li><strong>navigate：触发导航的函数</strong></li> <li><strong>isActive：是否匹配的状态</strong></li> <li><strong>isExactActive ：是否精准匹配的状态</strong></li></ul></li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{props.href}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  //  /home 路径的url
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="router-view的v-slot"><a href="#router-view的v-slot" class="header-anchor">#</a> <font color="red"><strong>router-view的v-slot</strong></font></h4> <ul><li><p>router-view 也提供给我们一个插槽，可以用于  和  组件来包裹你的路由组件：</p> <ul><li><strong><font color="cornflowerblue">Component ：要渲染的组件</font></strong></li> <li>route：解析出的标准化路由对象</li></ul> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>&lt;router-view v-slot=&quot;props&quot;&gt;
  &lt;transition name=&quot;lys&quot; mode=&quot;out-in&quot;&gt;
    &lt;keep-alive&gt;
      &lt;component :is=&quot;props.Component&quot;&gt;&lt;/component&gt;
    &lt;/keep-alive&gt;
  &lt;/transition&gt;
&lt;/router-view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.lys-enter-from,.lys-leave-to</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.lys-enter-active,.lys-leave-active</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity .5s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h4 id="动态添加路由"><a href="#动态添加路由" class="header-anchor">#</a> <font color="red"><strong>动态添加路由</strong></font></h4> <ul><li>某些情况下我们可能需要动态的来添加路由
<ul><li>比如根据用户不同的权限，注册不同的路由；</li> <li>这个时候我们可以**<font color="cornflowerblue">使用一个方法 addRoute</font>**；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">,</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span><span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> dynamicUserRoute <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/user/:userName'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/User.vue'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span>dynamicUserRoute<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>如果我们是<font color="orange">为给子组件添加（children路由）</font>，那么可以**<font color="orange">传入对应的父组件路由的name</font>**：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> dynamicRecordRoute <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home/record'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Home_record.vue'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token string">'Home'</span><span class="token punctuation">,</span>dynamicRecordRoute<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="动态删除路由"><a href="#动态删除路由" class="header-anchor">#</a> <font color="red"><strong>动态删除路由</strong></font></h4> <p><strong>删除路由有以下三种方式：</strong></p> <ul><li><p>方式一：<font color="cornflowerblue">添加一个name相同的路由</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/user/:userName'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'userName'</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/User.vue'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/user/:record'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'userName'</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/record.vue'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 进行通过相同name覆盖之前的路由</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>方式二：<font color="cornflowerblue">通过removeRoute方法，传入路由名称</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/user/:userName'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'userName'</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/User.vue'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">removeRoute</span><span class="token punctuation">(</span><span class="token string">'userName'</span><span class="token punctuation">)</span>  <span class="token comment">// 通过路由的name 进行删除路由</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>方式三：<font color="cornflowerblue">通过addRoute方法返回值回调删除</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> removeRoute <span class="token operator">=</span> router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span>dynamicUserRoute<span class="token punctuation">)</span>
<span class="token function">removeRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 通过之前动态添加路由的返回函数，如果进行调用就删掉该路由。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <p><strong>路由的其他方法补充：</strong></p> <ul><li><font color="orange">router.hasRoute()  :  检查路由是否存在</font></li> <li><font color="orange">router.getRoutes() ：获取一个包含所有路由记录的数组</font></li></ul> <h4 id="路由导航守卫"><a href="#路由导航守卫" class="header-anchor">#</a> <font color="red"><strong>路由导航守卫</strong></font></h4> <p>vue-router 提供的导航守卫主要用来通过跳转或取消的方式守卫导航</p> <ul><li><p><strong>全局的前置守卫beforeEach是在导航触发时会被回调的</strong></p> <ul><li><font color="cornflowerblue"><strong>to</strong> : 即将进入的路由 Route 对象</font></li> <li><font color="cornflowerblue"><strong>from</strong> ： 即将离开的路由 Route对象</font></li> <li><font color="cornflowerblue">可选 第三个参数： next</font>，在Vue2中我们是通过next函数来决定如何进行跳转的，但是<font color="cornflowerblue"><strong>在Vue3中我们是通过返回值来控制的</strong></font>，<font color="cornflowerblue"><strong>不再推荐使用next函数</strong></font>，这是<strong>因为开发中很容易调用多次next</strong>；</li></ul></li> <li><p><strong>返回值</strong></p> <ul><li><font color="orange">false ：取消当前导航的跳转</font></li> <li><font color="orange">不返回或者undefined：进行默认导航</font></li> <li><font color="orange">返回一个路由地址</font>：
<ul><li>可以是一个<strong>string类型的路径</strong>；</li> <li>可以是一个<strong>对象，对象中包含path、query、params等信息</strong>；</li></ul></li></ul></li></ul> <p><font color="cornflowerblue"><strong>登录守卫功能</strong></font>，比如我们完成一个功能，只有登录后才能看到其他页面：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">!=</span> <span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/login'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_7-3-vuex的状态管理"><a href="#_7-3-vuex的状态管理" class="header-anchor">#</a> 7.3.Vuex的状态管理</h3> <ul><li>什么是状态管理
<ul><li>在开发中，我们会的应用程序需要处理各种各样的数据，这些数据需要保存在我们应用程序中的某一个位置，对于这些数据的管理我们就称之为是 状态管理。</li></ul></li></ul> <p><font color="orange"><strong>Vuex</strong></font>：<font color="cornflowerblue">将组件的内部状态抽离出来，以一个全局单例的方式来管理</font></p> <img src="./images/vue3/note/02/39.jpg"> <h4 id="vuex的安装"><a href="#vuex的安装" class="header-anchor">#</a> <strong><font color="red">Vuex的安装</font></strong></h4> <ul><li><p>依然我们要使用vuex，首先第一步需要安装vuex，安装的时候需要添加next指定版本</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install vuex@next
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// store文件夹下的index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token constant">ADDCOUNT</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                state<span class="token punctuation">.</span>count<span class="token operator">++</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token constant">SUBCOUNT</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                state<span class="token punctuation">.</span>count<span class="token operator">--</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span>  store
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mian.js</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./store/index.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <p><strong><font color="red">组件获取状态数据</font></strong></p> <p><font color="orange">vue2的中是如何获取的</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'ADDCOUNT'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
 <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><font color="orange">vue3的中是如何获取的</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">addCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'ADDCOUNT'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token function-variable function">subCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'SUBCOUNT'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> vuexCount <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       <span class="token keyword">return</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>addCount<span class="token punctuation">,</span>subCount<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>但是，如果我们有<font color="cornflowerblue">很多个状态都需要获取话，可以使用mapState的辅助函数</font>：</p> <h4 id="vuex的mapstate使用"><a href="#vuex的mapstate使用" class="header-anchor">#</a> <strong><font color="red">Vuex的mapState使用</font></strong></h4> <p><font color="orange">vue2中的使用mapState</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token punctuation">{</span><span class="token punctuation">{</span>age<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>addres<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span> 
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> mapState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">,</span><span class="token string">'addres'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><font color="orange">vue3中的使用mapState</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// useState.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span>useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token keyword">const</span> stateFn <span class="token operator">=</span> <span class="token function">mapState</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> stateS <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>stateFn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> fn <span class="token operator">=</span> stateFn<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$store</span><span class="token operator">:</span>store<span class="token punctuation">}</span><span class="token punctuation">)</span>
      stateS<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> stateS
<span class="token punctuation">}</span>
<span class="token comment">// app.js</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./hook/useState.js&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">,</span><span class="token string">'addres'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="vuex的mapgetters使用"><a href="#vuex的mapgetters使用" class="header-anchor">#</a> <strong><font color="red">Vuex的mapGetters使用</font></strong></h4> <p><font color="orange">vue2中的使用mapGetters</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// store/index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'codeLys'</span><span class="token punctuation">,</span>  <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token literal-property property">addres</span><span class="token operator">:</span><span class="token string">'上海'</span>  <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> state<span class="token punctuation">.</span>name<span class="token operator">+</span>state<span class="token punctuation">.</span>age<span class="token operator">+</span>state<span class="token punctuation">.</span>addres
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span>  store
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>getUserInfo<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token comment">// codeLys18上海</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> mapGetters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'getUserInfo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><font color="orange">vue3中的使用mapGetters</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>mapGetters<span class="token punctuation">,</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useGetters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> gettersFn <span class="token operator">=</span>  <span class="token function">mapGetters</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> getterS <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>gettersFn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      getterS<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span><span class="token function">computed</span><span class="token punctuation">(</span>gettersFn<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$store</span><span class="token operator">:</span>store<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> getterS
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>getUserInfo<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> useGetters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./hook/useGetters&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
      <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> getterS <span class="token operator">=</span> <span class="token function">useGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'getUserInfo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token operator">...</span>getterS<span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="vuex的mapmutations的使用"><a href="#vuex的mapmutations的使用" class="header-anchor">#</a> <font color="red"><strong>Vuex的mapMutations的使用</strong></font></h4> <p><font color="orange">vue2中使用mapMutaions的使用</font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ADDCOUNT<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SUBCOUNT<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapMutations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'ADDCOUNT'</span><span class="token punctuation">,</span><span class="token string">'SUBCOUNT'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><font color="orange">vue3中使用mapMutaions的使用</font></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ADDCOUNT<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SUBCOUNT<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapMutations<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> mutations <span class="token operator">=</span> <span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'ADDCOUNT'</span><span class="token punctuation">,</span><span class="token string">'SUBCOUNT'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
       <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span>mutations
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="vuex的actions的基本使用"><a href="#vuex的actions的基本使用" class="header-anchor">#</a> <strong>Vuex的actions的基本使用</strong></h4> <ul><li>Action类似于mutation，<strong>不同在于</strong> <ul><li><font color="orange">Action提交的是mutaion，而不是直接变更状态；</font></li> <li><font color="orange">Action可以包含任意异步操作</font>，</li></ul></li></ul> <p>actions有一个非常重要的参数<font color="orange">context</font>:</p> <ul><li>我们可以从其中获取到<font color="orange">commit方法来提交一个mutation</font>，或者通过<font color="orange"> context.state 和 context.getters</font> 来 获取 <strong>state</strong> 和 <strong>getters</strong>；</li> <li><strong>actions 也可以携带参数的</strong></li></ul> <p><strong><font color="orange">actions的基本使用</font></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// app.vue</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">getBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'getHomeMuitiData'</span><span class="token punctuation">,</span><span class="token string">'abc'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// store/index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">bannerList</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token constant">SETBANNERDATA</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                state<span class="token punctuation">.</span>bannerList<span class="token operator">=</span>value
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token function">getHomeMuitiData</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// abc</span>
                axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://123.207.32.32:8000/home/multidata'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'SETBANNERDATA'</span><span class="token punctuation">,</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>banner<span class="token punctuation">.</span>list<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span>  store
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><strong><font color="orange">actions的辅助函数 MapActions</font></strong></p> <ul><li><p>对象类型的写法</p> <ul><li><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getBanner<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取轮播图<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">getBanner</span><span class="token operator">:</span><span class="token string">'getHomeMuitiData'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul></li> <li><p>数组类型的写法</p> <ul><li><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getHomeMuitiData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取轮播图<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'getHomeMuitiData'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span>/style&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul></li></ul> <p><strong>setup函数里的写法</strong></p> <ul><li><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getHomeMuitiData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取轮播图<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'getHomeMuitiData'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul> <h4 id="vuex的module的基本使用"><a href="#vuex的module的基本使用" class="header-anchor">#</a> Vuex的module的基本使用</h4> <ul><li>什么是Module？
<ul><li>由于使用单一状态树，应用的所有<font color="orange">状态会集中到一个比较大的对象</font>，当应用<font color="orange">变得非常复杂时</font>，store 对象就有可 能变得相当臃肿</li> <li>为了解决以上问题，Vuex 允许我们将 <font color="cornflowerblue">store 分割成模块（module）</font>；</li> <li>每个模块<font color="orange">拥有自己的 state、mutation、action、getter、甚至是嵌套子模块</font>；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// store/index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./modules/Home&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> User <span class="token keyword">from</span> <span class="token string">&quot;./modules/User&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span><span class="token punctuation">{</span>
        Home<span class="token punctuation">,</span>
        User
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store
<span class="token comment">// store/modules/Home.js</span>
<span class="token keyword">const</span> HomeStore <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 默认情况下，模块内部的action和mutation仍然是注册在全局的命名空间中的</span>
      <span class="token comment">//这样使得多个模块能够对同一个 action 或 mutation 作出响应</span>
      <span class="token comment">//我们希望模块具有更高的封装度和复用性</span>
      <span class="token comment">//可以添加 namespaced: true 的方式使其成为带命名空间的模块,  它的所有 getter、action 及 mutation 都会自动根据模块注册的路径调整命名</span>
   <span class="token literal-property property">namespaced</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>  
   <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">100</span>
        <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">{</span>
       <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>getters<span class="token punctuation">,</span>rootState<span class="token punctuation">,</span>rootGetters</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span>  state<span class="token punctuation">.</span>count <span class="token operator">*</span> <span class="token number">66</span>
       <span class="token punctuation">}</span>     
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">getHomeMuitiData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>commit<span class="token punctuation">,</span>dispatch<span class="token punctuation">,</span>state<span class="token punctuation">,</span>rootState<span class="token punctuation">,</span>getters<span class="token punctuation">,</span>rootGetters<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>    
    <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> HomeStore
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h5 id="module的命名情况下如何修改数据"><a href="#module的命名情况下如何修改数据" class="header-anchor">#</a> <strong><font color="red">module的命名情况下如何修改数据</font></strong></h5> <ul><li><p><font color="orange">获取state的数据</font></p> <ul><li><div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>{{$store.state.Home.count}}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p><font color="orange">触发mutaions的方法</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setHomeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'Home/setCount'</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li> <li><p><font color="orange">获取getters的数据</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">[</span><span class="token string">'Home/sum'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p><font color="orange">触发actions的方法</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'Home/getHomeMuitiData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h5 id="module的辅助函数"><a href="#module的辅助函数" class="header-anchor">#</a> <strong><font color="red">module的辅助函数</font></strong></h5> <p>每个不同的三种写法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>sum<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>homeCount<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>UserCount<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>sum<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;setCount&quot;</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;getHomeMuitiData&quot;</span><span class="token operator">&gt;</span>获取数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span>createNamespacedHelpers<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// import { mapActions } from &quot;vuex&quot;;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span>mapGetters<span class="token punctuation">,</span>mapMutations<span class="token punctuation">,</span>mapActions<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">createNamespacedHelpers</span><span class="token punctuation">(</span><span class="token string">'Home'</span><span class="token punctuation">)</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token comment">// 写法一</span>
      <span class="token comment">//  ...mapState('Home',['count']),</span>
      <span class="token comment">//  ...mapGetters('Home',['sum'])</span>

      <span class="token comment">// 写法二</span>
      <span class="token comment">// ...mapState({</span>
      <span class="token comment">//   homeCount: state =&gt; state.Home.count,</span>
      <span class="token comment">// })</span>
      <span class="token comment">// ...mapGetters({</span>
      <span class="token comment">//   sumCount: &quot;Home/sum&quot;</span>
      <span class="token comment">// })</span>
        
      <span class="token comment">//写法三</span>
      <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'sum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 写法一</span>
      <span class="token comment">// ...mapMutations('Home',['setCount'])</span>
      <span class="token comment">// ...mapActions('Home',['getHomeMuitiData'])</span>

      <span class="token comment">// 写法二</span>
      <span class="token comment">// ...mapMutations({</span>
      <span class="token comment">//   setCount:'Home/setCount'</span>
      <span class="token comment">// })</span>
      <span class="token comment">//  ...mapActions({</span>
      <span class="token comment">//   getBanner:'Home/getHomeMuitiData'</span>
      <span class="token comment">//  })</span>

      <span class="token comment">//写法三</span>
      <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'setCount'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'getHomeMuitiData'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h5 id="setup中使用module的辅助函数"><a href="#setup中使用module的辅助函数" class="header-anchor">#</a> <font color="red"><strong>setup中使用module的辅助函数</strong></font></h5> <p>之前封装的在setup中map的辅助函数没有考虑到模块，现在进行更新</p> <p><font color="orange">useState.js</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span>useStore <span class="token punctuation">,</span> createNamespacedHelpers<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">moduleName<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> foo <span class="token operator">=</span> mapState<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> moduleName<span class="token punctuation">.</span>length<span class="token operator">&gt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    foo <span class="token operator">=</span> <span class="token function">createNamespacedHelpers</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">)</span><span class="token punctuation">.</span>mapState
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span><span class="token punctuation">{</span>
      data <span class="token operator">=</span> moduleName
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token keyword">const</span> stateFn <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> stateS <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>stateFn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> fn <span class="token operator">=</span> stateFn<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$store</span><span class="token operator">:</span>store<span class="token punctuation">}</span><span class="token punctuation">)</span>
      stateS<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> stateS
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><font color="orange">useGetters.js</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>mapGetters<span class="token punctuation">,</span> useStore<span class="token punctuation">,</span>createNamespacedHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useGetters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">moduleName<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> foo <span class="token operator">=</span> mapGetters
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> moduleName<span class="token punctuation">.</span>length<span class="token operator">&gt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      foo <span class="token operator">=</span> <span class="token function">createNamespacedHelpers</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">)</span><span class="token punctuation">.</span>mapGetters
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span><span class="token punctuation">{</span>
      data <span class="token operator">=</span> moduleName
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span>  <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> gettersFn <span class="token operator">=</span>  <span class="token function">foo</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> getterS <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>gettersFn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      getterS<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span><span class="token function">computed</span><span class="token punctuation">(</span>gettersFn<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$store</span><span class="token operator">:</span>store<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> getterS
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><font color="orange">setup中使用</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>sum<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;setCount&quot;</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;getHomeMuitiData&quot;</span><span class="token operator">&gt;</span>获取数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
 <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span>createNamespacedHelpers<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./hook/useState.js&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> useGetters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./hook/useGetters.js&quot;</span><span class="token punctuation">;</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'Home'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
     <span class="token keyword">let</span> getters <span class="token operator">=</span> <span class="token function">useGetters</span><span class="token punctuation">(</span><span class="token string">'Home'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'sum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> setCount <span class="token operator">=</span> <span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'setCount'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> getHomeMuitiData <span class="token operator">=</span> <span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'getHomeMuitiData'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
           <span class="token operator">...</span>state<span class="token punctuation">,</span>
           <span class="token operator">...</span>getters<span class="token punctuation">,</span>
           <span class="token operator">...</span>setCount<span class="token punctuation">,</span>
           <span class="token operator">...</span>getHomeMuitiData
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="nexttick"><a href="#nexttick" class="header-anchor">#</a> <font color="red"><strong>nexttick</strong></font></h4> <p>官方解释：<font color="orange">将回调推迟到下一个 DOM 更新周期之后执行。在更改了一些数据以等待 DOM 更新后立即使用它。</font></p> <ul><li>比如我们有下面的需求：
<ul><li>点击一个按钮，我们会修改在h2中显示的message；</li> <li>message被修改后，获取h2的高度；</li></ul></li> <li>实现上面的案例我们有三种方式：
<ul><li>方式一：在点击按钮后立即获取到h2的高度（错误的做法）</li> <li>方式二：在updated生命周期函数中获取h2的高度（但是其他数据更新，也会执行该操作）</li> <li>方式三：使用nexttick函数；</li></ul></li></ul> <p><font color="cornflowerblue">vue2 中的做法</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> titleText <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;addTitle&quot;</span><span class="token operator">&gt;</span>添加内容<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> nextTick <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">titleText</span><span class="token operator">:</span><span class="token string">'哈哈哈哈哈'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">addTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>titleText<span class="token operator">+=</span><span class="token string">'哈哈哈哈哈'</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>title<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><font color="cornflowerblue">vue3 中的做法</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;title&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> titleText <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;addTitle&quot;</span><span class="token operator">&gt;</span>添加内容<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span> 
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> nextTick <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> title <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> titleText <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;哈哈哈哈哈&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">addTitle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      titleText<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token string">&quot;哈哈哈哈哈&quot;</span><span class="token punctuation">;</span>
      <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>title<span class="token punctuation">.</span>value<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> titleText<span class="token punctuation">,</span> title<span class="token punctuation">,</span> addTitle <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="八-pinia-状态管理"><a href="#八-pinia-状态管理" class="header-anchor">#</a> 八：pinia_状态管理</h2> <h3 id="_8-1-pinia-的介绍"><a href="#_8-1-pinia-的介绍" class="header-anchor">#</a> 8.1 pinia 的介绍</h3> <ul><li>Pinia（发音为/piːnjʌ/，如英语中的“peenya”）是最接近piña（西班牙语中的菠萝）的词；
<ul><li>Pinia开始于大概2019年，最初是作为一个实验<font color="orange">为Vue重新设计状态管理</font>，让它用起来像<font color="orange">组合式API（Composition API）</font>。</li> <li>从那时到现在，最初的设计原则依然是相同的，并且目前同时兼容Vue2、Vue3，也并不要求你使用Composition API；</li> <li>Pinia本质上依然是一个<font color="orange">状态管理的库，用于跨组件、页面进行状态共享</font>（这点和Vuex、Redux一样）；</li></ul></li></ul> <p><strong>Pinia 和 Vuex的区别</strong></p> <ul><li>那么我们不是已经有Vuex了吗？为什么还要用Pinia呢？
<ul><li>Pinia 最初是为了<font color="orange">探索 Vuex 的下一次迭代会</font>是什么样子，结合了<font color="orange"> Vuex 5 核心团队</font>讨论中的许多想法；</li> <li>最终，团队意识到<font color="orange">Pinia已经实现了Vuex5中大部分内容</font>，所以最终<font color="orange">决定用Pinia来替代Vuex</font>；</li> <li>与 Vuex 相比，Pinia 提供了一个<font color="orange">更简单的 API</font>，具有<font color="orange">更少的仪式</font>，提供了 <font color="orange">Composition-API 风格的 API</font>；</li> <li>最重要的是，在<font color="orange">与 TypeScript 一起使用时具有可靠的类型推断支持</font>；</li></ul></li> <li><strong>和Vuex相比，Pinia有很多的优势：</strong> <ul><li>比如<font color="orange">mutations 不再存在</font></li> <li><font color="orange">更友好的TypeScript支持，Vuex之前对TS的支持很不友好</font></li> <li><font color="orange">不再有modules的嵌套结构：</font> <ul><li>你可以灵活使用每一个store，它们是通过扁平化的方式来相互使用的</li></ul></li> <li><font color="orange">也不再有命名空间的概念，不需要记住它们的复杂关系；</font></li></ul></li></ul> <h3 id="_8-2-如何使用-pinia"><a href="#_8-2-如何使用-pinia" class="header-anchor">#</a> 8.2 如何使用 pinia</h3> <ul><li><p>使用pinia之前，我们需要进行安装</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install pinia
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>创建一个pinia并且将其传递给应用程序</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>import {createPinia} from 'pinia'
const pinia = createPinia()
export default pinia
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在main.js中引入安装</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>import pinia from './store'
createApp(App).use(pinia).mount('#app')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <h3 id="_8-3-认识使用-store"><a href="#_8-3-认识使用-store" class="header-anchor">#</a> 8.3 认识使用 store</h3> <p><strong>什么是store ？</strong></p> <ul><li>一个 Store （如 Pinia）是一个<font color="orange">实体</font>，它会持有为绑定到你<font color="orange">组件树</font>的<font color="orange">状态和业务逻辑</font>，也就是保存了全局的状态；</li> <li>它有点像始终存在，并且<font color="orange">每个人都可以读取和写入的组件</font>；</li> <li>你可以在你的应用程序中<font color="orange">定义任意数量的Store来管理你的状态</font>；</li></ul> <p><strong>Store有三个核心概念</strong></p> <ul><li><font color="orange">state、getters、actions</font></li> <li>等同于组件的data、computed、methods；</li> <li>一旦 store 被实例化，你就可以<font color="orange">直接在 store 上访问 state、getters 和 actions </font>中定义的任何属性</li></ul> <p><strong>定义Store</strong></p> <ul><li>我们需要知道 Store 是<font color="orange">使用defineStore()定义</font>的</li> <li>它需要一个<strong>唯一名称</strong>，作为<strong>第一个参数传递</strong>；</li></ul> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>export const useCounter = defineStore('counter',{
    state:()=&gt;({
    counter:10
    })
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>使用定义的Store</strong></p> <ul><li><p>store 在它被使用<font color="cornflowerblue">之前是不会创建的</font>，我们可以通过<font color="cornflowerblue">调用 use函数 来使用Store</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>&lt;template&gt;
  {{counterStore.counter}}
&lt;/template&gt;
&lt;script setup&gt;
  import { useCounter } from '@/store/counter'
  const counterStore = useCounter()
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>注意<font color="orange">Store获取到后不能被解构，那么会失去响应式</font></p> <ul><li><p>为了从 Store 中提取属性同时保持其响应式，您需要<font color="orange">使用storeToRefs()</font>。也可以<font color="cornflowerblue">使用之前学习的 toRefs</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>const {counter} = counterStore  // 这样解构 不是响应式了
const {counter} = toRefs(counterStore) // 是响应式
const {counter} = storeToRefs(counterStore)  // 是响应式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <h3 id="_8-4-认识和定义state"><a href="#_8-4-认识和定义state" class="header-anchor">#</a> 8.4 认识和定义State</h3> <p><strong>state是store的核心部分，因为store是用来帮助我们管理状态</strong></p> <ul><li>在 Pinia 中，<font color="orange">状态被定义为返回初始状态的函数</font>；</li></ul> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>export const useCounter = defineStore('counter',{
    state:()=&gt;({
    counter：0，
    name:'lys'
    })
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>读取和写入 state</strong></p> <ul><li><p>可以通过 store 实例访问状态来<font color="orange">直接读取和写入状态</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>const counterStore = useCounter()
counterStore.counter ++ 
counterStore.name = 'coderlys'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <p><strong>重置 state</strong></p> <ul><li><p>可以通过调用store 上的<font color="orange"> $reset() 方法将状态 重置到初始值</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>const counterStore = useCounter()
counterStore.$reset()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <p><strong>同时修改多个state的值</strong></p> <ul><li><p>可以调用 <font color="orange">$patch  同时修改多个 state值</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>const counterStore = useCounter()
counterStore.$patch({
  counter:100,
  name:'aaa'
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <p><strong>替换 state</strong></p> <ul><li><p>您可以通过将其 <font color="orange">$ state 属性设置为新对象来替换 Store </font>的整个状态</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>counterStore.$state = {
  counter:1,
  name:'2'
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h3 id="_8-5-认识和定义getters"><a href="#_8-5-认识和定义getters" class="header-anchor">#</a> 8.5 认识和定义Getters</h3> <p><strong>Getters相当于Store的计算属性</strong></p> <ul><li>它们可以用 defineStore() 中的 getters 属性定义</li> <li>getters中<font color="orange">可以定义接受一个state作为参数的函数</font>；</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function-variable function">doubleCounter</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>counter<span class="token operator">*</span><span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>访问Getters</strong></p> <ul><li><p>访问当前store的Getters：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> counterStore <span class="token operator">=</span> <span class="token function">useCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counterStore<span class="token punctuation">.</span>doubleCounter<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>Getters中访问自己的其他Getters</p> <p>可以通过 this 来访问到当前store实例的所有其他属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">doublePlusOne</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>doubleCounter<span class="token operator">+</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>访问其他的store 的 Getters</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">message</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">useUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>doublePlusOne <span class="token operator">+</span> userStore<span class="token punctuation">.</span>nickname
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h3 id="_8-6-认识和定义-actions"><a href="#_8-6-认识和定义-actions" class="header-anchor">#</a> 8.6 认识和定义 Actions</h3> <p><strong>defineStore() 中的actions属性定义，编写异步函数</strong>，在action中可以通过<font color="orange">this访问整个store实例的所有操作</font></p> <h2 id="九-vue3-高级语法补充"><a href="#九-vue3-高级语法补充" class="header-anchor">#</a> 九：Vue3_高级语法补充</h2> <h3 id="_9-1-vue中自定义指令"><a href="#_9-1-vue中自定义指令" class="header-anchor">#</a> 9.1 Vue中自定义指令</h3> <ul><li>在Vue的模板语法中我们学习过各种各样的指令：v-show、v-for、v-model等等，除了使用这些指令之外，<strong>Vue也允许我们来自定义自己的指令</strong>。
<ul><li>注意：在Vue中，<font color="orange">代码的复用和抽象主要还是通过组件</font>；</li> <li>通常在某些情况下，<font color="orange">你需要对DOM元素进行底层操作</font>，这个时候就会<font color="orange">用到自定义指令</font>；</li></ul></li> <li>自定义指令分为两种
<ul><li><font color="orange">自定义局部指令</font>：组件中通过 <font color="orange">directives 选项</font>，只能在当前组件中使用；</li> <li><font color="orange">自定义全局指令</font>：app的 <font color="orange">directive 方法</font>，可以在任意组件中被使用；</li></ul></li></ul> <p>实现方式：</p> <p><font color="orange"><strong>局部实现</strong></font></p> <p>这个<font color="cornflowerblue">自定义指令</font>实现非常简单，我们只需要在<font color="cornflowerblue">组件选项</font>中使用<font color="cornflowerblue"> directives </font>即可</p> <p>它是一个对象，在对象中编写我们<font color="cornflowerblue">自定义指令的名称</font>（注意：这里不需要加v-）；</p> <p>自定义指令有一个生命周期，是<font color="cornflowerblue">在组件挂载后调用的 mounted</font>，我们可以在其中完成操作；</p> <ul><li><p><strong>局部自定义指令的 聚焦的实现</strong></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>focus<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <p><font color="cornflowerblue">vue2 选项API （option）</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
        <span class="token literal-property property">directives</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">focus</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul> <p><font color="cornflowerblue">vue3 组合API （composition）</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
        <span class="token keyword">const</span> vFocus <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <p><font color="orange"><strong>全局实现</strong></font></p> <p>自定义一个全局的v-focus指令可以让我们在<font color="cornflowerblue">任何地方直接使用</font></p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> app <span class="token operator">=</span><span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'focus'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h4 id="指令的生命周期"><a href="#指令的生命周期" class="header-anchor">#</a> 指令的生命周期</h4> <p>一个指令定义的对象，Vue提供了如下的几个钩子函数：</p> <ul><li><font color="orange">created</font>：在绑定元素的 attribute 或事件监听器被应用之前调用</li> <li><font color="orange">beforeMount</font> ：当指令第一次绑定到元素并且在<font color="orange">挂载父组件之前调用</font></li> <li><font color="orange">mounted</font>：在绑定元素的父组件<font color="orange">被挂载后调用</font></li> <li><font color="orange">beforeUpdate</font>：在更新包含组件的VNode<font color="orange">更新之前调用</font></li> <li><font color="orange">update</font>：在包含组件的Vnode及其子组件的Vnode<font color="orange">更新后调用</font></li> <li><font color="orange">beforeUnmount</font>：在<font color="orange">卸载</font>绑定元素的父组件<font color="orange">之前调用</font></li> <li><font color="orange">unmounted</font>：当指令与元素解除定且父组件<font color="orange">已卸载时，只调用一次</font>；</li></ul> <h4 id="指令的参数和修饰符"><a href="#指令的参数和修饰符" class="header-anchor">#</a> 指令的参数和修饰符</h4> <p>如果我们指令需要<font color="orange">接受一些参数</font>或者<font color="orange">修饰符</font>应该如何操作呢？</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token operator">&lt;</span>input v<span class="token operator">-</span>focus<span class="token operator">:</span>info<span class="token punctuation">.</span>aaa<span class="token punctuation">.</span>bbb<span class="token operator">=</span><span class="token string">&quot;{name:'lys',age:18}&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'focus'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><img src="./images/vue3/note/02/40.jpg"> <ul><li><font color="cornflowerblue">info是参数的名称</font>；</li> <li><font color="cornflowerblue">aaa-bbb是修饰符的名称</font>；</li> <li><font color="cornflowerblue">后面是传入的具体的值</font>；</li></ul> <p><strong>自定义指令案例：时间格式化指令：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'formatTime'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>inherit</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">let</span> timeFormat <span class="token operator">=</span> <span class="token string">'YYYY-MM-DD'</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>inherit<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
            timeFormat <span class="token operator">=</span> inherit<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
     <span class="token keyword">let</span> content <span class="token operator">=</span> el<span class="token punctuation">.</span>textContent
        <span class="token keyword">if</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>textContent<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            content <span class="token operator">*</span> <span class="token operator">=</span> <span class="token number">1000</span>
        <span class="token punctuation">}</span>
      el<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">dayjs</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>timeFormat<span class="token punctuation">)</span>   
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>span v<span class="token operator">-</span>formatTime<span class="token operator">&gt;</span><span class="token number">1587086351200</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> <span class="token comment">// 1587-10-04</span>
<span class="token operator">&lt;</span>span v<span class="token operator">-</span>formatTime<span class="token operator">=</span><span class="token string">&quot;'YYYY/MM/DD mm:ss'&quot;</span><span class="token operator">&gt;</span><span class="token number">2234567891</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>    <span class="token comment">// 2040/10/23 18:11</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_9-2-vue内置组件teleport"><a href="#_9-2-vue内置组件teleport" class="header-anchor">#</a> 9.2  Vue内置组件Teleport</h3> <p><strong>认识Teleport</strong></p> <ul><li>在组件化开发中，我们<strong>封装一个组件A</strong>，在<strong>另外一个组件B中使用</strong> <ul><li>那么<font color="cornflowerblue">组件A中template的元素</font>，会<font color="cornflowerblue">被挂载到组件B中template</font>的某个位置；</li> <li>最终我们的应用程序会形成<strong>一颗DOM树结构</strong></li></ul></li> <li>但是某些情况下，我们<strong>希望组件不是挂载在这个组件树上的</strong>，可能是<strong>移动到Vue app之外的其他位置</strong>：
<ul><li>比如<font color="cornflowerblue">移动到body元素</font>上，或者我们<font color="cornflowerblue">有其他的div#app之外的元素上</font></li> <li>这个时候我们就可以<font color="cornflowerblue">通过teleport来完成</font>；</li></ul></li></ul> <p><strong>Teleport是什么呢？</strong></p> <ul><li>它是一个<font color="orange">Vue提供的内置组件</font>，类似于react的Portals；</li> <li>teleport翻译过来是心灵传输，远距离运输的意思；
<ul><li>它有两个属性：</li> <li><font color="orange">to</font>：<strong>指定将其中的内容移动到的目标元素，可以使用选择器</strong>；</li> <li><font color="orange">disabled</font>：<strong>是否禁用teleport功能</strong></li></ul></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>多个teleport</strong></p> <p>如果我们将<font color="cornflowerblue">多个teleport应用到同一个目标上 （to的值相同），那么这些目标会进行合并</font>：</p> <img src="./images/vue3/note/02/41.jpg"> <h3 id="_9-3vue中安装插件的方式"><a href="#_9-3vue中安装插件的方式" class="header-anchor">#</a> 9.3Vue中安装插件的方式</h3> <p>通常我们<strong>向Vue全局添加一些功能</strong>时，会采用<strong>插件的模式</strong>，它有<strong>两种编写方式</strong></p> <ul><li><font color="orange">对象类型</font>：一个<font color="orange">对象</font>，但是<font color="orange">必须包含一个install的函数</font>，该<font color="orange">函数会在安装插件时执行</font></li> <li><font color="orange">函数类型</font>：一个<font color="orange">function </font>，这个函数会在<font color="orange">安装插件时自动执行</font></li></ul> <p>插件可以完成的功能没有限制，比如下面的几种都是可以的</p> <ul><li><font color="orange">添加全局方法或者property</font>，通过把它们添加到<font color="orange"> config.globalPropertiers</font>上实现；</li> <li><font color="orange">添加全局资源</font>：<font color="orange">指令 / 过滤器 / 过渡</font> 等；</li> <li>通过<font color="orange">全局 mixin </font>来添加<font color="orange">一些组件选项</font></li> <li><font color="orange">一个库，提供自己的API</font>。同时<font color="orange">提供上面提到一个或多个功能</font></li></ul> <p><strong>插件的编写方式</strong></p> <p><font color="orange">对象类型写法</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'插件被安装'</span><span class="token operator">+</span>app<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><font color="orange">函数类型写法</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'插件被安装'</span><span class="token operator">+</span>app<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_9-4-vue中渲染函数的使用"><a href="#_9-4-vue中渲染函数的使用" class="header-anchor">#</a> 9.4 Vue中渲染函数的使用</h3> <p><strong>认识h函数</strong></p> <p>Vue推荐在绝大叔情况下<strong>使用模板</strong>来创建你的HTML，然后一些特殊场景，你真的需要JavaScript的完全编程的能力，这个时候你可以使用<font color="cornflowerblue">渲染函数，它比模板更接近编译器</font></p> <ul><li><p>Vue在生成真实的DOM之前，会将<font color="orange">我们的节点转换成VNode</font>，而VNode组合在一起形成<font color="orange">一棵树结构</font>，就是<font color="orange">虚似DOM（VDOM）</font></p></li> <li><p>事实上，我们之前编写的 template中的HTML 最终也是<font color="orange">使用渲染函数生成对应的VNode</font></p></li> <li><p>那么，如果你想充分的利用JavaScript的编程能力，我们可以自己来<font color="orange">编写 createVNode函数，生成对应的VNode</font>；</p></li> <li><p><font color="orange">h() 函数</font>是一个用于<font color="orange">创建vnode的一个函数</font></p></li> <li><p>其实更准备的命名是<font color="orange">createVNode()函数</font>，但是为了简便在Vue将之<font color="orange">简化为 h() 函数</font></p></li></ul> <p><strong>h() 函数的使用</strong></p> <img src="./images/vue3/note/02/42.jpg"> <ul><li>如果<font color="orange">没有props</font>，那么通常可以<font color="orange">将children作为第二个参数传入</font></li> <li>如果会产生歧义，可以<font color="orange">将null作为第二个参数传入</font>，将<font color="orange">children作为第三个参数传入</font></li></ul> <p>h函数可以在两个地方使用</p> <ul><li><p><font color="orange">render函数选项</font>中；</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token keyword">class</span><span class="token operator">:</span><span class="token string">'app'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>
        <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'h2'</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">'h2标签'</span><span class="token punctuation">)</span>
     <span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul></li> <li><p><font color="orange">setup函数选项</font>中（setup本身需要时一个函数类型，函数再返回h函数创建VNode）</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token keyword">class</span><span class="token operator">:</span><span class="token string">'app'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>
            <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'h2'</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">'h2标签'</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul></li></ul> <p><strong>h函数计数器案例</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
   <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">counter</span><span class="token operator">:</span><span class="token number">0</span> <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token keyword">class</span><span class="token operator">:</span><span class="token string">'app'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>
        <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'h2'</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">当前计数</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token function-variable function">onClick</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token operator">++</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">'+1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token function-variable function">onClick</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">'-1'</span><span class="token punctuation">)</span>
     <span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_9-5-vue中编写jsx的语法"><a href="#_9-5-vue中编写jsx的语法" class="header-anchor">#</a> 9.5 Vue中编写jsx的语法</h3> <p>如果我们希望在<strong>项目中使用jsx</strong> , 那么我们<strong>需要添加对jsx 的支持</strong></p> <ul><li>jsx我们通常会<font color="orange">通过Babel来进行转换</font> （React编写的jsx就是通过babel转换的）</li> <li>对于Vue来说，我们只需要在Babel中配置对应的插件即可</li></ul> <p>vue-cli 安装Babel支持Vue的jsx插件</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install @vue/babel-plugin-jsx -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置 babel.config.js文件</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>module.exports = {
    presets:[
    '@/vue/cli-plugin-babel/preset'
    ],
    plugins:[
    &quot;@vue/babel-plugin-jsx&quot;
    ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Vite环境下，安装的插件</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>npm install @vitejs/plugin-vue-jsx -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置 vite.config.js 文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> fileURLToPath<span class="token punctuation">,</span> <span class="token constant">URL</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'node:url'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>
<span class="token keyword">import</span> jsx <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue-jsx'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">jsx</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>jsx 计数器案例</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
export default {
    data:()=&gt;{
        return {
            count:0
        }
    },  
    render(){
      return (
        &lt;div class='app'&gt;
            &lt;h2&gt;当前计数:{this.count}&lt;/h2&gt;
            &lt;button onClick={this.add}&gt;+1&lt;/button&gt;
            &lt;button onClick={this.sub}&gt;-1&lt;/button&gt;
        &lt;/div&gt;
      )  
    },
    methods:{
        add(){
            this.count++
        },
        sub(){
            this.count--
        }
    }, 
}
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#一-邂逅vue3" class="sidebar-link reco-side-一-邂逅vue3" data-v-cb1513f6>一：邂逅Vue3</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_1-1-认识vue" class="sidebar-link reco-side-_1-1-认识vue" data-v-cb1513f6>1.1.认识Vue</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_1-2-vue3带来的变化" class="sidebar-link reco-side-_1-2-vue3带来的变化" data-v-cb1513f6>1.2.Vue3带来的变化</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_1-3-cdn引入" class="sidebar-link reco-side-_1-3-cdn引入" data-v-cb1513f6>1.3.CDN引入</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_1-4-template属性" class="sidebar-link reco-side-_1-4-template属性" data-v-cb1513f6>1.4.template属性</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_1-5-data属性" class="sidebar-link reco-side-_1-5-data属性" data-v-cb1513f6>1.5.data属性</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_1-6-methods属性" class="sidebar-link reco-side-_1-6-methods属性" data-v-cb1513f6>1.6.methods属性</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#二-vu3基础语法" class="sidebar-link reco-side-二-vu3基础语法" data-v-cb1513f6>二：Vu3基础语法</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-1-vscode代码的片段" class="sidebar-link reco-side-_2-1-vscode代码的片段" data-v-cb1513f6>2.1.VsCode代码的片段</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-2-mustache双大括号语法" class="sidebar-link reco-side-_2-2-mustache双大括号语法" data-v-cb1513f6>2.2.Mustache双大括号语法</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-3-v-once指令" class="sidebar-link reco-side-_2-3-v-once指令" data-v-cb1513f6>2.3.v-once指令</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-4-v-pre" class="sidebar-link reco-side-_2-4-v-pre" data-v-cb1513f6>2.4.v-pre</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-5-v-cloak" class="sidebar-link reco-side-_2-5-v-cloak" data-v-cb1513f6>2.5.v-cloak</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-6-v-bind" class="sidebar-link reco-side-_2-6-v-bind" data-v-cb1513f6>2.6.v-bind</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-7-绑定style介绍" class="sidebar-link reco-side-_2-7-绑定style介绍" data-v-cb1513f6>2.7.绑定style介绍</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-8-v-on的用法" class="sidebar-link reco-side-_2-8-v-on的用法" data-v-cb1513f6>2.8.v-on的用法</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-9-条件渲染" class="sidebar-link reco-side-_2-9-条件渲染" data-v-cb1513f6>2.9.条件渲染</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-2-1-列表渲染" class="sidebar-link reco-side-_2-2-1-列表渲染" data-v-cb1513f6>2.2.1.列表渲染</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-2-2-认识vnode" class="sidebar-link reco-side-_2-2-2-认识vnode" data-v-cb1513f6>2.2.2.认识VNode</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_2-2-3-v-for中的key的作用" class="sidebar-link reco-side-_2-2-3-v-for中的key的作用" data-v-cb1513f6>2.2.3.v-for中的key的作用</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#三-options-api" class="sidebar-link reco-side-三-options-api" data-v-cb1513f6>三：Options-API</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_3-1-计算属性computed" class="sidebar-link reco-side-_3-1-计算属性computed" data-v-cb1513f6>3.1.计算属性computed</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_3-2-watch侦听器" class="sidebar-link reco-side-_3-2-watch侦听器" data-v-cb1513f6>3.2.watch侦听器</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_3-3-v-model的基本使用" class="sidebar-link reco-side-_3-3-v-model的基本使用" data-v-cb1513f6>3.3.v-model的基本使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_3-4-组件化开发" class="sidebar-link reco-side-_3-4-组件化开发" data-v-cb1513f6>3.4.组件化开发</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#四-webpack" class="sidebar-link reco-side-四-webpack" data-v-cb1513f6>四：webpack</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-1-认识webpack" class="sidebar-link reco-side-_4-1-认识webpack" data-v-cb1513f6>4.1.认识webpack</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-2-webpack的使用" class="sidebar-link reco-side-_4-2-webpack的使用" data-v-cb1513f6>4.2.webpack的使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-3-webpack的依赖图" class="sidebar-link reco-side-_4-3-webpack的依赖图" data-v-cb1513f6>4.3.webpack的依赖图</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-4-webpack的配置文件" class="sidebar-link reco-side-_4-4-webpack的配置文件" data-v-cb1513f6>4.4.webpack的配置文件</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-5-webpack的loader" class="sidebar-link reco-side-_4-5-webpack的loader" data-v-cb1513f6>4.5.webpack的loader</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-6-认识postcss工具" class="sidebar-link reco-side-_4-6-认识postcss工具" data-v-cb1513f6>4.6.认识PostCSS工具</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-7-webpack-加载图片" class="sidebar-link reco-side-_4-7-webpack-加载图片" data-v-cb1513f6>4.7.webpack 加载图片</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-8-加载字体文件" class="sidebar-link reco-side-_4-8-加载字体文件" data-v-cb1513f6>4.8.加载字体文件</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-9-webpack-的-plugin-插件" class="sidebar-link reco-side-_4-9-webpack-的-plugin-插件" data-v-cb1513f6>4.9.webpack 的 Plugin ( 插件 )</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-10-mode配置" class="sidebar-link reco-side-_4-10-mode配置" data-v-cb1513f6>4.10.Mode配置</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-11-babel" class="sidebar-link reco-side-_4-11-babel" data-v-cb1513f6>4.11.Babel</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-12-vue源码打包" class="sidebar-link reco-side-_4-12-vue源码打包" data-v-cb1513f6>4.12.Vue源码打包</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-13-devserver-和-vuecli" class="sidebar-link reco-side-_4-13-devserver-和-vuecli" data-v-cb1513f6>4.13.devServer 和 VueCli</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-14-hsot、port、open、compress" class="sidebar-link reco-side-_4-14-hsot、port、open、compress" data-v-cb1513f6>4.14. hsot、port、open、compress</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_4-15-proxy" class="sidebar-link reco-side-_4-15-proxy" data-v-cb1513f6>4.15. Proxy</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#五-vuecli和vite" class="sidebar-link reco-side-五-vuecli和vite" data-v-cb1513f6>五：VueCLI和Vite</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_5-1-vuecli-安装-和-使用" class="sidebar-link reco-side-_5-1-vuecli-安装-和-使用" data-v-cb1513f6>5.1.VueCLI 安装 和 使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_5-3-vite的安装和使用" class="sidebar-link reco-side-_5-3-vite的安装和使用" data-v-cb1513f6>5.3.Vite的安装和使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_5-4-vite对css的支持" class="sidebar-link reco-side-_5-4-vite对css的支持" data-v-cb1513f6>5.4.Vite对css的支持</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_5-5-vite对typescript的支持" class="sidebar-link reco-side-_5-5-vite对typescript的支持" data-v-cb1513f6>5.5.Vite对TypeScript的支持</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_5-6-vite对vue的支持" class="sidebar-link reco-side-_5-6-vite对vue的支持" data-v-cb1513f6>5.6.Vite对vue的支持</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_5-7-vite打包项目" class="sidebar-link reco-side-_5-7-vite打包项目" data-v-cb1513f6>5.7.vite打包项目</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_5-8-vite脚手架工具" class="sidebar-link reco-side-_5-8-vite脚手架工具" data-v-cb1513f6>5.8.vite脚手架工具</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#六-vue组件化开发" class="sidebar-link reco-side-六-vue组件化开发" data-v-cb1513f6>六：Vue组件化开发</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_6-1-认识组件的嵌套和通信" class="sidebar-link reco-side-_6-1-认识组件的嵌套和通信" data-v-cb1513f6>6.1.认识组件的嵌套和通信</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_6-2-认识插槽slot" class="sidebar-link reco-side-_6-2-认识插槽slot" data-v-cb1513f6>6.2.认识插槽Slot</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_6-3-动态组件实现" class="sidebar-link reco-side-_6-3-动态组件实现" data-v-cb1513f6>6.3.动态组件实现</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_6-4-组件代码分包" class="sidebar-link reco-side-_6-4-组件代码分包" data-v-cb1513f6>6.4.组件代码分包</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_6-5-vue的dom的获取" class="sidebar-link reco-side-_6-5-vue的dom的获取" data-v-cb1513f6>6.5.Vue的DOM的获取</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_6-6-认识生命周期" class="sidebar-link reco-side-_6-6-认识生命周期" data-v-cb1513f6>6.6.认识生命周期</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_6-7-组件的v-model" class="sidebar-link reco-side-_6-7-组件的v-model" data-v-cb1513f6>6.7.组件的v-model</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_6-8-vue3过渡动画" class="sidebar-link reco-side-_6-8-vue3过渡动画" data-v-cb1513f6>6.8.Vue3过渡动画</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_6-9-mixin的使用" class="sidebar-link reco-side-_6-9-mixin的使用" data-v-cb1513f6>6.9.Mixin的使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_6-10-extends" class="sidebar-link reco-side-_6-10-extends" data-v-cb1513f6>6.10.extends</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#七-composition-api" class="sidebar-link reco-side-七-composition-api" data-v-cb1513f6>七：Composition_API</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_7-1-setup函数" class="sidebar-link reco-side-_7-1-setup函数" data-v-cb1513f6>7.1.setup函数</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_7-2-vuerouter路由使用" class="sidebar-link reco-side-_7-2-vuerouter路由使用" data-v-cb1513f6>7.2.vueRouter路由使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_7-3-vuex的状态管理" class="sidebar-link reco-side-_7-3-vuex的状态管理" data-v-cb1513f6>7.3.Vuex的状态管理</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#八-pinia-状态管理" class="sidebar-link reco-side-八-pinia-状态管理" data-v-cb1513f6>八：pinia_状态管理</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_8-1-pinia-的介绍" class="sidebar-link reco-side-_8-1-pinia-的介绍" data-v-cb1513f6>8.1 pinia 的介绍</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_8-2-如何使用-pinia" class="sidebar-link reco-side-_8-2-如何使用-pinia" data-v-cb1513f6>8.2 如何使用 pinia</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_8-3-认识使用-store" class="sidebar-link reco-side-_8-3-认识使用-store" data-v-cb1513f6>8.3 认识使用 store</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_8-4-认识和定义state" class="sidebar-link reco-side-_8-4-认识和定义state" data-v-cb1513f6>8.4 认识和定义State</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_8-5-认识和定义getters" class="sidebar-link reco-side-_8-5-认识和定义getters" data-v-cb1513f6>8.5 认识和定义Getters</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_8-6-认识和定义-actions" class="sidebar-link reco-side-_8-6-认识和定义-actions" data-v-cb1513f6>8.6 认识和定义 Actions</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#九-vue3-高级语法补充" class="sidebar-link reco-side-九-vue3-高级语法补充" data-v-cb1513f6>九：Vue3_高级语法补充</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_9-1-vue中自定义指令" class="sidebar-link reco-side-_9-1-vue中自定义指令" data-v-cb1513f6>9.1 Vue中自定义指令</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_9-2-vue内置组件teleport" class="sidebar-link reco-side-_9-2-vue内置组件teleport" data-v-cb1513f6>9.2  Vue内置组件Teleport</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_9-3vue中安装插件的方式" class="sidebar-link reco-side-_9-3vue中安装插件的方式" data-v-cb1513f6>9.3Vue中安装插件的方式</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_9-4-vue中渲染函数的使用" class="sidebar-link reco-side-_9-4-vue中渲染函数的使用" data-v-cb1513f6>9.4 Vue中渲染函数的使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/3/note/v3note02.html#_9-5-vue中编写jsx的语法" class="sidebar-link reco-side-_9-5-vue中编写jsx的语法" data-v-cb1513f6>9.5 Vue中编写jsx的语法</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="./assets/js/app.38d69943.js" defer></script><script src="./assets/js/3.f347c82f.js" defer></script><script src="./assets/js/1.d0ce8f0b.js" defer></script><script src="./assets/js/26.79ea497c.js" defer></script>
  </body>
</html>
