<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue2 学习之路 | 前端学习笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="./images/favicon.ico">
    <meta name="description" content="前端学习笔记">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="./assets/css/0.styles.7b00b7c5.css" as="style"><link rel="preload" href="./assets/js/app.7ce36a75.js" as="script"><link rel="preload" href="./assets/js/3.f347c82f.js" as="script"><link rel="preload" href="./assets/js/1.d0ce8f0b.js" as="script"><link rel="preload" href="./assets/js/25.9a446864.js" as="script"><link rel="prefetch" href="./assets/js/10.f00be53f.js"><link rel="prefetch" href="./assets/js/11.aa7936a1.js"><link rel="prefetch" href="./assets/js/12.ffac62be.js"><link rel="prefetch" href="./assets/js/13.6e2906c6.js"><link rel="prefetch" href="./assets/js/14.6dae06b6.js"><link rel="prefetch" href="./assets/js/15.d760b4da.js"><link rel="prefetch" href="./assets/js/16.ba02a69d.js"><link rel="prefetch" href="./assets/js/17.f0d94806.js"><link rel="prefetch" href="./assets/js/18.17f9c9a2.js"><link rel="prefetch" href="./assets/js/19.cfbf337b.js"><link rel="prefetch" href="./assets/js/20.5a65f603.js"><link rel="prefetch" href="./assets/js/21.d530a75c.js"><link rel="prefetch" href="./assets/js/22.a72e6160.js"><link rel="prefetch" href="./assets/js/23.defc9b97.js"><link rel="prefetch" href="./assets/js/24.20c083ab.js"><link rel="prefetch" href="./assets/js/26.948bcfaf.js"><link rel="prefetch" href="./assets/js/27.6d6f57f1.js"><link rel="prefetch" href="./assets/js/28.df170cba.js"><link rel="prefetch" href="./assets/js/29.43ebbe91.js"><link rel="prefetch" href="./assets/js/4.21ef34d6.js"><link rel="prefetch" href="./assets/js/5.cb6e59aa.js"><link rel="prefetch" href="./assets/js/6.5ddc16d2.js"><link rel="prefetch" href="./assets/js/7.70ac515b.js"><link rel="prefetch" href="./assets/js/8.37e304ac.js"><link rel="prefetch" href="./assets/js/9.a482070f.js">
    <link rel="stylesheet" href="./assets/css/0.styles.7b00b7c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>前端学习笔记</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>前端学习笔记</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><img src="./images/avatar.jpg" alt="前端学习笔记" class="logo"> <span class="site-name">前端学习笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/./" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/CS/" class="nav-link"><i class="iconfont reco-tag"></i>
  CS
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./tag/JS/" class="nav-link"><i class="iconfont reco-tag"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/JQ/" class="nav-link"><i class="iconfont reco-tag"></i>
  JQ
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/VUE/2/" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="iconfont reco-tag"></i>
  VUE2
</a></li><li class="dropdown-subitem"><a href="/./tag/vue3/" class="nav-link"><i class="iconfont reco-tag"></i>
  VUE3
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/Git/" class="nav-link"><i class="iconfont reco-tag"></i>
  Git
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/ElementUI/" class="nav-link"><i class="iconfont reco-tag"></i>
  ElementUI
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Vant/" class="nav-link"><i class="iconfont reco-tag"></i>
  Vant
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Bootstrap/" class="nav-link"><i class="iconfont reco-tag"></i>
  Bootstrap
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      后端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/" class="nav-link"><i class="iconfont reco-tag"></i>
  Node
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/koa/" class="nav-link"><i class="iconfont reco-tag"></i>
  Koa
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/express/" class="nav-link"><i class="iconfont reco-tag"></i>
  EXpress
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/database/mysql/" class="nav-link"><i class="iconfont reco-tag"></i>
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/./timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>16</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>10</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/./" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/CS/" class="nav-link"><i class="iconfont reco-tag"></i>
  CS
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./tag/JS/" class="nav-link"><i class="iconfont reco-tag"></i>
  JS
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/JQ/" class="nav-link"><i class="iconfont reco-tag"></i>
  JQ
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/VUE/2/" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="iconfont reco-tag"></i>
  VUE2
</a></li><li class="dropdown-subitem"><a href="/./tag/vue3/" class="nav-link"><i class="iconfont reco-tag"></i>
  VUE3
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/Git/" class="nav-link"><i class="iconfont reco-tag"></i>
  Git
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/ElementUI/" class="nav-link"><i class="iconfont reco-tag"></i>
  ElementUI
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Vant/" class="nav-link"><i class="iconfont reco-tag"></i>
  Vant
</a></li><li class="dropdown-subitem"><a href="/./blogs/foreEnd/UI/Bootstrap/" class="nav-link"><i class="iconfont reco-tag"></i>
  Bootstrap
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      后端笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/" class="nav-link"><i class="iconfont reco-tag"></i>
  Node
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/koa/" class="nav-link"><i class="iconfont reco-tag"></i>
  Koa
</a></li><li class="dropdown-subitem"><a href="/./blogs/backEnd/node/express/" class="nav-link"><i class="iconfont reco-tag"></i>
  EXpress
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./blogs/backEnd/database/mysql/" class="nav-link"><i class="iconfont reco-tag"></i>
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/./timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>vue2 学习之路</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">vue2 学习之路</h1> <div data-v-f875f3fc><!----> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>3/17/2021</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>vue2</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="vue2"><a href="#vue2" class="header-anchor">#</a> Vue2</h1> <h2 id="_1-vue简介"><a href="#_1-vue简介" class="header-anchor">#</a> 1. vue简介</h2> <p>是一套用于<font color="orange">构建用户界面</font>的前端<font color="orange">框架</font>。</p> <p>vue框架的特性，主要体现 <font color="orange">数据驱动试图</font>，<font color="orange">双向数据绑定</font></p> <h3 id="_1-1-数据驱动视图"><a href="#_1-1-数据驱动视图" class="header-anchor">#</a> 1.1 ：数据驱动视图</h3> <p>在使用了Vue的页面中，vue会<font color="orange">监听数据的变化</font>，从而<font color="orange">自动</font>重新渲染页面的结构</p> <p><img src="/images/vue2/%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8%E8%A7%86%E5%9B%BE.png" alt="数据驱动视图"></p> <ul><li>好处：当页面数据发生变化时，页面会自动重新渲染</li> <li>注意：数组驱动视图是<font color="orange">单向的数据绑定</font></li></ul> <h3 id="_1-2-双向数据绑定"><a href="#_1-2-双向数据绑定" class="header-anchor">#</a> 1.2：双向数据绑定</h3> <p>在填写表单中，双向数据绑定可以辅助开发者在<font color="orange">不操作DOM的前提下</font>，自动把用户填写的内容<font color="orange">同步到</font>数据源中</p> <p><img src="/images/vue2/%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A.png" alt="双向数据绑定"></p> <ul><li>好处：开发不再需要手动操作DOM元素，来获取表单元素最新的值</li></ul> <h3 id="_1-3-mvvm"><a href="#_1-3-mvvm" class="header-anchor">#</a> 1.3 ：MVVM</h3> <p><font color="orange">MVVM</font>是vue实现<font color="orange">数据驱动试图</font>，和<font color="orange">双向数据绑定</font>的核心原理。MVVM指的是Model 、View 和 ViewModel，它把每个HTML都拆分成了这三个部分，</p> <p><img src="/images/vue2/MVVM%E7%A4%BA%E4%BE%8B%E5%9B%BE.jpg" alt="MVVM示例图"></p> <ul><li><font color="orange">Model</font> 表示当前页面渲染时所依赖的数据源</li> <li><font color="orange">view</font> 表示当前页面所渲染的DOM结构</li> <li><font color="orange">VIewModel</font> 表示vue的实例，它是MVVM的核心</li></ul> <h3 id="_1-4-mvvm的工作原理"><a href="#_1-4-mvvm的工作原理" class="header-anchor">#</a> 1.4 ：MVVM的工作原理</h3> <p><font color="orange">ViewModel作为MVVM的核心</font>，是它把当前的<font color="orange">数据源</font>（Model）和<font color="orange">页面的结构</font>（view）连接在了一起</p> <p><img src="/images/vue2/MVVM%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.jpg" alt="MVVM的工作原理"></p> <p>当<font color="orange">数据源发生变化</font>时，会被 ViewModel 监听到，VM 会根据最新的数据源<font color="orange">自动更新页面</font>的结构</p> <p>当<font color="orange">表单元素的值发生变化</font>时，也会被 ViewModel  监听到，VM 会把变化过后最新的值<font color="orange">自动同步到 Model 数据源</font>中</p> <h2 id="_2-vue的基本使用"><a href="#_2-vue的基本使用" class="header-anchor">#</a> 2.Vue的基本使用</h2> <h3 id="_2-1-基本使用步骤"><a href="#_2-1-基本使用步骤" class="header-anchor">#</a> 2.1 ：基本使用步骤</h3> <ul><li>导入Vue.js的script脚本文件</li> <li>在页面中声明一个将要被Vue所控制的DOM区域</li> <li>创建VM实例对象（vue实例对象）</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./js/vue.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
	const vm = new Vue({
    	el:&quot;#app&quot;,
    	data:{}
    })
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>基本代码与MVVM的对应关系</strong></p> <p><img src="/images/vue2/%E5%9F%BA%E6%9C%AC%E4%BB%A3%E7%A0%81%E5%92%8CMVVM%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB.jpg" alt="基本代码和MVVM对应关系"></p> <h2 id="_3-vue的指令与过滤器"><a href="#_3-vue的指令与过滤器" class="header-anchor">#</a> 3. vue的指令与过滤器</h2> <p><strong>指令</strong>是vue为开发者提供的<strong>模版语言</strong>，用于<strong>辅助开发者渲染页面的基本结构</strong>。</p> <p>vue中的指令<strong>按照不同的用途</strong>可以分为如下6大类</p> <ol><li><font color="orange">内容渲染指令</font></li> <li><font color="orange">属性绑定指令</font></li> <li><font color="orange">事件绑定指令</font></li> <li><font color="orange">双向绑定指令</font></li> <li><font color="orange">条件渲染指令</font></li> <li><font color="orange">列表渲染指令</font></li></ol> <h3 id="_3-1-内容渲染指令"><a href="#_3-1-内容渲染指令" class="header-anchor">#</a> 3.1 ：内容渲染指令</h3> <p><strong>内容渲染指令</strong>用来辅助开发者<strong>渲染 DOM 元素的文本内容</strong>。常用的内容渲染指令有如下 3 个：</p> <ul><li>v-text</li> <li>{{}}</li> <li>v-html</li></ul> <h4 id="_3-1-1-v-text"><a href="#_3-1-1-v-text" class="header-anchor">#</a> 3.1.1 ：v-text</h4> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>性别<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：v-text指令会<strong>覆盖元素内默认的值</strong></p> <h4 id="_3-1-2"><a href="#_3-1-2" class="header-anchor">#</a> 3.1.2 ：{{}}</h4> <p>vue 提供的  语法，<strong>专门用来解决 v-text 会覆盖默认文本内容的问题</strong>。这种  语法的专业名称是<strong>插值表达式</strong>（英文名为：Mustache）。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>性别：{{gender}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：相对于v-text指令来说，<strong>插值表达式在开发中更常用一些</strong>因为它不会覆盖元素中默认的文本内容。</p> <h4 id="_3-1-3-v-html"><a href="#_3-1-3-v-html" class="header-anchor">#</a> <strong>3.1.3 ：v-html</strong></h4> <p><strong>v-text</strong> 指令和插值表达式<strong>只能渲染纯文本内容</strong>。如果要把<strong>包含 HTML 标签的字符串渲染为页面的 HTML 元素</strong>， 则需要<strong>用到 v-html</strong> 这个指令：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>discription<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-2-属性绑定指令"><a href="#_3-2-属性绑定指令" class="header-anchor">#</a> 3.2 ：属性绑定指令</h3> <h4 id="_3-2-1-v-bind"><a href="#_3-2-1-v-bind" class="header-anchor">#</a> 3.2.1 ：v-bind</h4> <p>如果需要为<strong>元素的属性动态绑定属性值</strong>，则需要用到<strong>v-bind</strong>属性绑定指令</p> <p>由于 <strong>v-bind 指令</strong>在开发中使用频率非常高，因此，vue 官方为其提供了<strong>简写形式</strong>（简写为英文的 : ）</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputvalue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>imgSrc<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>list-<span class="token punctuation">'</span>+id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-3-事件绑定指令"><a href="#_3-3-事件绑定指令" class="header-anchor">#</a> 3.3 ：事件绑定指令</h3> <p>vue提供了<strong>v-on事件绑定</strong>指令，用来辅助程序员为 DOM 元素绑定事件监听。语法格式如下：</p> <p>注意：原生 DOM 对象有 <strong>onclick、oninput、onkeyup</strong> 等原生事件，</p> <p>替换为 vue 的事件绑定形式后， 分别为：<strong>v-on:click、v-on:input、v-on:keyup</strong></p> <h4 id="_3-3-1-v-on"><a href="#_3-3-1-v-on" class="header-anchor">#</a> 3.3.1 ：v-on</h4> <p>通过v-on绑定的事件处理函数，需要在<strong>methods</strong>节点中进行声明：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;javascript:;&quot;</span> v<span class="token operator">-</span>onclick<span class="token operator">=</span><span class="token string">&quot;addCount&quot;</span><span class="token operator">&gt;</span>加<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
cosnt vm <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
        	<span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">+=</span><span class="token number">1</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>由于 <strong>v-on</strong> 指令在开发中使用频率非常高，因此，vue 官方为其提供了简写形式（简写为英文的 <strong>@</strong> ）</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addCount<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_3-3-2-event"><a href="#_3-3-2-event" class="header-anchor">#</a> 3.3.2 ：$event</h4> <p>在处理函数中所绑定的事件<strong>没有传递参数</strong>处理函数中，同样可以接收到事件<strong>参数对象 event</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>addCount</span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
methods:{
	addCount(e){
		e.target.style.background=&quot;red&quot;
	}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果在处理函数中绑定的是中<strong>有传递函数</strong>中，用来表示<strong>原生的事件参数对象 event****。</strong>$event 可以解决事件参数对象 event  被覆盖的问题****</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>addCount(2,$event)</span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
methods:{
	addCount(n,e){
		e.target.style.background=&quot;red&quot;
	}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_3-3-3-事件修饰符"><a href="#_3-3-3-事件修饰符" class="header-anchor">#</a> 3.3.3 ：事件修饰符</h4> <p>在事件处理函数中调用 <strong>event.preventDefault()</strong> 或 <strong>event.stopPropagation()</strong> 是非常常见的需求。</p> <p>因此， vue 提供了事件修饰符的概念，来辅助程序员更方便的对事件的触发进行控制。常用的 <strong>5 个事件修饰符</strong>如下：</p> <p><img src="/images/vue2/%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6.jpg" alt="事件修饰符"></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_3-3-4-键盘修饰符"><a href="#_3-3-4-键盘修饰符" class="header-anchor">#</a> 3.3.4 ：键盘修饰符</h4> <p>在监听<strong>键盘事件</strong>时，我们经常需要<strong>判断详细的按键</strong>。此时，可以为<strong>键盘相关的事件添加按键修饰符</strong>，例如</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@keyup.esc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clearInput<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>  <span class="token attr-name">@key.enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-4-双向绑定指定"><a href="#_3-4-双向绑定指定" class="header-anchor">#</a> 3.4 ：双向绑定指定</h3> <h4 id="_3-4-1-v-model指令的修饰符"><a href="#_3-4-1-v-model指令的修饰符" class="header-anchor">#</a> 3.4.1 ：v-model指令的修饰符</h4> <p>vue 提供了 <strong>v-model 双向数据绑定指令</strong>，用来辅助开发者在<strong>不操作 DOM</strong> 的前提下，快速<strong>获取表单的数据</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_3-4-2-v-model指令的修饰符"><a href="#_3-4-2-v-model指令的修饰符" class="header-anchor">#</a> 3.4.2 ：v-model指令的修饰符</h4> <p><strong>为了方便对用户输入的内容进行处理</strong>，vue 为 v-model 指令提供了 3 个修饰符，分别是：</p> <p><img src="/images/vue2/v-model%E4%BF%AE%E9%A5%B0%E7%AC%A6.jpg" alt="v-model修饰符"></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-module.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-5-条件渲染指令"><a href="#_3-5-条件渲染指令" class="header-anchor">#</a> 3.5 ：条件渲染指令</h3> <h4 id="_3-5-1-v-if-和-v-show"><a href="#_3-5-1-v-if-和-v-show" class="header-anchor">#</a> 3.5.1 ：v-if 和 v-show</h4> <p><strong>条件渲染指令</strong>用来辅助开发者按需控制 <strong>DOM 的显示与隐藏</strong>。条件渲染指令有如下两个，分别是：</p> <ul><li>v-if</li> <li>v-show</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>networkState===200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>networkState===200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_3-5-2-v-if和v-show区别"><a href="#_3-5-2-v-if和v-show区别" class="header-anchor">#</a> 3.5.2 ：v-if和v-show区别</h4> <p><strong>实现原理不同：</strong></p> <p>⚫ v-if 指令会<strong>动态地创建或移除 DOM 元素</strong>；</p> <p>⚫ v-show 指令会动态为元素添加或<strong>移除 style=&quot;display: none;&quot; 样式</strong>，从而控制元素的显示与隐藏；</p> <p><strong>性能消耗不同：</strong></p> <p><strong>v-if</strong> 有更高的<strong>切换开销</strong>，而 v-show 有更高的<strong>初始渲染开销</strong>。因此：</p> <p>⚫ <strong>如果需要非常频繁地切换，则使用 v-show 较好</strong></p> <p>⚫ <strong>如果在运行时条件很少改变，则使用 v-if 较好</strong></p> <h4 id="_3-5-3-v-if-else-和-v-else"><a href="#_3-5-3-v-if-else-和-v-else" class="header-anchor">#</a> 3.5.3 ：v-if-else 和 v-else</h4> <p>v-else-if 指令，顾名思义，充当 v-if 的“else-if 块”，可以连续使用：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type===<span class="token punctuation">'</span>A<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>优秀<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type===<span class="token punctuation">'</span>B<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>良好<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type===<span class="token punctuation">'</span>C<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>一般<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>差<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>注意：v-else-if 指令<strong>必须配合</strong> v-if 指令一起使用，否则它将不会被识别！</p> <p>注意：v-else 指令<strong>必须配合</strong> v-if 指令一起使用，否则它将不会被识别</p> <h3 id="_3-6-列表渲染指令"><a href="#_3-6-列表渲染指令" class="header-anchor">#</a> 3.6 ：列表渲染指令</h3> <h4 id="_3-6-1-v-for"><a href="#_3-6-1-v-for" class="header-anchor">#</a> 3.6.1 ：v-for</h4> <p>vue 提供了 <strong>v-for</strong> 列表渲染指令，<strong>用来辅助开发者基于一个数组来循环渲染一个列表结构</strong>。v-for 指令需要使 用 <strong>item in items</strong> 形式的特殊语法，其中：</p> <p>⚫ list是待循环的数组</p> <p>⚫ item 是被循环的每一项</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>姓名是：{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

data:{
	list:[
		{id:1,name:'zs'},
		{id:2,name:'ls'}
	]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_3-6-2-v-for中的索引"><a href="#_3-6-2-v-for中的索引" class="header-anchor">#</a> 3.6.2 ：v-for中的索引</h4> <p>v-for 指令还支持一个<strong>可选</strong>的第二个参数，即<strong>当前项的索引</strong>。语法格式为 <strong>(item, index) in items</strong>，示例代码如下：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item,index) in list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>姓名是：{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

data:{
	list:[
		{id:1,name:'zs'},
		{id:2,name:'ls'}
	]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_3-6-3-使用key维护列表的状态"><a href="#_3-6-3-使用key维护列表的状态" class="header-anchor">#</a> 3.6.3 ：使用key维护列表的状态</h4> <p>当列表的数据变化时，默认情况下，vue 会尽可能的复用已存在的 DOM 元素，从而<strong>提升渲染的性能</strong>。</p> <p>但这种 默认的性能优化策略，会导致有状态的列表无法被正确更新。 为了给 vue 一个提示，以便它能跟踪每个节点的身份，从而在<strong>保证有状态的列表被正确更新</strong>的前提下，<strong>提升渲染的性能</strong>。此时，需要为<strong>每项提供一个唯一的 key 属性</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item,index) in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>姓名是：{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_3-6-4-key的注意事项"><a href="#_3-6-4-key的注意事项" class="header-anchor">#</a> <strong>3.6.4 ：key的注意事项</strong></h4> <ol><li>key 的值只能是<strong>字符串</strong>或<strong>数字</strong>类型</li> <li>key 的值必须<strong>具有唯一性</strong>（即：<strong>key 的值不能重复</strong>）</li> <li>建议把<strong>数据项 id 属性的值</strong>作为 key 的值（<strong>因为 id 属性的值具有唯一性</strong>）</li> <li>使用 <strong>index 的值当作 key 的值没有任何意义</strong>（因为 index 的值<strong>不具有唯一性</strong>）</li> <li>建议使用 v-for 指令时<strong>一定要指定 key 的值</strong>（<strong>既提升性能、又防止列表状态紊乱</strong>）</li></ol> <h3 id="_3-7-过滤器"><a href="#_3-7-过滤器" class="header-anchor">#</a> 3.7 ：过滤器</h3> <p>过滤器是vue为开发者提供的功能，常用于<strong>文本的格式化</strong>。过滤器可以用在两个地方：<strong><font color="red">插值表达式</font>和<font color="red">v-bind属性绑定</font></strong>。</p> <p>过滤器应该被添加到javascript表达式的<font color="red">尾部</font>，由“<font color="red">管道符</font>”进行调用，</p> <h4 id="_3-7-1-定义过滤器"><a href="#_3-7-1-定义过滤器" class="header-anchor">#</a> 3.7.1：定义过滤器</h4> <p>在创建vue实例期间，可以在<font color="orange">filters</font>中定义过滤器</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{message | messageFilters}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  // Hello vue.js
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./lib/vue-2.6.12.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
        const app = new Vue({
            el:&quot;#app&quot;,
            data:{
                message:&quot;hello vue.js&quot;
            },
            filters:{
                messageFilters(str){
                    return str.charAt(0).toLocaleUpperCase()+str.slice(1);
                }
            }   
        })
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_3-7-2-私有过滤器和全局过滤器"><a href="#_3-7-2-私有过滤器和全局过滤器" class="header-anchor">#</a> 3.7.2 ：私有过滤器和全局过滤器</h4> <p>在filters节点下定义的过滤器，称为&quot;<font color="red">私有过滤器</font>&quot;，因为它<font color="red">只能在当前实例所控制的el区域内使用</font>。<font color="orange">如果希望在多个vue实例之间共享过滤器</font>，则可以按照如下代码<font color="orange">定义全局过滤器</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>message <span class="token operator">|</span> messageFilters<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token comment">// Hello vue.js</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app2&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>message <span class="token operator">|</span> messageFilters<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token comment">//Hello vue.js</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./lib/vue-2.6.12.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">&quot;messageFilters&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
              <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;hello vue.js&quot;</span><span class="token punctuation">}</span>          
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> app2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&quot;#app2&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;hello vue.js&quot;</span><span class="token punctuation">}</span>           
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="_3-7-3-连续调用多个过滤器"><a href="#_3-7-3-连续调用多个过滤器" class="header-anchor">#</a> 3.7.3 ：连续调用多个过滤器</h4> <p>过滤器可以<font color="orange">串联地</font>进行调用</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>{{message | filter | filerB}}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_3-7-4-过滤器传参"><a href="#_3-7-4-过滤器传参" class="header-anchor">#</a> 3.7.4：过滤器传参</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>message <span class="token operator">|</span> <span class="token function">messageFilters</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
 Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">&quot;messageFilters&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span>sex</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_3-7-5-过滤器的兼容性"><a href="#_3-7-5-过滤器的兼容性" class="header-anchor">#</a> 3.7.5：过滤器的兼容性</h4> <p>过滤器仅在vue2.x 和 1.x 中受支持，在Vue3.x的版本中移除了过滤器相关的功能了。</p> <p>在企业项目开发中</p> <ul><li>如果使用的是2.x版本的vue，则依然可以使用过滤器相关功能</li> <li>如果项目已经升到3.x的版本的vue，官方<font color="orange">建议使用计算属性或方法代替被移除的过滤器功能</font></li></ul> <h2 id="_4-侦听器和计算属性"><a href="#_4-侦听器和计算属性" class="header-anchor">#</a> 4.  侦听器和计算属性</h2> <h3 id="_4-1-侦听器"><a href="#_4-1-侦听器" class="header-anchor">#</a> 4.1 ：侦听器</h3> <p><font color="orange">watch侦听器</font>允许开发者监视的变化，从而<font color="orange">针对数据的变化做特定的操作</font>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;userName&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./lib/vue-2.6.12.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./lib/jquery.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token function">userName</span><span class="token punctuation">(</span><span class="token parameter">newVue<span class="token punctuation">,</span>oldVue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>newVue<span class="token operator">==</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span><span class="token punctuation">}</span>
                    $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://www.escook.cn/api/finduser/'</span><span class="token operator">+</span>newVue<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
	 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_4-1-1-immediate选项"><a href="#_4-1-1-immediate选项" class="header-anchor">#</a> 4.1.1：immediate选项</h4> <p>默认情况下，组件在初次加载<font color="red">完毕后不会调用</font>watch侦听器。如果想让watch侦听器<font color="red">立即被调用</font>，则需要<font color="red">使用immediate选项</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>   <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;userName&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./lib/vue-2.6.12.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./lib/jquery.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token function-variable function">handler</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">newVue<span class="token punctuation">,</span>oldVue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                        $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://www.escook.cn/api/finduser/'</span><span class="token operator">+</span>newVue<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="_4-1-2-监听对象单个属性"><a href="#_4-1-2-监听对象单个属性" class="header-anchor">#</a> 4.1.2 ：监听对象单个属性</h4> <h5 id="_4-1-2-1-deep"><a href="#_4-1-2-1-deep" class="header-anchor">#</a> 4.1.2.1：deep</h5> <p>如果<font color="orange">watch侦听的是一个对象</font>，如果<font color="orange">对象中的属性值发生了变化</font>，则无法监听到，此时需要使用使用deep选项</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;user.userName&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./lib/vue-2.6.12.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./lib/jquery.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">user</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">user</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token function-variable function">handler</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">newVue<span class="token punctuation">,</span>oldVue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                        $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://www.escook.cn/api/finduser/'</span><span class="token operator">+</span>newVue<span class="token punctuation">.</span>userName<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h5 id="_4-1-2-2-添加字符串"><a href="#_4-1-2-2-添加字符串" class="header-anchor">#</a> 4.1.2.2 ：添加字符串</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;user.userName&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./lib/vue-2.6.12.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./lib/jquery.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">user</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token string-property property">'user.userName'</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token function-variable function">handler</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">newVue<span class="token punctuation">,</span>oldVue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                        $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://www.escook.cn/api/finduser/'</span><span class="token operator">+</span>newVue<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_4-2-计算属性"><a href="#_4-2-计算属性" class="header-anchor">#</a> 4.2 ：计算属性</h3> <p>计算属性指的是<font color="orange">通过一系列运算</font>之后最终得到一个<font color="orange">属性值</font>。计算属性会得到一个计算结果，因此<font color="orange">计算属性必须有return返回值</font></p> <p>这个<font color="orange">动态计算出来的属性值</font>可以被模版结构或methods方法使用，</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;r&quot;</span><span class="token operator">&gt;</span><span class="token constant">R</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;r&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>number<span class="token operator">=</span><span class="token string">&quot;r&quot;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;g&quot;</span><span class="token operator">&gt;</span><span class="token constant">G</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;g&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>number<span class="token operator">=</span><span class="token string">&quot;g&quot;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span>b<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;b&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>number<span class="token operator">=</span><span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;rgb&quot;</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;`background:rgb(${r},${g},${b})`&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>rgb<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./lib/vue-2.6.12.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">r</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token literal-property property">g</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token function">btn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rgb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rgb(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>g<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="_4-2-1-计算属性的特点"><a href="#_4-2-1-计算属性的特点" class="header-anchor">#</a> 4.2.1：计算属性的特点</h4> <ol><li>虽然计算属性在<font color="red">声明的时候</font>被定义为<font color="red">方法</font>，但是计算属性的<font color="orange">本质是一个属性</font></li> <li>计算属性会<font color="orange">缓存计算的结果</font>，只有计算属性<font color="orange">依赖的数据变化时</font>，才会重新进行运算</li></ol> <p><strong>计算属性VS侦听器有啥区别</strong></p> <ul><li>计算属性和侦听器<strong>侧重的应用场景不同</strong>：</li> <li>计算属性侧重于监听<strong>多个值</strong>的变化，最终<strong>计算并返回一个新值</strong></li> <li>侦听器侧重于监听<strong>单个数据</strong>的变化，最终<strong>执行特定的业务处理</strong>，<strong>不需要有任何返回值</strong></li></ul> <h2 id="_5-axios请求"><a href="#_5-axios请求" class="header-anchor">#</a> 5：axios请求</h2> <p>axios 是一个专注于网络请求的库，axios方法得到的<font color="orange">返回值时Pomise对象</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token string">'请求的类型'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">'请求的URL地址'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">'get的传递的参数'</span><span class="token punctuation">}</span>
 	<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">'post的传递的参数'</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// .then用来指定请求成功之后的回调函数</span>
    <span class="token comment">// 形参中的result是请求成功之后的结果</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_5-1-async-和-await"><a href="#_5-1-async-和-await" class="header-anchor">#</a> 5.1 ：async 和 await</h3> <ul><li>如果调用某个方法的<font color="orange">返回值是Promise</font>实例，则前面可以<font color="orange">添加 await</font></li> <li>await<font color="orange">只能用</font>在被<font color="orange">async “修饰”的方法中</font></li></ul> <h3 id="_5-2-get请求"><a href="#_5-2-get请求" class="header-anchor">#</a> 5.2：get请求</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btnGet&quot;</span><span class="token operator">&gt;</span>发送<span class="token keyword">get</span>请求<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./lib/axios.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token keyword">let</span> btnGet <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btnGet'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btnGet<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">// 解构赋值的时候，如果使用 : 则进行了重命名</span>
         <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">data</span> <span class="token operator">:</span> str<span class="token punctuation">}</span><span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token string">'get'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>     btnGet<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          <span class="token keyword">const</span><span class="token punctuation">{</span><span class="token literal-property property">data</span> <span class="token operator">:</span> res<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.liulongbin.top:3006/api/getbooks&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                <span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-3-post请求"><a href="#_5-3-post请求" class="header-anchor">#</a> 5.3 ：post请求</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code> btnPost<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
     		<span class="token comment">// 解构赋值的时候，使用 : 则进行了重命名</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">data</span> <span class="token operator">:</span> str<span class="token punctuation">}</span><span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">'post'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&quot;http://www.liulongbin.top:3006/api/post&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">12</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code> btnPost<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">data</span> <span class="token operator">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'http://www.liulongbin.top:3006/api/post'</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zhangsna'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">21</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_5-4-vue全局配置axios"><a href="#_5-4-vue全局配置axios" class="header-anchor">#</a> 5.4：vue全局配置axios</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// mian.js中配置全局axios</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL<span class="token operator">=</span><span class="token string">'http://www.liulongbin.top:3006'</span>  <span class="token comment">// 明确的接口，可以统一进行设置</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>axios<span class="token operator">=</span>axios <span class="token comment">// vue 的原型对象中axios</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-5-axios拦截器"><a href="#_5-5-axios拦截器" class="header-anchor">#</a> 5.5：axios拦截器</h3> <p><font color="orange">拦截器</font> 会在 <font color="orange">每次发起ajax请求</font> 和 <font color="orange">得到响应</font>**的时候自动被触发。</p> <p><img src="/images/vue2/axios%E6%8B%A6%E6%88%AA%E5%99%A8.jpg" alt="axios拦截器"></p> <p>应用场景：</p> <ol><li>Token身份认证</li> <li>Loading效果</li> <li>etc....</li></ol> <h4 id="_5-5-1-配置请求拦截器"><a href="#_5-5-1-配置请求拦截器" class="header-anchor">#</a> 5.5.1：配置请求拦截器</h4> <p>通过<font color="orange"><strong>axios.interceptors.request.use</strong></font> (<strong>成功回调，失败的回调</strong>) 可以配置请求拦截器。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> loadingInstande<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    loadingInstande <span class="token operator">=</span> element<span class="token punctuation">.</span>loading<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">fullscreen</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 实现加载那种图标的效果</span>
    config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token string">'Bearer xxx'</span>  <span class="token comment">// 设置Token</span>
    <span class="token keyword">return</span> consig <span class="token comment">// 一定要 retun 出去</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><font color="red">注意：</font>失败的回调函数可以被省略！</p> <h4 id="_5-5-2-配置响应拦截器"><a href="#_5-5-2-配置响应拦截器" class="header-anchor">#</a> 5.5.2：配置响应拦截器</h4> <p>通过 <font color="orange">axios.interceptors.response</font> (<strong>成功的回调，失败的回调</strong>) 可以配置响应拦截器。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    loadingInstande<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 关闭加载那种图标的效果</span>
    <span class="token keyword">return</span> res <span class="token comment">// 一定要retun 出去</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><font color="red">注意：</font>失败的回调函数可以被省略！</p> <h3 id="_5-6-proxy-跨域问题"><a href="#_5-6-proxy-跨域问题" class="header-anchor">#</a> 5.6：proxy 跨域问题</h3> <p><strong>接口的跨域问题</strong></p> <ul><li>vue项目运行的地址：http : // localhost:8080/</li> <li>API接口运行的地址：https:// www.escook.cn/api.users</li></ul> <p><strong>由于当前API接口没有开启CORS跨域资源共享，因此默认情况下，上面接口无法请求成功</strong></p> <h4 id="_5-6-1-proxy-跨域代理"><a href="#_5-6-1-proxy-跨域代理" class="header-anchor">#</a> 5.6.1：proxy 跨域代理</h4> <p><font color="orange">通过<strong>代理</strong>解决接口的跨域问题</font></p> <p>通过vue-cli创建的项目在遇到接口的跨域问题时，可以通过<strong>代理</strong>的方式来解决</p> <p><img src="/images/vue2/proxy%E8%B7%A8%E5%9F%9F%E4%BB%A3%E7%90%86.jpg" alt="proxy跨域代理"></p> <ul><li>把axios的<font color="orange">请求根路径</font>设置为<font color="orange">vue项目的运行地址</font>（<strong>接口请求不再跨域</strong>）</li> <li>vue项目发现请求的接口不存在，把请求<font color="orange">转交给proxy代理</font></li> <li>代理把请求根路径<font color="orange">替换为</font>devServer.proxy属性的值，<font color="orange">发起真正的数据的请求</font></li> <li>代理把请求到的数据，<font color="orange">转发给axios</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在main.js 入口文件中，把axios的请求根路径改造为当前web项目的根路径</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'http://locahost:8080'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//在项目根目录下创建vue.config.js的配置文件，并声明如下的配置：</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token punctuation">{</span>  <span class="token string-property property">'/api'</span><span class="token operator">:</span><span class="token punctuation">{</span>  <span class="token literal-property property">target</span><span class="token operator">:</span><span class="token string">&quot;https://www.escook.cn&quot;</span>  <span class="token punctuation">}</span>   <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><font color="red"><strong>注意：</strong></font></p> <ul><li><strong>devServer.proxy</strong>提供的代理功能，<strong>仅在开发调试阶段生效</strong></li> <li>项目<strong>上线发布时</strong>，依旧需要API接口<strong>服务器开启CORS跨域资源共享</strong></li></ul> <hr> <h3 id="_5-7-请求跨域"><a href="#_5-7-请求跨域" class="header-anchor">#</a> 5.7：请求跨域</h3> <p>就是两个页面具有相同的</p> <ul><li><font color="red">协议（protocol）</font></li> <li><font color="red">主机 （host）</font></li> <li><font color="red">端口号（port）</font></li></ul> <p>请<font color="cornflowerblue">求一个接口时，出现 <strong>Access-Control-Allow-Origin</strong> 等  就说明请求跨域了</font></p> <p>原理：</p> <ol><li><font color="red">将域名发送给本地的服务器(loclahost:8080)</font></li> <li><font color="red">再由本地的服务器去请求真正的服务器</font></li> <li><font color="red">因为请求是从本地服务器发出，所以就是不存在跨域的问题</font></li></ol> <p>注意：修改vue.config.js文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">devserver</span><span class="token operator">:</span><span class="token punctuation">{</span>  <span class="token comment">// 跨域</span>
        <span class="token string-property property">'/cityApi'</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">target</span><span class="token operator">:</span><span class="token string">'http://api.juhe.cn'</span><span class="token punctuation">,</span> <span class="token comment">// 目标路径</span>
            <span class="token literal-property property">changOrigin</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许跨域</span>
            <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//重写路径</span>
                <span class="token string-property property">'/^cityApi'</span><span class="token operator">:</span><span class="token string">''</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>注意：在请求的url链接的时候显示</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">cityUrl</span><span class="token operator">:</span> <span class="token string">'/cityApi/springTravel/citys?key=6abf107dc48af5c2745ae63e8c125342'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><hr> <h2 id="_6-vue-cli和vue组件"><a href="#_6-vue-cli和vue组件" class="header-anchor">#</a> 6.  vue-cli和vue组件</h2> <h3 id="_6-1-vue-cli"><a href="#_6-1-vue-cli" class="header-anchor">#</a> 6.1 ：vue-cli</h3> <p><strong>什么是单页面应用程序</strong></p> <p>单页面应用程序（英文名：Single Page Application）简称SPA，顾名思义，指的是<font color="orange">一个web网站中只有唯一的一个HTML页面</font>，所有功能与焦糊都在这<font color="orange">唯一的一个页面内完成</font>。</p> <p><strong>什么是vue-cli</strong></p> <p><font color="orange">vue-cli是Vue.js开发的标准工具</font>。它简化了程序员基于webpack创建工程化的Vue项目过程</p> <h4 id="_6-1-1-安装和使用"><a href="#_6-1-1-安装和使用" class="header-anchor">#</a> 6.1.1 ：安装和使用</h4> <p>vue-cli是npm 上的一个全局包，使用npm install 命令 即可方便的安装到电脑上。</p> <p><font color="orange">npm install -g @vue/cli</font></p> <p>基于vue-cli快速生成工程化的Vue项目</p> <p><font color="orange">vue create 项目名称</font></p> <h4 id="_6-1-2-vue项目的运行流程"><a href="#_6-1-2-vue项目的运行流程" class="header-anchor">#</a> 6.1.2 ：vue项目的运行流程</h4> <p>在工程化的项目中，vue要做的事情很单纯：通过<font color="orange">main.js</font>把<font color="orange">App.vue</font>渲染到<font color="orange">index.html</font>的指定区域中</p> <p>其中：</p> <ol><li><font color="orange">App.vue</font>用来编写<font color="orange">待渲染的模版结构</font></li> <li><font color="orange">index.html</font>中需要预留<font color="orange">一个el区域</font></li> <li><font color="orange">main.js把App.vue</font>渲染到了<font color="orange">index.html所预留的区域中</font></li></ol> <h3 id="_6-2-vue组件"><a href="#_6-2-vue组件" class="header-anchor">#</a> 6.2 ：vue组件</h3> <p><strong>什么是组件化开发</strong></p> <p>组件化开发的指的是：根据<font color="orange">封装</font>的思想，把<font color="orange">页面上可重用的Ul结构封装为组件</font>，从而方便项目开发的维护。</p> <p><strong>vue中的组件化开发</strong></p> <p>vue是一个<font color="orange">支持组件开发</font>的前端框架。</p> <p>vue中规定：<font color="orange">组件的后缀名</font>是<font color="orange">.vue</font>。之前接触到的<font color="orange">App.vue文件本质</font>上就是一个<font color="orange">vue组件</font>。</p> <h4 id="_6-2-1-vue组件的组成部分"><a href="#_6-2-1-vue组件的组成部分" class="header-anchor">#</a> 6.2.1：vue组件的组成部分</h4> <p>每个.vue组件都由3个部分构成，分别是：</p> <ul><li><font color="orange">template</font> -&gt; 组件的<font color="orange">模版结构</font></li> <li><font color="orange">script </font>-&gt; 组件的<font color="orange">javaScript行为</font></li> <li><font color="orange">style</font> -&gt; 组件的<font color="orange">样式</font></li></ul> <p>其中，每个组件必须包含<font color="orange">template模版结构</font>，而<font color="orange">script行为</font>和<font color="orange">style样式</font>是<font color="orange">可选的</font>组成部分</p> <h5 id="_6-2-1-1-template"><a href="#_6-2-1-1-template" class="header-anchor">#</a> 6.2.1.1：template</h5> <p>vue规定：每个组件对应的<font color="orange">模版结构</font>，需要定义到<font color="orange">  template  节点</font>中。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
		当前组件的DOM结构，需要定义到template标签的内部
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注意：</p> <ul><li>template是vue提供的<font color="orange">容器标签</font>，只起到<font color="orange">包裹性质的作用</font>，它不会被渲染为真正的DOM元素</li> <li>template中只能包含唯一的根节点</li></ul> <h5 id="_6-2-1-2-script"><a href="#_6-2-1-2-script" class="header-anchor">#</a> 6.2.1.2：script</h5> <p>vue规定：开发者可以在script节点中<font color="orange">封装组件javaScript业务逻辑</font></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
    // 今后，组件相关的 data数据、methods方法等
    // 都需要定义到 export default 所导出的对象中。
	export default{}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script节点中</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>vue组件中data必须是函数</strong></p> <p>vue规定： .vue组件中data <font color="orange">必须是一个函数</font>，<font color="orange">不能</font>直接<font color="orange">指向一个数据对象</font></p> <p>因此在组件中定义data数据节点时，下面方式是<font color="orange">错误的：</font></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>data:{ // 组件中，不能直接让data指向 一个数据对象（会报错）
	count:0
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>会导致<font color="orange">多个组件实例</font>共用<font color="orange">同一份数据</font>的问题</p> <h5 id="_6-2-4-3-style"><a href="#_6-2-4-3-style" class="header-anchor">#</a> 6.2.4 .3：style</h5> <p>vue规定：组件内的style节点是<font color="orange">可选的</font>，开发者可以在style节点中<font color="orange">编写样式美化当前组件的UI结构。</font></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span>
	h1{font-weight:noraml;}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>让style中支持<font color="orange">less语法</font></strong></p> <p>在style标签上添加<font color="orange">lang=&quot;less&quot;</font>属性，即可使用less语法编写组件的样式：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	h1{
    	font-weight:noraml;
    	span{color:red}
    }
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在style中组件中样式会全局生效，因此<font color="orange">很容易造成多个组件之间的样式的冲突问题</font></p> <p>为每个组件<font color="orange">分配唯一的自定义属性</font>，在编写组件样式时，通过<font color="orange">属性选择器来控制样式的作用域</font>，vue为style节点提供了<font color="red">scoped</font>属性，从而防止组件之间的样式冲突问题</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>style中样式前添加 <font color="orange">/deep/</font></strong></p> <p>如果给当前组件的style节点添加scoped属性，则<font color="orange">当前组件的样式对其子组件是不生效的</font>，如果想让某些样式对子组件生效，可以使用<font color="orange">/deep/深度选择器</font></p> <div class="language-css line-numbers-mode"><pre class="language-css"><code> <span class="token selector">&lt;style lang=&quot;less&quot; scoped&gt;
	button</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token selector">// 不加 /deep/时，生成选择器格式为 button[data-v-052242de]
    /deep/ button</span><span class="token punctuation">{</span> 
        <span class="token property">padding</span><span class="token punctuation">:</span> 10px 24px<span class="token punctuation">;</span> 
        <span class="token property">font-size</span><span class="token punctuation">:</span> 23px<span class="token punctuation">;</span>  // 加上 /deep/时，生成选择器格式为 [data-v-052242de] button
    <span class="token punctuation">}</span>
&lt;/style&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_6-2-2-组件父子和传递数据"><a href="#_6-2-2-组件父子和传递数据" class="header-anchor">#</a> 6.2.2：组件父子和传递数据</h4> <p><img src="/images/vue2/%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%88%B6%E5%AD%90%E5%85%B3%E7%B3%BB.jpg" alt="组件之间父子关系"></p> <h5 id="_6-2-2-1-私有子组件"><a href="#_6-2-2-1-私有子组件" class="header-anchor">#</a> 6.2.2.1：私有子组件</h5> <p><strong>通过components注册的是私有子组件</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Left<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Left<span class="token operator">&gt;</span>     <span class="token comment">//步骤3： 以标签形式使用刚才注册的组件</span>
            <span class="token operator">&lt;</span>Right<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Right<span class="token operator">&gt;</span>   <span class="token comment">//步骤3： 以标签形式使用刚才注册的组件</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> Left <span class="token keyword">from</span> <span class="token string">&quot;@/components/Left.vue&quot;</span>  <span class="token comment">// 步骤1：使用 import语法导入需要的组件</span>
<span class="token keyword">import</span> Right <span class="token keyword">from</span> <span class="token string">&quot;@/components/Right.vue&quot;</span> <span class="token comment">// 步骤1：使用 import语法导入需要的组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>
      Left<span class="token punctuation">,</span> <span class="token comment">// 步骤2：使用components节点注册组件</span>
      Right  <span class="token comment">// 步骤2：使用components节点注册组件</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;less&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h5 id="_6-2-2-2-全局组件"><a href="#_6-2-2-2-全局组件" class="header-anchor">#</a> 6.2.2.2：全局组件</h5> <p>在vue项目的<font color="orange">main.js</font>入口文件中，通过Vue.component()方法，可以注册全局组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Count <span class="token keyword">from</span> <span class="token string">'./components/Count.vue'</span> <span class="token comment">// 步骤1：导入全局组件文件</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;Count&quot;</span><span class="token punctuation">,</span>Count<span class="token punctuation">)</span> <span class="token comment">// 步骤2 ：注册全局组件</span>

<span class="token operator">&lt;</span>Count<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Count<span class="token operator">&gt;</span> <span class="token comment">// 步骤3 ：在其他的vue组件中进行标签的方式调用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="_6-2-2-3-父传子-自定义属性-props"><a href="#_6-2-2-3-父传子-自定义属性-props" class="header-anchor">#</a> 6.2.2.3：父传子（自定义属性 props）</h5> <p>props是组件的<font color="orange">自定义属性</font>，在<font color="orange">封装通用组件</font>的时候，合理地使用props可以极大的<font color="orange">提高组件的复用性</font>！</p> <p><font color="orange">父组件通过 props 向下传递数据给子组件</font></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span> // 父组件
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Count</span> <span class="token attr-name">:init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Count</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span> <span class="token comment">// 子组件</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;addCount&quot;</span><span class="token operator">&gt;</span>加一<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	
	<span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'自定义属性1'</span>，<span class="token string">'自定义属性2'</span>，<span class="token string">'自定义属性3'</span><span class="token punctuation">]</span>  <span class="token comment">// 第一种自定义属性</span>

    <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span>  <span class="token comment">// 第二种自定义属性</span>
        <span class="token literal-property property">init</span><span class="token operator">:</span><span class="token punctuation">{</span> 
            <span class="token literal-property property">type</span><span class="token operator">:</span>Number<span class="token punctuation">,</span> <span class="token comment">// props 的type来定义属性值类型 （可选）</span>
            <span class="token keyword">default</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span>  <span class="token comment">// 定义属性的默认值 （可选）</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">//必填项，强制用户必须传递属性的值 （可选）</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>  <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>init <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span>  <span class="token punctuation">}</span> <span class="token comment">// props是只读属性</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h5 id="_6-2-2-4-子传父-自定义事件"><a href="#_6-2-2-4-子传父-自定义事件" class="header-anchor">#</a> 6.2.2.4：子传父 （自定义事件）</h5> <p><strong><font color="orange">子组件</font></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;addCount&quot;</span><span class="token operator">&gt;</span>加一<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'numchang'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过$emit触发自定义事件</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong><font color="orange">父组件</font></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;right&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Count @numchang<span class="token operator">=</span><span class="token string">'countChang'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Count<span class="token operator">&gt;</span>  <span class="token comment">//监听自定义事件</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
 <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">countChang</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 触发自定义事件，并打印传递子组件传递的值。</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="_6-2-2-5-兄弟传递-eventbus"><a href="#_6-2-2-5-兄弟传递-eventbus" class="header-anchor">#</a> 6.2.2.5：兄弟传递 （EventBus）</h5> <p>兄弟组件之间数据共享的方案EventBus</p> <p><strong><font color="orange">eventBus.js</font></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong><font color="orange">组件A （数据发送方）</font></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> bus <span class="token keyword">from</span> <span class="token string">'./eventBus.js'</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'share'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong><font color="orange">组件B  (数据接受方)</font></strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> bus <span class="token keyword">from</span> <span class="token string">&quot;@/components/eventBus.js&quot;</span>
<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'share'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">=</span>val
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_7-生命周期和-ref-引用"><a href="#_7-生命周期和-ref-引用" class="header-anchor">#</a> 7. 生命周期和 ref 引用</h2> <h3 id="_7-1-生命周期"><a href="#_7-1-生命周期" class="header-anchor">#</a> 7.1：生命周期</h3> <p>生命周期 &amp; 生命周期函数</p> <p><font color="orange">生命周期</font> 是指一个组件从<font color="orange">创建</font>  -&gt;  <font color="orange">运行</font>  -&gt;  <font color="orange">销毁</font>的整个阶段，<font color="orange">强调的是一个时间段</font>。</p> <h3 id="_7-2-生命周期函数"><a href="#_7-2-生命周期函数" class="header-anchor">#</a> 7.2：生命周期函数</h3> <p><img src="/images/vue2/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0.png" alt="生命周期函数"></p> <p><font color="orange">生命周期函数</font>：是由vue框架提供的<font color="orange">内置函数</font>，会伴随着组件的生命周期，<font color="orange">自动按次序执行</font>。（注意：<font color="orange">生命周期</font>强调的<font color="orange">是时间段</font>，<font color="orange">生命周期函数</font>强调的<font color="orange">是时间点</font>）</p> <p><img src="/images/vue2/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0%E5%88%86%E7%B1%BB.jpg" alt="生命周期函数分类"></p> <h4 id="_7-2-1-created-重点"><a href="#_7-2-1-created-重点" class="header-anchor">#</a> 7.2.1 ： created(重点)</h4> <p>组件的<font color="orange">porps/data/methods已创建好</font>，都处于 <font color="orange">可用的状态</font>。但是组件的<font color="orange">模版结构尚未生成</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;created&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>      
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_7-2-2-mounted-重点"><a href="#_7-2-2-mounted-重点" class="header-anchor">#</a> 7.2.2 ：mounted(重点)</h4> <p>已经把内存中的HTML结构，<font color="orange">成功的渲染到浏览器之中</font>，此时浏览器中<font color="orange">已然包含了当前组件的DOM结构</font>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;mounted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>h2Ref<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_7-2-3-updated-重点"><a href="#_7-2-3-updated-重点" class="header-anchor">#</a> 7.2.3：updated(重点)</h4> <p>已经根据最新的数据，<font color="orange">完成了</font>组件DOM结构的<font color="orange">重新渲染</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;updated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'h2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_7-3-ref引用"><a href="#_7-3-ref引用" class="header-anchor">#</a> 7.3：ref引用</h3> <p><strong>什么是ref引用</strong></p> <p>ref用来辅助开发者在<font color="orange">不依赖于jQuery的情况下</font>，获取DOM元素或组件的引用。</p> <p>每个vue的组件实例上，都包含一个<font color="orange">$refs对象</font>，里面存储着对应的DOM元素或组件的引用默认情况下，组件的<font color="orange">$refs指向一个空对象</font></p> <h5 id="_7-3-1-ref引用dom元素"><a href="#_7-3-1-ref引用dom元素" class="header-anchor">#</a> 7.3.1：ref引用DOM元素</h5> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h2Ref<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    	 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
export default {
	data(){
          return{ msg:&quot;Hello vue.js&quot; }
    },
    methods: {
      btn(){ this.$refs.h2Ref.style.color=&quot;black&quot; }
	}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="_7-3-2-ref引用组件实例"><a href="#_7-3-2-ref引用组件实例" class="header-anchor">#</a> 7.3.2：ref引用组件实例</h5> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>resetLeft<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>处理left组件的重置数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>left</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>leftRef<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>left</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
import left from './components/left.vue'
export default { 
  resetLeft(){ this.$refs.leftRef.restCount() } // 可以通过ref调用组件里方法
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="_7-3-3-this-nexttick-cb"><a href="#_7-3-3-this-nexttick-cb" class="header-anchor">#</a> 7.3.3：this.$nextTick(cb)</h5> <p>组件的<font color="orange">$nextTick(cb)</font>方法，<font color="orange">会把cb回调推迟到下一个DOM更新周期之后执行</font>，通俗的理解是，等组件的DOM更新完成之后，再执行cb回调函数，从而能保证cb回调函数可以操作到最新的DOM元素。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>      
      <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token string">&quot;inputRef&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;taggle&quot;</span> @blur<span class="token operator">=</span><span class="token string">&quot;inputBlur&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button v<span class="token operator">-</span><span class="token keyword">else</span> @click<span class="token operator">=</span><span class="token string">&quot;taggleBtn&quot;</span><span class="token operator">&gt;</span> 显示文本框<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">taggle</span><span class="token operator">:</span><span class="token boolean">false</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">taggleBtn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>taggle<span class="token operator">=</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>taggle<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>inputRef<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">inputBlur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	  <span class="token keyword">this</span><span class="token punctuation">.</span>taggle<span class="token operator">=</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>taggle
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_8-动态组件和插槽和自定义指令"><a href="#_8-动态组件和插槽和自定义指令" class="header-anchor">#</a> 8. 动态组件和插槽和自定义指令</h2> <h3 id="_8-1-动态组件"><a href="#_8-1-动态组件" class="header-anchor">#</a> 8.1：动态组件</h3> <p>动态组件指的是动态切换组件的显示于隐藏</p> <h4 id="_8-1-1-component"><a href="#_8-1-1-component" class="header-anchor">#</a> 8.1.1：component</h4> <p>vue提供一个内置<font color="orange"> component </font> 组件，<font color="orange">专门用来实现动态组件的渲染</font>。作用：组件的占位符</p> <p>component 组件里的<font color="orange">is属性</font>的值表示要渲染的组件的名字，<font color="orange">is</font>属性的值，应该是组件在<font color="orange">components</font>节点下的注册名称</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Button @click<span class="token operator">=</span>leftCk<span class="token operator">&gt;</span>left<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Button @click<span class="token operator">=</span>rightCk<span class="token operator">&gt;</span>right<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">&quot;taggle&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> Left <span class="token keyword">from</span> <span class="token string">'@/components/Left.vue'</span>
<span class="token keyword">import</span> Right <span class="token keyword">from</span> <span class="token string">'@/components/Right.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">taggle</span><span class="token operator">:</span><span class="token string">&quot;Left&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>Left<span class="token punctuation">,</span> Right<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">leftCk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>taggle<span class="token operator">=</span><span class="token string">&quot;Left&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">rightCk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>taggle<span class="token operator">=</span><span class="token string">&quot;Right&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="_8-1-2-keep-alive"><a href="#_8-1-2-keep-alive" class="header-anchor">#</a> 8.1.2：Keep-alive</h4> <p><strong>使用Keep-alive保持状态</strong> 会把内部的<font color="orange">组件进行缓存</font>，而<font color="orange">不是销毁组件</font>。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>taggle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_8-1-2-1-生命周期函数"><a href="#_8-1-2-1-生命周期函数" class="header-anchor">#</a> 8.1.2.1：生命周期函数</h5> <p>当组件<font color="orange">被缓存</font>时，会自动触发组件的<font color="orange">deactivted生命周期函数</font></p> <p>当组件<font color="orange">被激活</font>时，会自动触发组件的<font color="orange">activted生命周期函数</font></p> <ul><li>当组件第一次<font color="orange">被创建的时候</font>，既会<font color="orange">执行 created </font>生命周期，也会<font color="orange">执行 activated</font> 生命周期</li> <li>当时，当组件<font color="orange">被激活的时候</font>，<font color="orange">不再触发 created</font>生命周期，只会<font color="orange">触发 activated </font>生命周期，因为组件没有被重新创建</li></ul> <h5 id="_8-1-2-2-include属性"><a href="#_8-1-2-2-include属性" class="header-anchor">#</a> 8.1.2.2：include属性</h5> <p><font color="orange">include</font>属性用来指定：只有<font color="orange">名称匹配的组件会被缓存</font>，多个组件名之间<font color="orange">使用英文的逗号分隔</font></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyLeft,Right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>taggle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_8-1-2-3-exclude属性"><a href="#_8-1-2-3-exclude属性" class="header-anchor">#</a> 8.1.2.3：exclude属性</h5> <p><font color="orange">excude</font>属性指定<font color="orange">那些组件不需要被缓存</font>，注意：<font color="red">不要同时使用include和exclude这两个属性</font></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">exclude</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyLeft,Right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>taggle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_8-1-2-4-组件的-name"><a href="#_8-1-2-4-组件的-name" class="header-anchor">#</a> 8.1.2.4：组件的 name</h5> <p>当<font color="orange">vue组件</font>中提供了<font color="orange">name属性</font>之后，组件的<font color="orange">名称，就是name属性的值</font></p> <ol><li>组件的 “<font color="orange">注册名称</font>” 的主要应用场景是：以标签的形式，把注册好的组件，渲染和使用到页面结构之中</li> <li>组件声明时候的 “<font color="orange">name</font>” 名称的主要应用场景：结合<font color="orange"> keep-alive 标签实现组件缓存功能</font>；以及在<font color="orange">调试工具中看到组件的 name </font>名称  name: 'MyRight'</li></ol> <h3 id="_8-2-插槽"><a href="#_8-2-插槽" class="header-anchor">#</a> 8.2：插槽</h3> <p><font color="orange">插槽（Slot）</font>是Vue为<font color="orange">组件的封装者</font>提供的能力，允许开发者在封装组件时，把<font color="orange">不确定的，希望由用户指定的部分定义为插槽</font>。可以把插槽认为组件的封装期间，<font color="orange">为用户预留的内容占位符</font>。</p> <p><strong>插槽的基础用法</strong></p> <p>在封装组件时，可以通过<font color="orange"> slot </font>元素<font color="orange">定义插槽</font>，从而<font color="orange">为用户预留内容占位符</font>，</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>  // Header组件页面 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这是预留插槽的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Header</span><span class="token punctuation">&gt;</span></span>  // app组件页面
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>如果在封装组件时<font color="orange">没有预留任何 slot 插槽</font>，则用户提供的任何<font color="orange">自定义内容都会被丢弃</font></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>  // Header组件页面 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span> 没有预留任何<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>插槽，内容则会丢弃 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Header</span><span class="token punctuation">&gt;</span></span> // app组件页面
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_8-2-1-后备内容"><a href="#_8-2-1-后备内容" class="header-anchor">#</a> 8.2.1：后备内容</h4> <p>封装组件时，可以预留的 slot 插槽提供的<font color="orange">后备内容</font>（默认内容）。如果组件的使用者没有为插槽提供任何内容，则后备内容会生效。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tempalte</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>这是后备内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tempalte</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_8-2-2-具名插槽"><a href="#_8-2-2-具名插槽" class="header-anchor">#</a> 8.2.2：具名插槽</h4> <p>如果在封装组件时<font color="orange">需要预留多个插槽节点</font>，则需要为每个 slot 插槽指定<font color="orange">具体的name名称</font>，这种<font color="orange">带有具体名称的插槽</font>叫做“具名插槽”  <font color="red">注意：</font><font color="red">没有指定name名称的插槽，会有隐含的名称叫做&quot; default &quot;</font></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerLeft<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerCenter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerRight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>为具名插槽提供内容</strong></p> <p>在向具名插槽提供内容的时候，我们可以在一个**<font color="orange"> templaten </font>**元素上使用<font color="red">v-slot</font>指定，并以v-slot的参数的形式提供名称</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#headerLeft</span><span class="token punctuation">&gt;</span></span> // v-slot 简写是  #
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerLeft<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>返回<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>headerCenter</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerCenter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#headerRight</span><span class="token punctuation">&gt;</span></span> // v-slot 简写是  #
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerRight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Header</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_8-2-3-作用域插槽"><a href="#_8-2-3-作用域插槽" class="header-anchor">#</a> 8.2.3：作用域插槽</h4> <p>在封装组件的过程中，可以为预留的 slot 插槽绑定props数据，这种<font color="orange">带有props数据的 slot </font>叫做&quot;<font color="orange">作用域插槽</font>&quot;</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>  // Header 组件中
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerCenter<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>name</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
data(){
	return:{ name:'加油'}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>接受作用域传递的数据</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#headerCenter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>headerCenter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{scope.user}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> // 内容为 加油
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Header</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意：<font color="orange">作用域插槽对外提供的数据对象，可以使用解构数据简化数据的接受结果</font></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#headerCenter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span> {{user}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> // {name:&quot;加油&quot;}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Header</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_8-3-自定义指令"><a href="#_8-3-自定义指令" class="header-anchor">#</a> 8.3：自定义指令</h3> <p>vue官方提供了v-text，v-for，v-model，v-if等常用的指令，<font color="orange">除此之外vue还允许开发者自定义指令</font>。</p> <h4 id="_8-3-1-私有自定义指令"><a href="#_8-3-1-私有自定义指令" class="header-anchor">#</a> 8.3.1：私有自定义指令</h4> <p>使用自定义指令时，需要加上v-前缀，例如下</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">v-color</span><span class="token punctuation">&gt;</span></span> h1标签内容 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- 声明自定义指令时，指令名字是 color --&gt;</span>      <span class="token comment">&lt;!-- 使用的时候，需要加上 v-前缀 --&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong><font color="orange">directives</font></strong></p> <p>在每个vue组件，可以在<font color="orange">directives节点下声明私有自定义指令</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">directives</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token punctuation">{</span> el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span><span class="token string">'red'</span> <span class="token punctuation">}</span> <span class="token comment">// 形参中el是绑定了指令的、原生的 DOM 对象</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong><font color="orange">为自定义指令动态绑定数值</font></strong></p> <p>在结构中也可以<font color="orange">使用自定义指令</font>时，可以<font color="orange">通过等号(=)的方式</font>，为当前<font color="orange">指令动态绑定参数值</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>&lt;h1 v-color=&quot;colorType&quot;&gt; h1标签的内容 &lt;/h1&gt;
&lt;script&gt;
	data(){
    	return{  colorType:&quot;red&quot; }
    },
    directives:{
    	color:{
    		bind(el,binding){
				el.style.color=binding.value &lt;!-- binding在声明自定义指令时，通过形参中第二个参数，接受指令的参数值 --&gt;
  		  }
    	}
    }
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><font color="orange"><strong>update函数</strong></font></p> <p><font color="orange">bind函数只调用1次</font>：当指令第一次绑定到元素时调用，<font color="orange">当DOM更新时bind函数不会被触发</font>，<font color="orange">update函数会在每次DOM更新时被调用</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code> directives:{
	color:{
		bind(el,object){
			 el.style.color=object.value
              console.log(&quot;bind被触发&quot;);
		}
		update(el,object){
			el.style.color=object.value
			console.log(&quot;update被触发&quot;)
		}
	}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong><font color="orange">函数简写</font></strong></p> <p>如果<font color="orange">bind</font>和<font color="orange">update</font>函数中<font color="orange">逻辑完全相同</font>，则<font color="orange">对象格式</font>的自定义指令<font color="orange">可以简写函数格式</font></p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>directives:{
	color(el,object){
		el.style.color=object.value
	}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_8-3-2-全局自定义指令"><a href="#_8-3-2-全局自定义指令" class="header-anchor">#</a> 8.3.2：全局自定义指令</h4> <p>全局共享的自定义指令需要通过 &quot; Vue.directive() &quot; 进行声明</p> <div class="language-xml-dtd line-numbers-mode"><pre class="language-text"><code>Vue.directive('color',(el,object){
	el.style.color=object.value
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_9-路由"><a href="#_9-路由" class="header-anchor">#</a> 9. 路由</h2> <p>路由(英文：router) 就是 <font color="orange">Hash地址 与 组件之间对应关系</font></p> <h3 id="_9-1-路由的概念与原理"><a href="#_9-1-路由的概念与原理" class="header-anchor">#</a> 9.1 ：路由的概念与原理</h3> <p><strong>SPA与前端路由</strong></p> <p>SPA指的是一个web网站只有唯一的一个HTML页面，<font color="orange">所有组件的展示与切换</font>都在这唯一的一个页面内完成。此时，<font color="orange">不同组件之间的切换</font>需要通过前端路由来实现。</p> <p>结论：在SPA项目中，<font color="orange">不同的功能之间的切换</font>，要<font color="orange">依赖于前端路由</font>来完成！</p> <p><strong>前端路由的工作方式</strong></p> <ol><li>用户<font color="orange">点击了</font>页面上的<font color="orange">路由链接</font></li> <li>导致了<font color="orange">URL地址栏</font>中的<font color="orange">Hash值</font>发生了变化</li> <li><font color="orange">前端路由监听了到Hash地址的变化</font></li> <li>前端路由把当前<font color="orange">Hash地址对应组件</font>渲染都浏览器中
<img src="/images/vue2/%E8%B7%AF%E7%94%B1%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.jpg" alt="路由的工作原理"></li></ol> <p><strong>实现简易的前端路由</strong></p> <p>通过 component 标签， 结合comName动态渲染组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;#/home&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;#/movie&quot;</span><span class="token operator">&gt;</span>Movie<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">&quot;comName&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">{</span> <span class="token literal-property property">comName</span><span class="token operator">:</span><span class="token string">'Home'</span> <span class="token comment">//要展示的组件名称 }</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		window<span class="token punctuation">.</span><span class="token function-variable function">onhashchange</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
			<span class="token keyword">switch</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">case</span><span class="token operator">:</span><span class="token string">'#/home'</span><span class="token operator">:</span> 
					<span class="token keyword">this</span><span class="token punctuation">.</span>comName<span class="token operator">=</span><span class="token string">'Home'</span>
					<span class="token keyword">break</span>
				<span class="token keyword">case</span><span class="token operator">:</span><span class="token string">'#/movie'</span><span class="token operator">:</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>comName<span class="token operator">=</span><span class="token string">&quot;Movie&quot;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_9-2-vue-router的基本使用"><a href="#_9-2-vue-router的基本使用" class="header-anchor">#</a> 9.2 ：vue-router的基本使用</h2> <p><strong>什么是vue-router</strong></p> <p><font color="orange">vue-router</font>是vue.js官方给出的<font color="orange">路由解决方案</font>，它只能结合vue项目使用，能够轻松的管理SPA项目中组件的切换。</p> <p><strong>vue-router安装和配置的步骤</strong></p> <ol><li>安装vue-router包</li> <li>创建路由模块</li> <li>导入并挂载路由模块</li> <li>声明路由链接和占位符</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm install vue<span class="token operator">-</span>router  <span class="token comment">// 安装 vue-router的包</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建路由模块  router文件中创建 index.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'@/components/nav/Home.vue'</span>
<span class="token keyword">import</span> News <span class="token keyword">from</span> <span class="token string">'@/components/nav/News.vue'</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'@/components/nav/About.vue'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> rt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">&quot;/home&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 路由重定向 ， redirect：指定一个新的路由地址</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span>Home <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/news'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span>News <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span>About <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> rt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导入并挂载路由模块 main.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App2.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'@/router/index.js'</span>

Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
  router
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 声明路由链接和占位符 App2.vue</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;app2&quot;</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;nav&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;home&quot;</span><span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;news&quot;</span><span class="token operator">&gt;</span>新闻<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;about&quot;</span><span class="token operator">&gt;</span>关于<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_9-3-vue-router的常见用法"><a href="#_9-3-vue-router的常见用法" class="header-anchor">#</a> 9.3 ：vue-router的常见用法</h3> <h4 id="_9-3-1-嵌套路由"><a href="#_9-3-1-嵌套路由" class="header-anchor">#</a> 9.3.1：嵌套路由</h4> <p>通过路由实现<font color="orange">组件的嵌套展示</font>，叫做嵌套路由</p> <p><img src="/images/vue2/%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1.jpg" alt="嵌套路由"></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>  // 路由组件中嵌套路由
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>news<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/news/news1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>新闻1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/news/news2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>新闻2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/news/news3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>新闻3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> rt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/news'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">component</span><span class="token operator">:</span>News<span class="token punctuation">,</span>
        <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/news/news1'</span><span class="token punctuation">,</span> <span class="token comment">// redirect 重定向子路由</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span> <span class="token comment">// 通过 children 属性声明子路由规则</span>
          <span class="token comment">// {  path:'/', component:News1 }, 第二种：重定向子路由</span>
          <span class="token punctuation">{</span>  <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'news1'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span>News1 <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'news2'</span><span class="token punctuation">,</span>  <span class="token literal-property property">component</span><span class="token operator">:</span>News2 <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'news3'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span>News3 <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="_9-3-2-动态路由匹配"><a href="#_9-3-2-动态路由匹配" class="header-anchor">#</a> 9.3.2：动态路由匹配</h4> <p>动态路由指的是：把Hash地址中<font color="orange">可变的部分</font>定义为<font color="orange">参数项</font>，从而<font color="orange">提高路由规则的复用性</font>。在vue-router中使用<font color="orange">英文的冒号( <strong>:</strong> ) </font>来定义路由的参数项</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/news/:id'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Details<span class="token punctuation">}</span> <span class="token comment">// 路由中动态参数以：进行声明，冒号后面的是动态参数的名称</span>

<span class="token comment">//将以下3个路由规则，合并成了一个，提高路由规则复用性</span>
<span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/news/1'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Details<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/news/2'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Details<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/news/3'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Details<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="_9-3-2-1-router-params参数"><a href="#_9-3-2-1-router-params参数" class="header-anchor">#</a> 9.3.2.1：$router.params参数</h5> <p>在动态路由渲染出来的组件中，可以使用this.$route.params对象访问到动态匹配的参数值</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>details<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span> this {{this.$route.params.id}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  // this 可以省略
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="_9-3-2-2-使用props接收路由参数"><a href="#_9-3-2-2-使用props接收路由参数" class="header-anchor">#</a> 9.3.2.2：使用props接收路由参数</h5> <p>为了简化路由参数的获取形式，vue-router允许在路由规则中开启props传承</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// router中index.js文件中</span>
 <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/news/:id'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">component</span><span class="token operator">:</span>Details<span class="token punctuation">,</span>
        <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// details.vue 组件中</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span> props <span class="token punctuation">{</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_9-3-3-编程式导航跳转"><a href="#_9-3-3-编程式导航跳转" class="header-anchor">#</a> 9.3.3：编程式导航跳转</h4> <p>vue-router提供了许多程序式导航的API，其中最常用的导航API分别是：</p> <ol><li>this.$router.<font color="orange">push</font> ('hash地址')
<ol><li>跳转到指定的hash地址，并<font color="orange">增加</font>一条历史记录</li></ol></li> <li>this.$router.<font color="orange">replace</font>('hash地址')
<ol><li>跳转到指定的hash地址，并<font color="orange">替换掉当前的</font>历史记录</li></ol></li> <li>this.$router.<font color="orange">go</font>(数值n)
<ol><li>实现导航历史前进、后退</li></ol></li></ol> <h5 id="_9-3-3-1-router-push"><a href="#_9-3-3-1-router-push" class="header-anchor">#</a> 9.3.3.1：$router.push</h5> <p>调用 <font color="orange">this.$router.push() </font>方法，可以跳转到指定的hash地址，从而展示对应的组件页面</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>$router.push(<span class="token punctuation">&quot;</span>/news/2<span class="token punctuation">&quot;</span>)<span class="token punctuation">'</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_9-3-3-2-router-replace"><a href="#_9-3-3-2-router-replace" class="header-anchor">#</a> 9.3.3.2：$router.replace</h5> <p>调用<font color="orange">this.$router.replace()</font>方法，可以跳转到指定的hash地址，从而展示对应的组件页面。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>$router.replace(<span class="token punctuation">&quot;</span>/news/2<span class="token punctuation">&quot;</span>)<span class="token punctuation">'</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>push 和 replace的区别</strong></p> <ul><li>push 会<font color="orange">添加一条历史记录</font></li> <li>replace 不会添加历史记录，而是<font color="orange">替换掉当前的历史记录</font></li></ul> <h5 id="_9-3-3-3-router-go"><a href="#_9-3-3-3-router-go" class="header-anchor">#</a> 9.3.3.3：$router.go</h5> <p>调用this.<font color="orange">$router.go</font> ()方法，可以在浏览历史中前进和后退</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> &lt;button @click=&quot;$router.go(-1)&quot;&gt;返回&lt;/button&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>$.router.go 的简化用法</strong></p> <p>在实际开发中，一般只会前进和后退一层页面，因此vue-router提供了两个便捷方法：</p> <ol><li>$router<font color="orange">.back</font>()
<ol><li>在历史上记录中，<font color="orange">后退</font>到上一个页面</li></ol></li> <li>$router.<font color="orange">forward</font>()
<ol><li>在历史记录中，<font color="orange">前进</font>到下一个页面</li></ol></li></ol> <h4 id="_9-3-4-导航守卫"><a href="#_9-3-4-导航守卫" class="header-anchor">#</a> 9.3.4：导航守卫</h4> <p><font color="orange">导航守卫</font>可以<font color="orange">控制路由的访问权限</font></p> <p><img src="/images/vue2/%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB.jpg" alt="导航守卫"></p> <h5 id="_9-3-4-1-全局前置守卫"><a href="#_9-3-4-1-全局前置守卫" class="header-anchor">#</a> 9.3.4.1：全局前置守卫</h5> <p>每次发生路由的<font color="orange">导航跳转</font>时，都会触发<font color="orange">全局前置守卫</font>，因此，在全局前置守卫中，可以对每个路由进行访问权限的控制</p> <p><strong>守卫的方法的三个参数</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//创建路由实例对象</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//全局前置守卫</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// to 是将要访问的路由信息对象</span>
    <span class="token comment">// from 是将要离开的路由信息对象</span>
    <span class="token comment">// 如果不声明next形参，则默认允许用户访问每一个路由</span>
    <span class="token comment">// 如果声明了next形参，next 是一个函数，调用next() 表示放行，允许这次路由导航跳转</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="/images/vue2/%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB.jpg" alt="全局前置守卫"></p> <h3 id="_9-4-路由传参及隐藏参数"><a href="#_9-4-路由传参及隐藏参数" class="header-anchor">#</a> 9.4：路由传参及隐藏参数</h3> <p><strong>1.路由跳转及传参形式</strong></p> <p><strong>vue中路由中需要传递参数的话可以用query和param传递，两者类似于get和post。</strong></p> <p><strong>先上路由配置文件 （router/index.js)</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/chat'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Chat'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Chat
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="path方式跳转"><a href="#path方式跳转" class="header-anchor">#</a> <strong>path方式跳转</strong></h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ path: <span class="token punctuation">'</span>/chat<span class="token punctuation">'</span>, query: { plan: <span class="token punctuation">'</span>private<span class="token punctuation">'</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Register<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
//简写不传参
this.$router.push('/chat')
//全写传参
this.$router.push({path:'/chat',query:{name1:'1',name2:'2'}})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>获取query传参</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query
<span class="token comment">//获取结果</span>
<span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">name2</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://www.freesion.com/images/497/8f99be03c173ecdb62d45e22c5abb459.png" alt="img"></p> <h4 id="name-方式跳转"><a href="#name-方式跳转" class="header-anchor">#</a> name 方式跳转</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ name: <span class="token punctuation">'</span>Chat<span class="token punctuation">'</span>, params: { plan: <span class="token punctuation">'</span>private<span class="token punctuation">'</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
//全写传参
this.$router.push({name:'Chat',params:{name1:'1',name2:'2'}})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>获取query传参</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params
<span class="token comment">//获取结果</span>
<span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">name2</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://www.freesion.com/images/801/75af6ce04a6d6ab419811c06860bc841.png" alt="img"></p> <p><strong>注意！</strong></p> <p><strong>query传参相当于get方式，会把要传递的参数显示在导航栏中。</strong></p> <p><strong>params传参相当于post方式。不会把传递的参数显示在导航栏中。</strong></p> <p><strong>query跳转路由传参显示参数这对于普通数据没什么,但是对于敏感数据，比如 涉及到用户敏感信息 ，用query就不好了。</strong></p> <p><strong>我们可以用params方式传递参数，它不会把传递的参数显示到导航栏中。</strong></p> <p><strong>但是！</strong></p> <p><strong>我们用 this.$route.params 获取数据后。刷新页面会丢失获取到的数据，但我们不能保证说让用户不刷新吧。</strong></p> <p><img src="https://www.freesion.com/images/792/c3d6a6e4cd2d7209eaf06a6af398b8d8.png" alt="img"> &lt;————刷新页面后 params数据丢失</p> <h4 id="解决办法"><a href="#解决办法" class="header-anchor">#</a> 解决办法</h4> <p><strong>会Vuex的，别使用路由传参了，直接把要传递的参数放到Vuex中它不香吗？</strong></p> <p><img src="https://www.freesion.com/images/991/5bdfc9a0cdca2ffccba897393718e35f.png" alt="img"></p> <p><strong>然后通过mutations设置state中的变量。在跳转后的页面获取Vuex中的变量</strong></p> <p><img src="https://www.freesion.com/images/723/15b8d46069c6eefb4547fe869b1e64eb.png" alt="img"></p> <p><strong>不想使用Vuex的，大致方法也在上图中 ，可以使用 *<em>Storage*</em> 的方式来保存传递的参数。cookie也可以。</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&quot;tagUser&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'tagUser'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong><font color="orange">params传承问题</font></strong></p> <p>（1）<font color="cornflowerblue">如果路由path要求传递params参数,但是没有传递,会发现地址栏URL有问题，详情如下</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>路由为 path<span class="token operator">:</span> <span class="token string">&quot;/search/:keyword&quot;</span><span class="token punctuation">,</span>
<span class="token comment">// 执行下面进行路由跳转的代码：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;Search&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 当前跳转代码没有传递params参数</span>
<span class="token comment">// 此时地址栏的信息就会有问题，少了 /search  的路径                   </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>解决：可以通过改变path来指定params参数可传可不传，</p> <p><font color="cornflowerblue">方式是：在路由的path的路径上添加问号    </font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/search/:keyword?&quot;</span><span class="token punctuation">,</span> <span class="token operator">?</span>表示该参数可传可不传 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>(2) <font color="cornflowerblue">上面已经知道 params 可传可不传，但是如果传递的时空串，会出现问题 ，如何解决。</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;Search&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">keyword</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//出现的问题和上面没有传参数的问题相同, 页面地址信息少了/search</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><font color="cornflowerblue">解决方式： 加入|| undefined，当我们传递的参数为空串时地址栏url也可以保持正常</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;Search&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">keyword</span><span class="token operator">:</span><span class="token string">''</span><span class="token operator">||</span><span class="token keyword">undefined</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_10-vuex"><a href="#_10-vuex" class="header-anchor">#</a> 10.Vuex</h2> <p><strong>Vuex</strong> 是实现组件全局状态（数据）管理的一种机制，可以方便的实现组件之间的数据共享。</p> <p><img src="/images/vue2/Vuex%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB.jpg" alt="Vuex数据共享"></p> <p><strong>使用Vuex统一管理状态的好处</strong></p> <ul><li>能够在vuex中集中管理共享的数据，易于开发和后期的维护</li> <li>能够高效地实现组件之间的数据共享，提高开发效率</li> <li>存储在vuex中的数据都是响应式，能够实时保持数据与页面的同步</li></ul> <p><strong>什么样的数据适合存储到Vuex中</strong></p> <p>一般情况下，只有组件之间共享的数据，才有必要存储到Vuex中，对于组件中私有存储在组件自身的data即可。</p> <h3 id="_10-1-vuex的基本使用"><a href="#_10-1-vuex的基本使用" class="header-anchor">#</a> 10.1 ：Vuex的基本使用</h3> <p><strong>1.安装vuex依赖包</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm install vuex <span class="token operator">--</span>save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>2.导入vuex包</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>3.创建store对象</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// store 中存放的就是全局共享的数据</span>
    <span class="token literal-property property">state</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span> <span class="token operator">:</span> <span class="token number">0</span>  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>4.将store对象挂载到vue实例中</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'store.js'</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
	<span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">,</span>
    router<span class="token punctuation">,</span>  
    store	<span class="token comment">// 将创建的共享的数据对象，挂载到vue实例中，所有组件，就可以直接从store 中获取全局的数据</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_10-2-vuex的核心概念"><a href="#_10-2-vuex的核心概念" class="header-anchor">#</a> 10.2 ：Vuex的核心概念</h3> <h4 id="_10-2-1-state"><a href="#_10-2-1-state" class="header-anchor">#</a> 10.2.1：State</h4> <p>State提供唯一的公共数据源，所有共享的数据都要统一放到Store的State中进行存储。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>cosnt store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>组件访问State中数据的第一种方式</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>全局数据名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>组件访问State中数据的第二种方式</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>mapState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>  <span class="token comment">// 1. 从vuex中按需导入 mapState 函数</span>

<span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span> 
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 将全局数据，映射为当前组件的计算属性</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_10-2-2-mutation"><a href="#_10-2-2-mutation" class="header-anchor">#</a> <strong>10.2.2：Mutation</strong></h4> <ul><li>只能通过mutation变更Store数据，不可以直接操作Store中的数据。</li> <li>通过以下方式虽然操作起来稍微繁琐一些，但是可以集中监控所有数据的变化。</li></ul> <p><strong>组件调用Mutation中方法的第一种方式</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span> <span class="token punctuation">}</span>
	<span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">{</span> 
		<span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>step</span><span class="token punctuation">)</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>count<span class="token operator">+=</span>step<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 触发 Mutations的add方法并携带参数</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>组件调用Mutation中方法的第二种方式</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;subThree&quot;</span><span class="token operator">&gt;</span>减<span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>mapState<span class="token punctuation">,</span>mapMutations<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>  <span class="token comment">// 从vuex 中按需导入 mapState , mapMutations 函数</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>  
    <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;countSubThree&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 将指定的mutations函数，映射为当前组件的methods函数</span>
    <span class="token function">subThree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">countSubThree</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
     <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_10-2-3-action"><a href="#_10-2-3-action" class="header-anchor">#</a> 10.2.3：Action</h4> <p><strong>Action用于处理异步任务</strong>，如果通过<strong>异步操作变更数据</strong>，必须<strong>通过Action</strong>，而不能使用Mutation，但是<strong>在Action中还是要通过触发Mutation的方式间接变更数据</strong>。</p> <p><strong>组件调用Action中方法的第一种方式</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// 定义 Action</span>
 <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 <span class="token comment">// ...省略其他代码</span>
     <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             state<span class="token punctuation">.</span>count<span class="token operator">+=</span>value
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token function">addAsync</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                 context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span>
             <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span> 
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 触发 Action</span>
 <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// 触发 actions 的第一种方式</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'addAsync'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>组件调用Action中方法的第二种方式</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 从 vuex 中按需导入 mapActions 函数</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 2. 将指定的 actions 函数，映射为当前组件的 methods 函数</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	 <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'addASync'</span><span class="token punctuation">,</span> <span class="token string">'addNASync'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_10-2-4-getter"><a href="#_10-2-4-getter" class="header-anchor">#</a> 10.2.4：Getter</h4> <p><strong>Getter用于Store中的数据进行加工处理形成新的数据。</strong></p> <ol><li>Getter可以对Store中已有的数据加工处理之后形成新的数据，类似Vue的计算属性。</li> <li>Store中数据发生变化，Getter的数据也会跟着变化。</li></ol> <p><strong>组件调用Getter中方法的第一种方式</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>组件调用Getter中方法的第二种方式</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>mapGetters<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'showNum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_1-vue简介" class="sidebar-link reco-side-_1-vue简介" data-v-cb1513f6>1. vue简介</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_1-1-数据驱动视图" class="sidebar-link reco-side-_1-1-数据驱动视图" data-v-cb1513f6>1.1 ：数据驱动视图</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_1-2-双向数据绑定" class="sidebar-link reco-side-_1-2-双向数据绑定" data-v-cb1513f6>1.2：双向数据绑定</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_1-3-mvvm" class="sidebar-link reco-side-_1-3-mvvm" data-v-cb1513f6>1.3 ：MVVM</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_1-4-mvvm的工作原理" class="sidebar-link reco-side-_1-4-mvvm的工作原理" data-v-cb1513f6>1.4 ：MVVM的工作原理</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_2-vue的基本使用" class="sidebar-link reco-side-_2-vue的基本使用" data-v-cb1513f6>2.Vue的基本使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_2-1-基本使用步骤" class="sidebar-link reco-side-_2-1-基本使用步骤" data-v-cb1513f6>2.1 ：基本使用步骤</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_3-vue的指令与过滤器" class="sidebar-link reco-side-_3-vue的指令与过滤器" data-v-cb1513f6>3. vue的指令与过滤器</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_3-1-内容渲染指令" class="sidebar-link reco-side-_3-1-内容渲染指令" data-v-cb1513f6>3.1 ：内容渲染指令</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_3-2-属性绑定指令" class="sidebar-link reco-side-_3-2-属性绑定指令" data-v-cb1513f6>3.2 ：属性绑定指令</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_3-3-事件绑定指令" class="sidebar-link reco-side-_3-3-事件绑定指令" data-v-cb1513f6>3.3 ：事件绑定指令</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_3-4-双向绑定指定" class="sidebar-link reco-side-_3-4-双向绑定指定" data-v-cb1513f6>3.4 ：双向绑定指定</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_3-5-条件渲染指令" class="sidebar-link reco-side-_3-5-条件渲染指令" data-v-cb1513f6>3.5 ：条件渲染指令</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_3-6-列表渲染指令" class="sidebar-link reco-side-_3-6-列表渲染指令" data-v-cb1513f6>3.6 ：列表渲染指令</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_3-7-过滤器" class="sidebar-link reco-side-_3-7-过滤器" data-v-cb1513f6>3.7 ：过滤器</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_4-侦听器和计算属性" class="sidebar-link reco-side-_4-侦听器和计算属性" data-v-cb1513f6>4.  侦听器和计算属性</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_4-1-侦听器" class="sidebar-link reco-side-_4-1-侦听器" data-v-cb1513f6>4.1 ：侦听器</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_4-2-计算属性" class="sidebar-link reco-side-_4-2-计算属性" data-v-cb1513f6>4.2 ：计算属性</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_5-axios请求" class="sidebar-link reco-side-_5-axios请求" data-v-cb1513f6>5：axios请求</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_5-1-async-和-await" class="sidebar-link reco-side-_5-1-async-和-await" data-v-cb1513f6>5.1 ：async 和 await</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_5-2-get请求" class="sidebar-link reco-side-_5-2-get请求" data-v-cb1513f6>5.2：get请求</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_5-3-post请求" class="sidebar-link reco-side-_5-3-post请求" data-v-cb1513f6>5.3 ：post请求</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_5-4-vue全局配置axios" class="sidebar-link reco-side-_5-4-vue全局配置axios" data-v-cb1513f6>5.4：vue全局配置axios</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_5-5-axios拦截器" class="sidebar-link reco-side-_5-5-axios拦截器" data-v-cb1513f6>5.5：axios拦截器</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_5-6-proxy-跨域问题" class="sidebar-link reco-side-_5-6-proxy-跨域问题" data-v-cb1513f6>5.6：proxy 跨域问题</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_5-7-请求跨域" class="sidebar-link reco-side-_5-7-请求跨域" data-v-cb1513f6>5.7：请求跨域</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_6-vue-cli和vue组件" class="sidebar-link reco-side-_6-vue-cli和vue组件" data-v-cb1513f6>6.  vue-cli和vue组件</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_6-1-vue-cli" class="sidebar-link reco-side-_6-1-vue-cli" data-v-cb1513f6>6.1 ：vue-cli</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_6-2-vue组件" class="sidebar-link reco-side-_6-2-vue组件" data-v-cb1513f6>6.2 ：vue组件</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_7-生命周期和-ref-引用" class="sidebar-link reco-side-_7-生命周期和-ref-引用" data-v-cb1513f6>7. 生命周期和 ref 引用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_7-1-生命周期" class="sidebar-link reco-side-_7-1-生命周期" data-v-cb1513f6>7.1：生命周期</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_7-2-生命周期函数" class="sidebar-link reco-side-_7-2-生命周期函数" data-v-cb1513f6>7.2：生命周期函数</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_7-3-ref引用" class="sidebar-link reco-side-_7-3-ref引用" data-v-cb1513f6>7.3：ref引用</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_8-动态组件和插槽和自定义指令" class="sidebar-link reco-side-_8-动态组件和插槽和自定义指令" data-v-cb1513f6>8. 动态组件和插槽和自定义指令</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_8-1-动态组件" class="sidebar-link reco-side-_8-1-动态组件" data-v-cb1513f6>8.1：动态组件</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_8-2-插槽" class="sidebar-link reco-side-_8-2-插槽" data-v-cb1513f6>8.2：插槽</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_8-3-自定义指令" class="sidebar-link reco-side-_8-3-自定义指令" data-v-cb1513f6>8.3：自定义指令</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_9-路由" class="sidebar-link reco-side-_9-路由" data-v-cb1513f6>9. 路由</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_9-1-路由的概念与原理" class="sidebar-link reco-side-_9-1-路由的概念与原理" data-v-cb1513f6>9.1 ：路由的概念与原理</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_9-2-vue-router的基本使用" class="sidebar-link reco-side-_9-2-vue-router的基本使用" data-v-cb1513f6>9.2 ：vue-router的基本使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_9-3-vue-router的常见用法" class="sidebar-link reco-side-_9-3-vue-router的常见用法" data-v-cb1513f6>9.3 ：vue-router的常见用法</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_9-4-路由传参及隐藏参数" class="sidebar-link reco-side-_9-4-路由传参及隐藏参数" data-v-cb1513f6>9.4：路由传参及隐藏参数</a></li><li class="level-2" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_10-vuex" class="sidebar-link reco-side-_10-vuex" data-v-cb1513f6>10.Vuex</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_10-1-vuex的基本使用" class="sidebar-link reco-side-_10-1-vuex的基本使用" data-v-cb1513f6>10.1 ：Vuex的基本使用</a></li><li class="level-3" data-v-cb1513f6><a href="/./blogs/foreEnd/VUE/2/#_10-2-vuex的核心概念" class="sidebar-link reco-side-_10-2-vuex的核心概念" data-v-cb1513f6>10.2 ：Vuex的核心概念</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="./assets/js/app.7ce36a75.js" defer></script><script src="./assets/js/3.f347c82f.js" defer></script><script src="./assets/js/1.d0ce8f0b.js" defer></script><script src="./assets/js/25.9a446864.js" defer></script>
  </body>
</html>
